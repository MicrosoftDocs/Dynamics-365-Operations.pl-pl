---
title: "Określenia optymalnej kombinacji rabatów nakładających się"
description: "Nakładanie się rabatów, należy określić kombinacji nakładających się rabaty, powodującymi najniższej sumy transakcji i najwyższy rabat końcowy. Gdy kwota rabatu zależy od cen produktów, które są kupowane, takich jak wspólne &quot;Kup 1, wysiąść 1 procent X&quot; rabatu sieci sprzedaży (BOGO), proces ten staje się problematyczna optymalizacji kombinatorycznej."
author: kfend
manager: AnnBe
ms.date: 04/04/2017
ms.topic: article
ms.prod: 
ms.service: Dynamics365Operations
ms.technology: 
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: AX 7.0.0, Operations, Core
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
translationtype: Human Translation
ms.sourcegitcommit: 0c6a7bdc4ba82dd57ab3e395e6dfb0ae4de31fc4
ms.openlocfilehash: 31e5104045ed5b8fbfa3677a7f5702d551de4231
ms.lasthandoff: 03/31/2017


---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a>Określenia optymalnej kombinacji rabatów nakładających się

Nakładanie się rabatów, należy określić kombinacji nakładających się rabaty, powodującymi najniższej sumy transakcji i najwyższy rabat końcowy. Gdy kwota rabatu zależy od cen produktów, które są kupowane, takich jak wspólne "Kup 1, wysiąść 1 procent X" rabatu sieci sprzedaży (BOGO), proces ten staje się problematyczna optymalizacji kombinatorycznej.

Ten artykuł dotyczy systemu Microsoft Dynamics AX 2012 R3 z KB 3105973 (wydany dnia 2 listopada 2015) lub później i do lutego 2016 wydania systemu Microsoft Dynamics AX. Aby określić rabaty kombinacji nakładających się stosować w sposób terminowy i w dalszym ciągu zapewnić bogatą funkcjonalność dyskontowania, który jest dostępny w systemie Microsoft Dynamics AX for Retail, wprowadziliśmy metody stosowania zniżek nakładających się. Nazywamy to nowa metoda **krańcowej wartości rankingu**. Ranking krańcowej wartości jest stosowany, gdy czas wymagany dla oceny możliwych kombinacji rabatów nakładających się przekracza próg, który jest konfigurowany na **handlu detalicznego parametry** strony w systemie Dynamics AX. W wartości kredytu marginalnego ranking metody wartość jest obliczana dla każdego rabatu nakładających się przy użyciu wartość rabatu na udostępnionych produktów. Nakładające się rabaty są następnie stosowane od najwyższej wartości względne do najniższej wartości względne. Szczegółowe informacje na temat nowej metody zobacz sekcję "Krańcowej wartości", w dalszej części tego artykułu. Marginalna wartość rankingu nie jest używany, gdy kwoty rabatów dla produktu nie są dotknięte innym produktem w transakcji. Na przykład ta metoda nie jest używany dla rabatów prosty lub dla prostych rabat i rabat ilościowy jeden produkt.

## <a name="discount-examples"></a>Zniżka przykłady
W systemie Dynamics AX można utworzyć nieograniczoną liczbę rabatów sieci sprzedaży na wspólny zestaw produktów. Jednakże ponieważ nie ma żadnego limitu, problemy z wydajnością może wystąpić podczas próby do obliczania rabatów, które powinny być używane na różne produkty. Poniższe przykłady ilustrują ten problem bardziej szczegółowo. W przykładzie 1 Zaczynamy od dwóch produktów i rabatów nakładających się. Następnie w przykładzie 2 pokażemy jak problem zmienia się po dodaniu więcej produktów z kategorii.

### <a name="example-1-two-products-and-two-discounts"></a>Przykład 1: Dwa produkty i rabatów

W tym przykładzie dwa produkty są niezbędne, aby uzyskać zniżkę dla każdego i rabatów nie mogą być łączone. Rabaty w tym przykładzie są **najlepszą cenę** rabatów. Oba produkty kwalifikują się do obu rabatów. Poniżej przedstawiono rabatów. [![Kumulacji rabatów kombi 01](./media/overlapping-discount-combo-01.jpg)](./media/overlapping-discount-combo-01.jpg) dla dowolnych dwóch produktów, tym lepiej tych rabatów zależy od cen tych dwóch produktów. Jeżeli cena obu produktów jest równą bądź prawie równą, lepiej jest rabat 1. Cena jednego produktu jest znacznie mniejsza od ceny innego produktu, lepiej jest rabatu 2. Oto reguły matematycznych do oceny tych rabatów względem siebie: [![nakładanie się rabatów kombi 02](./media/overlapping-discount-combo-02.jpg)](./media/overlapping-discount-combo-02.jpg) należy zauważyć, że gdy cena produktu 1 jest równa dwóm trzecim cena produktu 2, rabatów są równe. W tym przykładzie stawkę procentową rabatu skuteczne dla rabatu 1 waha się od kilku procent (gdy ceny te dwa produkty są oddalone) do maksymalnie 25 procent (gdy dwa produkty mają taką samą cenę). Ustala się stawkę procentową rabatu skuteczne dla rabatu 2. Zawsze jest 20 procent. Ponieważ procent rabatu skuteczne dla rabatu 1 ma zakres, który może być więcej niż lub mniejsze niż rabatu 2, najlepsze rabatu zależy od cen tych dwóch produktów, które muszą być dyskontowane. W tym przykładzie zakończeniu obliczeń szybkiego, ponieważ tylko dwa rabaty są stosowane do tylko dwóch produktów. Istnieją tylko dwa możliwe kombinacje: jeden wniosek rabatu 1 lub jeden stosowania rabatu 2. Nie ma żadnych permutacji do obliczenia. Wartość każdego rabatu jest obliczana przy użyciu zarówno produkty, jak i najlepszych rabatu jest używany.

### <a name="example-2-four-products-and-two-discounts"></a>Przykład 2: Czterech produktów i rabatów

Następnie będziemy używać czterech produktów i samego rabatów. Wszystkie cztery produkty kwalifikują się do obu rabatów. Istnieje dwanaście możliwych kombinacji. W końcu, rabatów zostaną zastosowane do transakcji w jednym z trzech kombinacjach: dwie aplikacje rabatu 1, dwie aplikacje z rabatu 2 lub jednej aplikacji aplikacji rabatu 1 i jeden rabatu 2. Aby zilustrować możliwych kombinacji, zajmiemy się dwa różne zestawy czterech produktów, które mają różne ceny:

-   Wszystkie cztery produkty mają taką samą cenę, $15.00. W takim przypadku najlepszej kombinacji rabatu jest dwie aplikacje rabatu 1. Dwa produkty będą pełną cenę, a dwa wyłączy się 50 procent. Po rabacie Suma dla transakcji jest $45 (15 + 15 + 7,50 + 7.50), $15 (25 procent) jest wyłączone zdyskontowaną sumę $60. Rabat 2 jest tylko $12 (20 procent).
-   Dwa produkty są $20 każdego, jeden produkt jest $15 i jeden produkt jest $5. W takim przypadku najlepszej kombinacji rabatu jest jednym z zastosowań rabatu 2 oraz stosowanie rabatu 1. Następujące tabele ilustruje rabatów.

Do odczytu tabel, użyj jednego produktu z wiersza i jeden produkt z kolumny. Na przykład w tabeli Rabat 1, w przypadku łączenia dwóch produktów $20, wysiąść $10. W tabeli Rabat 2 w przypadku łączenia $15 produkt i produkt $5 wysiąść $4. [![Kumulacji rabatów kombi 03](./media/overlapping-discount-combo-03.jpg)](./media/overlapping-discount-combo-03.jpg) po pierwsze, możemy znaleźć największą rabatu, który jest dostępna z dwóch produktów przy użyciu albo rabatu. W dwóch tabelach przedstawiono kwotę rabatu dla wszystkich kombinacji tych dwóch produktów. Zacieniowanymi fragmentami tabel reprezentują albo przypadków, gdzie produkt jest powiązany z samym sobą, którego nie możemy lub odwrotnej kojarzenie dwóch produktów, które daje takie same kwota rabatu i można go zignorować. Patrząc na tabele, można zobaczyć, że rabat 1 dla dwóch elementów $20 jest największą rabatu, który jest dostępny albo rabatu dla wszystkich czterech produktów. (Ten rabat jest podświetlona w pierwszej tabeli.) To pozostawia tylko $15 produkt i produkt $5. Patrząc na dwie tabele ponownie, można zobaczyć, że dla tych dwóch produktów rabatu 1 daje rabat $2.50, podczas gdy rabatu 2 daje rabatu $4. W związku z tym firma Microsoft należy wybrać rabat 2. Rabat końcowy jest $14. Aby ułatwić wizualizacji tej dyskusji, Oto dwa dodatkowe tabele, które pokazują procentowy rabat dla wszystkich możliwych kombinacji dwóch produktu dla obu rabatu 1 i 2 rabatu. Tylko połowa listy kombinacji jest włączone, ponieważ dla tych rabatów, kolejność, w której te dwa produkty są wprowadzane do rabatu nie ma znaczenia. Najwyższy rabat skuteczne (25 procent) podświetlone jest na zielono, a najniższy rabat (10 procent) jest wyróżnione kolorem czerwonym. [![Kumulacji rabatów kombi 04](./media/overlapping-discount-combo-04.jpg)](./media/overlapping-discount-combo-04.jpg)**Uwaga:** gdy ceny różnią się, a dwa lub więcej rabatów konkurować, jedynym sposobem zagwarantowania najlepszej kombinacji rabatów jest do oceny zarówno rabatów i porównać je.

## <a name="total-possible-combinations"></a>Całkowita możliwych kombinacji
W tej sekcji nadal przykład z poprzedniej sekcji. Będziemy dodawać więcej produktów i innego rabatu i zobacz, jak wiele kombinacji musi być obliczana i porównywana. Poniższa tabela pokazuje liczbę możliwych kombinacjach rabatów wraz ze wzrostem ilości produktu. W tabeli przedstawiono, co się dzieje, zarówno gdy istnieją dwa nakładające się rabaty, jak w poprzednim przykładzie, i gdy istnieją trzy rabaty nakładających się. Wkrótce przekracza liczbę kombinacji możliwy rabat, które muszą zostać ocenione, co szybkiego komputera można obliczać i porównywać dość szybko do zaakceptowania dla transakcji detalicznych. [![Kumulacji rabatów kombi 05](./media/overlapping-discount-combo-05.jpg)](./media/overlapping-discount-combo-05.jpg) i nawet większe ilości lub więcej nakładających się rabaty są stosowane, całkowita liczba możliwych kombinacjach rabatów szybko przechodzi w milionach i czas, jaki niezbędny jest ocena i wybranie najlepszej kombinacji szybko staje się zauważalne. Niektóre optymalizacje zostały wykonane w aparacie ceny detalicznej do zmniejszenia łącznej liczby kombinacje, które muszą zostać ocenione. Ponieważ numer nakładających się rabaty i ilości w ramach transakcji nie są ograniczone, duża liczba kombinacji będzie zawsze jednak mają być poddane ocenie w każdym przypadku, gdy istnieją nakładające się rabatów. Ten problem jest problem, który dotyczy wartości krańcowe ranking metody.

## <a name="marginal-value-method"></a>Metoda obliczania wartości kredytu marginalnego
Aby rozwiązać problem lawinowo wzrastającej liczby kombinacje, które muszą zostać ocenione, optymalizacja istnieje, która oblicza wartość dla każdego udostępnionego produktu każdej zniżki na zestaw produktów, które mogą być stosowane dwa lub więcej rabatów do. My odnoszą się do tej wartości, jako **kredytu marginalnego wartość** rabat dla udostępnionych produktów. Marginalna wartość jest średnio na zwiększenie kwoty rabatu końcowego produktu udostępnionych produktów są uwzględnione w każdej wartości rabat. Wartość kredytu marginalnego jest obliczana przyjmując odjęciem kwoty rabatu bez udostępnionych produktów kwota rabatu (DTotal) (DMinus\\ Shared) i dzieląc tę różnicę przez liczbę produktów udostępnionych (ProductsShared). [![Kumulacji rabatów kombi 06](./media/overlapping-discount-combo-06.jpg)](./media/overlapping-discount-combo-06.jpg) po obliczeniu wartości krańcowe każdego Rabat wspólny zestaw produktów rabaty są stosowane do produktów udostępnionych w kolejności, w sposób wyczerpujący, od wartości kredytu marginalnego najwyższej do najniższej wartości kredytu marginalnego. W przypadku tej metody wszystkie pozostałe możliwości w zakresie rabatów nie są porównywane za każdym razem po pojedynczym wystąpieniem rabat jest stosowany. Zamiast nakładających się rabaty są porównywane jeden raz i następnie są stosowane w kolejności. Nie inne porównania są wykonywane. Można skonfigurować próg, aby przełączyć się do metody wartości kredytu marginalnego **rabatu** na karcie **handlu detalicznego parametry** strony. Dopuszczalnego czasu, aby obliczyć rabat końcowy różni się w poszczególnych branż sprzedaży. Jednakże tym razem ogólnie wypada w zakresie dziesiątek milisekund do jednej sekundy.


