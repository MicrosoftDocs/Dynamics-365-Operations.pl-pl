---
title: Zadanie czyszczenia wpisów dostępnych zapasów do zarządzania magazynem
description: W tym temacie opisano zadanie czyszczenia wpisów dostępnych zapasów, które ułatwia poprawę wydajności systemu przez identyfikowanie i usuwanie powiązanych z nimi rekordów.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: 9d01c577fc33564d3517d242e9b01f73cc8e079c
ms.sourcegitcommit: 827d77c638555396b32d36af5d22d1b61dafb0e8
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/16/2020
ms.locfileid: "4435608"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="237bc-103">Zadanie czyszczenia wpisów dostępnych zapasów do zarządzania magazynem</span><span class="sxs-lookup"><span data-stu-id="237bc-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="237bc-104">Na wydajność zapytań używanych do obliczania dostępnych zapasów ma wpływ liczba rekordów w zaangażowanych tabelach.</span><span class="sxs-lookup"><span data-stu-id="237bc-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="237bc-105">Jednym ze sposobów zwiększenia wydajności jest zmniejszenie liczby rekordów, które musi uwzględnić baza danych.</span><span class="sxs-lookup"><span data-stu-id="237bc-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="237bc-106">W tym temacie opisano zadanie czyszczenia wpisów dostępnych zapasów, które usuwa niepotrzebne rekordy z tabel InventSum i WHSInventReserve.</span><span class="sxs-lookup"><span data-stu-id="237bc-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="237bc-107">Te tabele służą do przechowywania informacji o dostępnych zapasach dla towarów, które są włączone dla przetwarzania zarządzania magazynem.</span><span class="sxs-lookup"><span data-stu-id="237bc-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="237bc-108">(Te elementy są określane mianem pozycji WHS.) Usunięcie tych rekordów może znacząco poprawić wydajność obliczeń dostępnych zapasów.</span><span class="sxs-lookup"><span data-stu-id="237bc-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="237bc-109">Co robi zadanie oczyszczania</span><span class="sxs-lookup"><span data-stu-id="237bc-109">What the cleanup job does</span></span>

<span data-ttu-id="237bc-110">Zadanie oczyszczania wpisów dostępnych zapasów usuwa wszystkie rekordy z tabel WHSInventReserve i InventSum, w których wszystkie wartości pól są równe *0* (zero).</span><span class="sxs-lookup"><span data-stu-id="237bc-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="237bc-111">Te rekordy można usunąć, ponieważ nie przyczyniły się do informacji o dostępnych zapasach.</span><span class="sxs-lookup"><span data-stu-id="237bc-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="237bc-112">Zadanie usuwa tylko rekordy znajdujące się poniżej poziomu **Lokalizacji**.</span><span class="sxs-lookup"><span data-stu-id="237bc-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="237bc-113">Jeśli jest dozwolone ujemne zapasy fizyczne, zadanie oczyszczania może nie być w stanie usunąć wszystkich odpowiednich wpisów.</span><span class="sxs-lookup"><span data-stu-id="237bc-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="237bc-114">Powodem tego ograniczenia jest to, że zadanie musi pozwalać na specjalny scenariusz, w którym numer identyfikacyjny ma wiele numerów seryjnych, a jeden z tych numerów seryjnych staje się ujemny.</span><span class="sxs-lookup"><span data-stu-id="237bc-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="237bc-115">Na przykład system będzie miał wartość zero na poziomie numeru identyfikacyjnego, gdy numer seryjny jest przypisany do + 1 komputerów PC o numerze seryjnym 1 i -1 sztuk o numerze fabrycznym 2.</span><span class="sxs-lookup"><span data-stu-id="237bc-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="237bc-116">W przypadku tego specjalnego scenariusza zadanie wykonuje w pierwszej kolejności usunięcie o szerokości, z którego najpierw będzie próbował usunąć dane z niższych poziomów.</span><span class="sxs-lookup"><span data-stu-id="237bc-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="237bc-117">Planowanie i Konfigurowanie zadania oczyszczania</span><span class="sxs-lookup"><span data-stu-id="237bc-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="237bc-118">Zadanie czyszczenia wpisów dostępnych zapasów jest dostępne w **Zarządzanie zapasami \> Zadania okresowe \> Wyczyść \> Oczyszczenie wpisów dostępnych zapasów do zarządzania magazynem**.</span><span class="sxs-lookup"><span data-stu-id="237bc-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="237bc-119">Standardowe ustawienia zadania służą do sterowania zakresem i harmonogramem uruchamiania zadania.</span><span class="sxs-lookup"><span data-stu-id="237bc-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="237bc-120">Ponadto zaoferowano następujące ustawienia:</span><span class="sxs-lookup"><span data-stu-id="237bc-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="237bc-121">**Usuń, jeśli nie zaktualizowano przez tę liczbę dni** — wprowadź minimalną liczbę dni oczekiwania zadania przed usunięciem wpisu zapasów, który został porzucony do zerowej ilości.</span><span class="sxs-lookup"><span data-stu-id="237bc-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="237bc-122">To ustawienie umożliwia zredukowanie ryzyka usuwania nieużywanych wpisów dostępnych zapasów.</span><span class="sxs-lookup"><span data-stu-id="237bc-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="237bc-123">Jeśli chcesz, aby Oczyszczanie było wykonywane jak najszybciej, wprowadź *0* (zero) lub pozostaw to pole puste.</span><span class="sxs-lookup"><span data-stu-id="237bc-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="237bc-124">**Maksymalny czas wykonywania (godziny)** — umożliwia wprowadzenie maksymalnego czasu wykonywania zadania oczyszczania (w godzinach).</span><span class="sxs-lookup"><span data-stu-id="237bc-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="237bc-125">Jeśli zadanie nie zostanie ukończone przed upływem tego czasu, zapisze pracę, którą wykonał do tej pory, a następnie się zamknie.</span><span class="sxs-lookup"><span data-stu-id="237bc-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="237bc-126">Ta możliwość jest szczególnie przydatna w przypadku implementacji z dużym użyciem zapasów.</span><span class="sxs-lookup"><span data-stu-id="237bc-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="237bc-127">W takich przypadkach należy zaplanować zadanie, aby było uruchamiane w godzinach, gdy obciążenie systemu jest możliwie jak najbardziej jasne.</span><span class="sxs-lookup"><span data-stu-id="237bc-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="237bc-128">Jeśli zadanie wsadowe ma kontynuować działanie, dopóki nie zostanie zakończone, należy wprowadzić wartość *0* (zero) lub pozostawić to pole puste.</span><span class="sxs-lookup"><span data-stu-id="237bc-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="237bc-129">To ustawienie jest dostępne tylko wtedy, gdy funkcja pokrewna została [włączona w systemie](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="237bc-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="237bc-130">Chociaż można uruchamiać zadanie w zwykłych godzinach pracy, zaleca się, aby był on uruchamiany poza godzinami pracy.</span><span class="sxs-lookup"><span data-stu-id="237bc-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="237bc-131">Dzięki temu można zapobiec konfliktom, które mogą wystąpić, jeśli użytkownik pracuje z rekordem, który jest również czyszczony.</span><span class="sxs-lookup"><span data-stu-id="237bc-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="237bc-132">Jeśli zadanie próbuje usunąć rekord dla towaru, gdy ten rekord jest używany przez innego użytkownika, wystąpi błąd zakleszczenia dla zadania oczyszczania lub użytkownika.</span><span class="sxs-lookup"><span data-stu-id="237bc-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="237bc-133">Po uruchomieniu zadania ma on przydzielony rozmiar 100.</span><span class="sxs-lookup"><span data-stu-id="237bc-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="237bc-134">Innymi słowy podejmie próbę jednokrotnej rezerwacji każdego z 100.</span><span class="sxs-lookup"><span data-stu-id="237bc-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="237bc-135">Ponieważ jednak niektóre operacje usuwania są ustawione na podstawie ustawionych, mogą wystąpić scenariusze, w których w tej samej transakcji można usunąć tylko rekordy większe niż 100.</span><span class="sxs-lookup"><span data-stu-id="237bc-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="237bc-136">Dlatego eskalacja blokad może czasami wystąpić.</span><span class="sxs-lookup"><span data-stu-id="237bc-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="237bc-137">Możliwy wpływ użytkownika</span><span class="sxs-lookup"><span data-stu-id="237bc-137">Possible user impact</span></span>

<span data-ttu-id="237bc-138">Użytkownicy mogą mieć wpływ na to, jeśli zadanie oczyszczania wpisów dostępnych zapasów usunie wszystkie rekordy dla danego poziomu (np. na poziomie numeru identyfikacyjnego).</span><span class="sxs-lookup"><span data-stu-id="237bc-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="237bc-139">W takim przypadku funkcja umożliwiająca wyświetlanie zapasów, które były wcześniej dostępne na numerze identyfikacyjnym, może nie działać zgodnie z oczekiwaniami, ponieważ odpowiednie wpisy stanu zapasów nie są już dostępne.</span><span class="sxs-lookup"><span data-stu-id="237bc-139">In this case, the functionality for seeing that inventory was previously available on hand at a license plate might not work as expected, because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="237bc-140">(Funkcja ta sprawdza warunek **Ilość \<\> 0** w ustawieniach **Wyświetlania wymiarów**, gdy użytkownicy wyświetlają informacje o dostępnych zapasach.) Jednak wzrost wydajności, jaki zapewnia zadanie oczyszczania, powinien być uwzględniony w tej niewielkiej utracie funkcjonalności.</span><span class="sxs-lookup"><span data-stu-id="237bc-140">(That functionality checks the condition **Quantity \<\> 0** in the **Dimension display** settings when users view on-hand information.) However, the performance improvement that the cleanup job provides should make up for this small loss in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="237bc-141">Umożliwia ustawienie maksymalnego czasu wykonywania</span><span class="sxs-lookup"><span data-stu-id="237bc-141">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="237bc-142">Domyślnie ustawienie **Maksymalny czas wykonania** jest niedostępne.</span><span class="sxs-lookup"><span data-stu-id="237bc-142">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="237bc-143">Aby go użyć, należy użyć [zarządzania funkcjami](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) w celu włączenia pokrewnej funkcji w systemie.</span><span class="sxs-lookup"><span data-stu-id="237bc-143">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="237bc-144">W obszarze roboczym **Zarządzanie funkcjami** ta funkcja widnieje jako:</span><span class="sxs-lookup"><span data-stu-id="237bc-144">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="237bc-145">**Moduł:** *Zarządzanie magazynem*</span><span class="sxs-lookup"><span data-stu-id="237bc-145">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="237bc-146">**Nazwa funkcji:** *Maksymalny czas wykonywania zadania oczyszczania dla wpisów dostępnych zapasów w magazynie*</span><span class="sxs-lookup"><span data-stu-id="237bc-146">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>
