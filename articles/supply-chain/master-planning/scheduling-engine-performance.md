---
title: Poprawa wydajności aparatu planowania
description: Ten temat zawiera informacje o aparacie planowania oraz o sposobach zwiększania wydajności.
author: ChristianRytt
manager: tfehr
ms.date: 09/03/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: 19311
ms.assetid: 5ffb1486-2e08-4cdc-bd34-b47ae795ef0f
ms.search.region: Global
ms.search.industry: ''
ms.author: kamaybac
ms.search.validFrom: 2020-09-03
ms.dyn365.ops.version: ''
ms.openlocfilehash: 1c1b940754021956998fe27ba16020d4b16aedf1
ms.sourcegitcommit: 49f3011b8a6d8cdd038e153d8cb3cf773be25ae4
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/16/2020
ms.locfileid: "4015074"
---
# <a name="improve-scheduling-engine-performance"></a><span data-ttu-id="228ef-103">Poprawa wydajności aparatu planowania</span><span class="sxs-lookup"><span data-stu-id="228ef-103">Improve scheduling engine performance</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="228ef-104">Aparat planowania zasobów jest używany podczas planowania marszrut dla planowanych i zwolnionych zleceń produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-104">The resource scheduling engine is used when scheduling routes for planned and released production orders.</span></span> <span data-ttu-id="228ef-105">Aparat został pierwotnie wydany w ramach systemu Dynamics AX 2012, a od tego momentu wprowadzono kilka udoskonaleń.</span><span class="sxs-lookup"><span data-stu-id="228ef-105">The engine was originally released as part of Dynamics AX 2012 and has gone through several improvements since its release.</span></span>

<span data-ttu-id="228ef-106">[Problem z planowaniem pracy w module produkcyjnym](https://en.wikipedia.org/wiki/Job_shop_scheduling) jest niezwykle skomplikowanym problemem kombinatorycznym, w którym czas rozwiązania wzrasta w sposób wykładniczy wraz z liczbą zmiennych decyzji.</span><span class="sxs-lookup"><span data-stu-id="228ef-106">The [job shop scheduling problem](https://en.wikipedia.org/wiki/Job_shop_scheduling) is an extremely complex combinatorial problem where solution time grows exponentially with the number of decision variables.</span></span> <span data-ttu-id="228ef-107">Często odbiorcy konfigurują marszruty produkcji i powiązane dane w sposób, który powoduje problem z planowaniem, którego nie można rozwiązać w rozsądnym czasie, nawet w przypadku najbardziej nowoczesnego sprzętu.</span><span class="sxs-lookup"><span data-stu-id="228ef-107">Oftentimes, customers set up production routes and related data in a way that results in a scheduling problem that can't be solved in reasonable time even on the most modern hardware.</span></span> <span data-ttu-id="228ef-108">Ten temat ułatwi zrozumienie aparatu planowania oraz sposobu, w jaki określone ustawienia mogą mieć wpływ na wydajność.</span><span class="sxs-lookup"><span data-stu-id="228ef-108">This topic will help you understand the scheduling engine and how a specific setup can have influence on the performance.</span></span>

<span data-ttu-id="228ef-109">Jeśli chodzi o poprawę wydajności planowania, ogólne wskazówki zalecają zmniejszenie złożoności problemu, który musi zostać rozwiązany przez aparat.</span><span class="sxs-lookup"><span data-stu-id="228ef-109">When it comes to improving the performance of the scheduling, general guidelines recommend reducing the complexity of the problem the engine needs to solve.</span></span> <span data-ttu-id="228ef-110">Poniżej przedstawiono niektóre z głównych czynników, które mogą mieć wpływ na wydajność:</span><span class="sxs-lookup"><span data-stu-id="228ef-110">Some of the main factors that can affect performance include:</span></span>

- <span data-ttu-id="228ef-111">Marszruty z wieloma operacjami</span><span class="sxs-lookup"><span data-stu-id="228ef-111">Routes with many operations</span></span>
- <span data-ttu-id="228ef-112">Marszruty z równoległymi operacjami</span><span class="sxs-lookup"><span data-stu-id="228ef-112">Routes with parallel operations</span></span>
- <span data-ttu-id="228ef-113">Operacje zawierające więcej niż jeden zasób</span><span class="sxs-lookup"><span data-stu-id="228ef-113">Operations with quantity of resources higher than one</span></span>
- <span data-ttu-id="228ef-114">Operacje z wieloma odpowiednimi zasobami</span><span class="sxs-lookup"><span data-stu-id="228ef-114">Operations with many applicable resources</span></span>
- <span data-ttu-id="228ef-115">Używanie łączy stałych</span><span class="sxs-lookup"><span data-stu-id="228ef-115">Use of hard links</span></span>
- <span data-ttu-id="228ef-116">Używanie ograniczonych zdolności produkcyjnych</span><span class="sxs-lookup"><span data-stu-id="228ef-116">Use of finite capacity</span></span>
- <span data-ttu-id="228ef-117">Liczba różnych używanych kalendarzy</span><span class="sxs-lookup"><span data-stu-id="228ef-117">The number of different calendars used</span></span>
- <span data-ttu-id="228ef-118">Liczba przedziałów czasu pracy dziennie w kalendarzu</span><span class="sxs-lookup"><span data-stu-id="228ef-118">The number of working time slots per day in the calendar</span></span>
- <span data-ttu-id="228ef-119">Łączny czas trwania marszruty</span><span class="sxs-lookup"><span data-stu-id="228ef-119">Total duration of the route</span></span>
- <span data-ttu-id="228ef-120">Uruchamianie wielu aparatów planowania równolegle</span><span class="sxs-lookup"><span data-stu-id="228ef-120">Running multiple scheduling engines in parallel</span></span>

## <a name="overview-of-basic-scheduling-flow"></a><span data-ttu-id="228ef-121">Przegląd podstawowego przepływu planowania</span><span class="sxs-lookup"><span data-stu-id="228ef-121">Overview of basic scheduling flow</span></span>

<span data-ttu-id="228ef-122">Aby zrozumieć, w jaki sposób dana konfiguracja może mieć wpływ na wydajność, ważne jest zrozumienie, w jaki sposób przebiega proces przepływu, zarówno wewnątrz aparatu, jak i w otaczającym go kodzie X++.</span><span class="sxs-lookup"><span data-stu-id="228ef-122">To understand how a given setup can affect performance, it is important to understand something about how the process flows, both inside the engine and in the X++ code that surrounds it.</span></span>

<span data-ttu-id="228ef-123">Podstawowy proces planowania zamówienia składa się z trzech głównych kroków:</span><span class="sxs-lookup"><span data-stu-id="228ef-123">The basic process of scheduling an order consists of three main steps:</span></span>

- <span data-ttu-id="228ef-124">**Ładowanie danych** — w tym miejscu modele danych X++ są przekształcane w wewnętrzny model danych aparatu w postaci zadań i ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="228ef-124">**Loading data** – Here, the X++ data models are transformed into the engine's internal data model in the form of jobs and constraints.</span></span>
- <span data-ttu-id="228ef-125">**Planowanie** — jest to główne źródło planowania, które przetwarza dany model i ograniczenia, a następnie generuje wynik.</span><span class="sxs-lookup"><span data-stu-id="228ef-125">**Scheduling** – This is the main source for scheduling that processes the given model and constraints, and generates a result.</span></span> <span data-ttu-id="228ef-126">W trakcie tego procesu aparat będzie żądał informacji o czasie pracy i istniejących rezerwacjach zdolności produkcyjnych z X++, jeśli jest to konieczne.</span><span class="sxs-lookup"><span data-stu-id="228ef-126">During this process, the engine will request working time information and existing capacity reservations from X++ as needed.</span></span>
- <span data-ttu-id="228ef-127">**Zapisywanie danych** — wynik aparatu w postaci gniazd rezerwacji zdolności produkcyjnych jest przetwarzany przez kodu X++ w celu zapisania rezerwacji zdolności produkcyjnych i zaktualizowania godzin rozpoczęcia i zakończenia zadań/operacji/zlecenia.</span><span class="sxs-lookup"><span data-stu-id="228ef-127">**Save data** – The engine result in the form of job capacity reservation slots is processed by X++ code to save capacity reservations and update the start and end times of the jobs/operation/order.</span></span>

## <a name="load-data-into-the-engine"></a><span data-ttu-id="228ef-128">Ładowanie danych do aparatu</span><span class="sxs-lookup"><span data-stu-id="228ef-128">Load data into the engine</span></span>

<span data-ttu-id="228ef-129">Aparat planowania ma bardziej abstrakcyjny model danych niż baza danych Supply Chain Management, ponieważ został on zbudowany jako aparat ogólny, który może obsługiwać różne źródła danych.</span><span class="sxs-lookup"><span data-stu-id="228ef-129">The scheduling engine has a more abstract data model than the Supply Chain Management database because it has been built as a generic engine that can handle different sources of data.</span></span> <span data-ttu-id="228ef-130">Pojęcia dotyczące marszruty, operacji dodatkowych i czasu działania muszą zostać „przetłumaczone” na zadanie ogólne i model ograniczeń, które udostępnia dany aparat.</span><span class="sxs-lookup"><span data-stu-id="228ef-130">The concepts of route, secondary operations, and run time need to be "translated" into the generic job and constraint model that the engine exposes.</span></span> <span data-ttu-id="228ef-131">Logika tworzenia modelu ma istotną część logiki biznesowej i jest różna w zależności od danych źródłowych.</span><span class="sxs-lookup"><span data-stu-id="228ef-131">The logic for building the model has a significant amount of business logic to it and is different depending on the source data.</span></span> <span data-ttu-id="228ef-132">Odpowiedzialna klasa X++ to `WrkCtrScheduler` i ma klasy pochodne dla planowanych zleceń produkcyjnych, zwolnionych zleceń produkcyjnych i prognoz projektów.</span><span class="sxs-lookup"><span data-stu-id="228ef-132">The responsible X++ class is `WrkCtrScheduler` and it has derived classes for planned production orders, released production orders, and project forecasts.</span></span>

<span data-ttu-id="228ef-133">Rozważmy na przykład trasę podaną w poniższej tabeli i obrazie, która wygląda stosunkowo prosto.</span><span class="sxs-lookup"><span data-stu-id="228ef-133">As an example, consider a route shown in the following table and image, which seems relatively simple.</span></span>

| <span data-ttu-id="228ef-134">Nr</span><span class="sxs-lookup"><span data-stu-id="228ef-134">Oper.</span></span> <span data-ttu-id="228ef-135">Nr</span><span class="sxs-lookup"><span data-stu-id="228ef-135">No.</span></span> | <span data-ttu-id="228ef-136">Priorytet</span><span class="sxs-lookup"><span data-stu-id="228ef-136">Priority</span></span> | <span data-ttu-id="228ef-137">Czas przezbrajania</span><span class="sxs-lookup"><span data-stu-id="228ef-137">Setup time</span></span> | <span data-ttu-id="228ef-138">Czas procesu</span><span class="sxs-lookup"><span data-stu-id="228ef-138">Run time</span></span> | <span data-ttu-id="228ef-139">Czas oczekiwania po</span><span class="sxs-lookup"><span data-stu-id="228ef-139">Queue time after</span></span> | <span data-ttu-id="228ef-140">Ilość zasobów</span><span class="sxs-lookup"><span data-stu-id="228ef-140">Quantity of resources</span></span> | <span data-ttu-id="228ef-141">Następny</span><span class="sxs-lookup"><span data-stu-id="228ef-141">Next</span></span> |
| --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="228ef-142">10</span><span class="sxs-lookup"><span data-stu-id="228ef-142">10</span></span> | <span data-ttu-id="228ef-143">Główne</span><span class="sxs-lookup"><span data-stu-id="228ef-143">Primary</span></span> | <span data-ttu-id="228ef-144">1.00</span><span class="sxs-lookup"><span data-stu-id="228ef-144">1.00</span></span> | <span data-ttu-id="228ef-145">2.00</span><span class="sxs-lookup"><span data-stu-id="228ef-145">2.00</span></span> | | <span data-ttu-id="228ef-146">1</span><span class="sxs-lookup"><span data-stu-id="228ef-146">1</span></span> | <span data-ttu-id="228ef-147">20</span><span class="sxs-lookup"><span data-stu-id="228ef-147">20</span></span> |
| <span data-ttu-id="228ef-148">10</span><span class="sxs-lookup"><span data-stu-id="228ef-148">10</span></span> | <span data-ttu-id="228ef-149">Podrzędna&nbsp;1</span><span class="sxs-lookup"><span data-stu-id="228ef-149">Secondary&nbsp;1</span></span> | | | | <span data-ttu-id="228ef-150">1</span><span class="sxs-lookup"><span data-stu-id="228ef-150">1</span></span> | <span data-ttu-id="228ef-151">20</span><span class="sxs-lookup"><span data-stu-id="228ef-151">20</span></span> |
| <span data-ttu-id="228ef-152">20</span><span class="sxs-lookup"><span data-stu-id="228ef-152">20</span></span> | <span data-ttu-id="228ef-153">Główne</span><span class="sxs-lookup"><span data-stu-id="228ef-153">Primary</span></span> | | <span data-ttu-id="228ef-154">3.00</span><span class="sxs-lookup"><span data-stu-id="228ef-154">3.00</span></span> | <span data-ttu-id="228ef-155">1.00</span><span class="sxs-lookup"><span data-stu-id="228ef-155">1.00</span></span> | <span data-ttu-id="228ef-156">3</span><span class="sxs-lookup"><span data-stu-id="228ef-156">3</span></span> | <span data-ttu-id="228ef-157">0</span><span class="sxs-lookup"><span data-stu-id="228ef-157">0</span></span> |

<span data-ttu-id="228ef-158">![Przykładowy diagram marszruty](media/scheduling-engine-route.png "Przykładowy diagram marszruty")</span><span class="sxs-lookup"><span data-stu-id="228ef-158">![Example rout diagram](media/scheduling-engine-route.png "Example rout diagram")</span></span>

<span data-ttu-id="228ef-159">Po wysłaniu tego obrazu do aparatu jest on dzielony na osiem zadań, tak jak to pokazano na poniższej ilustracji (należy wybrać obraz, aby go powiększyć).</span><span class="sxs-lookup"><span data-stu-id="228ef-159">When sending this to the engine, it is split out into eight jobs, as shown in the following illustration (select the image to enlarge it).</span></span>

<span data-ttu-id="228ef-160">[![Planowanie zadań aparatu](media/scheduling-engine-jobs.png "Zadania aparatu planowania")](media/scheduling-engine-jobs-large.png)</span><span class="sxs-lookup"><span data-stu-id="228ef-160">[![Scheduling engine jobs](media/scheduling-engine-jobs.png "Scheduling engine jobs")](media/scheduling-engine-jobs-large.png)</span></span>

<span data-ttu-id="228ef-161">Standardowe łącze między dwoma zadaniami to `FinishStart` oznaczające, że godzina zakończenia jednego zadania musi być wcześniejsza niż godzina rozpoczęcia innego zadania.</span><span class="sxs-lookup"><span data-stu-id="228ef-161">The standard link between two jobs is `FinishStart`, meaning that the end time of one job must be before the start time of another job.</span></span> <span data-ttu-id="228ef-162">Ponieważ konfiguracja musi zostać wykonana przez ten sam zasób, który będzie później wykonywać proces, istnieją między nimi ograniczenia `OnSameResource`.</span><span class="sxs-lookup"><span data-stu-id="228ef-162">Because the setup must be performed by the same resource that will later do the process, there are `OnSameResource` constraints between them.</span></span> <span data-ttu-id="228ef-163">Między zadaniami podstawowymi i drugorzędnymi dla 10, istnieją łącza `StartStart` i `FinishFinish`, co oznacza, że zadania jednocześnie muszą się rozpoczynać i kończyć w tym samym czasie, i istnieją ograniczenia `NotOnSameResource`, które uniemożliwiają zastosowanie tego samego zasobu jako podstawowego i pomocniczego.</span><span class="sxs-lookup"><span data-stu-id="228ef-163">Between the jobs for primary and secondary operation for 10, there are `StartStart` and `FinishFinish` links, which means that the jobs must both start and end at the same time, and there are `NotOnSameResource` constraints, which will prevent the same resource for primary and secondary.</span></span>

<span data-ttu-id="228ef-164">W przypadku operacji 20, gdzie ilość zasobów została ustawiona na 3, zadanie procesu zostało podzielone na trzy odrębne zadania, w których wszystkie zadania muszą być wykonywane dokładnie w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="228ef-164">For operation 20, where the quantity of resources has been set to 3, the process job has been split into three distinct jobs where all the jobs must run at the exact same time.</span></span>
<span data-ttu-id="228ef-165">W takim przypadku grupa marszruty została skonfigurowana tak, aby nie rezerwowała zdolności produkcyjnych dla kolejki po godzinach, dlatego że kolejka ma tylko jedno zadanie.</span><span class="sxs-lookup"><span data-stu-id="228ef-165">In this case, the route group has been set up to not reserve capacity for queue after times, which is why there is only a single job for the queue after.</span></span>

<span data-ttu-id="228ef-166">Aparat planowania rozumie tylko pojęcia dotyczące zadań i nie ma informacji o operacjach.</span><span class="sxs-lookup"><span data-stu-id="228ef-166">The scheduling engine only understands the concepts of jobs and has no notion of operations.</span></span> <span data-ttu-id="228ef-167">Oznacza to, że podczas planowania operacje są także dzielone na zadania, mimo że nie zostaną utrwalone w bazie danych.</span><span class="sxs-lookup"><span data-stu-id="228ef-167">This means that when doing operation scheduling, the operations are also split into jobs, although these will not be persisted in the database.</span></span>

<span data-ttu-id="228ef-168">Dla każdego zadania zdefiniujemy także wymagania dotyczące zdolności produkcyjnych zadania (wymaganą liczbę sekund).</span><span class="sxs-lookup"><span data-stu-id="228ef-168">For each job, we will also define what the job capacity requirement is (the number of seconds required).</span></span> <span data-ttu-id="228ef-169">W zależności od sposobu zdefiniowania wymagań dotyczących zasobów możemy również wysłać do każdego zadania listę wszystkich potencjalnych zasobów, na których to zadanie może być uruchomione, oraz zapotrzebowanie na zdolności produkcyjne dla określonego zasobu.</span><span class="sxs-lookup"><span data-stu-id="228ef-169">Depending on how the resource requirements have been defined, we may also, for each job, send a list of all the potential applicable resources that the job could run on and what the capacity requirement is for that specific resource.</span></span> <span data-ttu-id="228ef-170">Mimo że podczas konstruowania modelu jest wysyłana lista odpowiednich zasobów, aparat nadal musi sprawdzić, czy przypisanie zasobu jest prawidłowe dla całego czasu trwania zadania.</span><span class="sxs-lookup"><span data-stu-id="228ef-170">Even though the list of applicable resources is sent when building the model, the engine will still need to ensure that the resource assignment is actually valid for the entire job duration.</span></span>

## <a name="scheduling-engine-internals"></a><span data-ttu-id="228ef-171">Elementy wewnętrzne aparatu planowania</span><span class="sxs-lookup"><span data-stu-id="228ef-171">Scheduling engine internals</span></span>

### <a name="scheduling-engine-interface"></a><span data-ttu-id="228ef-172">Interfejs aparatu planowania</span><span class="sxs-lookup"><span data-stu-id="228ef-172">Scheduling engine interface</span></span>

<span data-ttu-id="228ef-173">Aby zrozumieć, w jaki sposób aparat działa wewnętrznie, najlepiej jest przeanalizować zewnętrzne funkcje.</span><span class="sxs-lookup"><span data-stu-id="228ef-173">To get an idea of how the engine works internally, it is best to look at the functionality it exposes externally.</span></span> <span data-ttu-id="228ef-174">W kodzie X++ głównym interfejsem jest `WrkCtrSchedulerEngineInterface`.</span><span class="sxs-lookup"><span data-stu-id="228ef-174">In X++, the main interface is `WrkCtrSchedulerEngineInterface`.</span></span> <span data-ttu-id="228ef-175">Zawiera metody opisane w poniższych podsekcjach.</span><span class="sxs-lookup"><span data-stu-id="228ef-175">It has the methods described in the following subsections.</span></span>

#### <a name="general-engine"></a><span data-ttu-id="228ef-176">Aparat ogólny</span><span class="sxs-lookup"><span data-stu-id="228ef-176">General engine</span></span>

| <span data-ttu-id="228ef-177">**Metoda**</span><span class="sxs-lookup"><span data-stu-id="228ef-177">**Method**</span></span> | <span data-ttu-id="228ef-178">**Cel**</span><span class="sxs-lookup"><span data-stu-id="228ef-178">**Purpose**</span></span> |
| --- | --- |
| `run` | <span data-ttu-id="228ef-179">Planuje wszystkie załadowane zadania i zwraca kod błędu.</span><span class="sxs-lookup"><span data-stu-id="228ef-179">Schedules all loaded jobs and returns the error code.</span></span> |
| `getJobSchedulingSequenceResult` | <span data-ttu-id="228ef-180">Pobiera wynik planowania i pierwsze zadanie błędu dla sekwencji oznaczonej określonym zadaniem.</span><span class="sxs-lookup"><span data-stu-id="228ef-180">Gets the scheduling result and the first error job for the sequence identified by a specific job.</span></span> |
| `validateJobCapacityReservations` | <span data-ttu-id="228ef-181">Sprawdza poprawność rezerwacji zdolności produkcyjnych dla wszystkich zadań przechowywanych przez aparat.</span><span class="sxs-lookup"><span data-stu-id="228ef-181">Validates the capacity reservations for all the jobs stored by the engine.</span></span> |
| `setReservationsTimeStamp` | <span data-ttu-id="228ef-182">Wysyła sygnaturę czasową do aparatu ustawionego we wszystkich nowych rezerwacjach zdolności produkcyjnych dla zaplanowanych zadań w pamięci podręcznej aparatu.</span><span class="sxs-lookup"><span data-stu-id="228ef-182">Sends a timestamp to the engine set on all new capacity reservations for the scheduled jobs in the cache of the engine.</span></span> |
| `addPropertyToGroupAggregation` | <span data-ttu-id="228ef-183">Dodaje prefiks właściwości do zbioru właściwości używanego podczas agregowania zdolności produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-183">Adds a property prefix to the set of properties used when capacity is aggregated.</span></span> |
| `addResource` | <span data-ttu-id="228ef-184">Dodaje zasób do puli zasobów aparatu planowania.</span><span class="sxs-lookup"><span data-stu-id="228ef-184">Adds a resource to the scheduling engine resource pool.</span></span> |
| `addResourceGroup` | <span data-ttu-id="228ef-185">Dodaje grupę zasobów do puli grup zasobów aparatu planowania.</span><span class="sxs-lookup"><span data-stu-id="228ef-185">Adds a resource group to the scheduling engine resource group pool.</span></span> |
| `addResourceGroupMembership` | <span data-ttu-id="228ef-186">Dodaje zasób jako element do grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="228ef-186">Adds a resource as a member to a resource group.</span></span> |
| `addOptimizationGoal` | <span data-ttu-id="228ef-187">Dodaje cel optymalizacji planowania (czas trwania lub priorytet).</span><span class="sxs-lookup"><span data-stu-id="228ef-187">Adds a scheduling optimization goal (duration or priority).</span></span> |

#### <a name="individual-jobs"></a><span data-ttu-id="228ef-188">Poszczególne zadania</span><span class="sxs-lookup"><span data-stu-id="228ef-188">Individual jobs</span></span>

| <span data-ttu-id="228ef-189">**Metoda**</span><span class="sxs-lookup"><span data-stu-id="228ef-189">**Method**</span></span> | <span data-ttu-id="228ef-190">**Cel**</span><span class="sxs-lookup"><span data-stu-id="228ef-190">**Purpose**</span></span> |
| --- | --- |
| `addJobInfo` | <span data-ttu-id="228ef-191">Dodaje rekord informacji o zadaniu, który informuje aparat o zaplanowanym zadaniu.</span><span class="sxs-lookup"><span data-stu-id="228ef-191">Adds a job information record that informs the engine about a job that should be scheduled.</span></span> |
| `addConstraintJobEndsAt` | <span data-ttu-id="228ef-192">Dodaje ograniczenie, które zadanie ma zakończyć w określonym dniu i o określonej godzinie.</span><span class="sxs-lookup"><span data-stu-id="228ef-192">Adds a constraint that a job should end at a specified date and time.</span></span> |
| `addConstraintJobStartsAt` | <span data-ttu-id="228ef-193">Dodaje ograniczenie, które zadanie ma rozpocząć w określonym dniu i o określonej godzinie.</span><span class="sxs-lookup"><span data-stu-id="228ef-193">Adds a constraint that a job should start at a specified date and time.</span></span> |
| `addConstraintMaxJobDays` | <span data-ttu-id="228ef-194">Definiuje ograniczenie, które może obejmować zadanie w okresie dłuższym niż maksymalna liczba dni.</span><span class="sxs-lookup"><span data-stu-id="228ef-194">Defines the constraint that a job can span over a specified maximal number of days.</span></span> |
| `addConstraintResourceRequirement` | <span data-ttu-id="228ef-195">Umożliwia dodanie ograniczenia, które określa, że zadanie musi zostać zaplanowane w określonym zasobie.</span><span class="sxs-lookup"><span data-stu-id="228ef-195">Adds the constraint that the job must be scheduled on a specific resource.</span></span> |
| `addJobBindPriority` | <span data-ttu-id="228ef-196">Dodaje priorytet powiązania zadania dla pary (zadanie, poziom ograniczeń).</span><span class="sxs-lookup"><span data-stu-id="228ef-196">Adds a job bind priority for a (job, constraint level) pair.</span></span> <span data-ttu-id="228ef-197">Wyższa wartość priorytetu oznacza, że zmienne zadania zostaną powiązane wcześniej.</span><span class="sxs-lookup"><span data-stu-id="228ef-197">A higher priority value means the job variables will be bound earlier.</span></span> <span data-ttu-id="228ef-198">Zadanie będzie przetwarzane przed zadaniami o niższej wartości priorytetu w tej samej kolejności.</span><span class="sxs-lookup"><span data-stu-id="228ef-198">The job will be processed before jobs with lower priority value in the same sequence.</span></span> |
| `addJobCapacity` | <span data-ttu-id="228ef-199">Umożliwia dodanie informacji o ładowaniu zdolności produkcyjnych dla zadania (np. wymagane środowisko uruchomieniowe zadania) niezależnie od zasobu, na którym jest uruchamiane zadanie.</span><span class="sxs-lookup"><span data-stu-id="228ef-199">Adds capacity load information for a job (like the required job runtime) independent on which resource the job runs on.</span></span> |
| `addJobResourceCapacity` | <span data-ttu-id="228ef-200">Dodaje zasób do zbioru zasobów, które mogą być używane do wykonywania zadania i określa zdolności produkcyjne wymagane podczas uruchamiania w tym zasobie.</span><span class="sxs-lookup"><span data-stu-id="228ef-200">Adds a resource to the set of resources that may be used to perform a job, and states the capacity required when running on that resource.</span></span> |
| `addJobGoal` | <span data-ttu-id="228ef-201">Dodaje informacje dotyczące celu zadania dla określonego poziomu ograniczenia (najwcześniejsza godzina zakończenia lub najpóźniejsza godzina rozpoczęcia).</span><span class="sxs-lookup"><span data-stu-id="228ef-201">Adds job goal information for a specific constraint level (earliest end time or latest start time).</span></span> |
| `addJobResourcePriority` | <span data-ttu-id="228ef-202">Dodaje priorytet, który ma być używany, gdy zadanie jest zaplanowane dla zasobu.</span><span class="sxs-lookup"><span data-stu-id="228ef-202">Adds the priority to use when a job is scheduled on a resource.</span></span> |
| `addJobResourceRuntime` | <span data-ttu-id="228ef-203">Określa czas zadania zależny od zasobu, w którym zadanie zostanie zaplanowane.</span><span class="sxs-lookup"><span data-stu-id="228ef-203">Specifies a job time that is dependent of the resource the job will be scheduled on.</span></span> |
| `addJobRuntime` | <span data-ttu-id="228ef-204">Określa czas zadania niezależny od zasobu, w którym zadanie zostanie zaplanowane.</span><span class="sxs-lookup"><span data-stu-id="228ef-204">Specifies a job time that is independent of the resource on which the job will be scheduled.</span></span> |
| `scheduleJobOnResourceGroup` | <span data-ttu-id="228ef-205">Umożliwia oznaczenie zadania planowania na poziomie grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="228ef-205">Marks a job for scheduling on the resource group level.</span></span> |
| `setJobResourcePreemptionAllowed` | <span data-ttu-id="228ef-206">Określa, czy dla zadania w zasobie jest dozwolone wywłaszczenie (Jeśli aparat może zaplanować zadanie w nieciągłych gniazdach wydajności).</span><span class="sxs-lookup"><span data-stu-id="228ef-206">Sets whether preemption is allowed for a job on a resource (if engine is allowed to schedule the job in noncontiguous capacity slots).</span></span> |
| `setRequiredNumberOfResources` | <span data-ttu-id="228ef-207">Umożliwia ustawienie liczby zasobów wymaganych do zaplanowania zadania (tylko w przypadku planowania operacji).</span><span class="sxs-lookup"><span data-stu-id="228ef-207">Sets the number of resources required to schedule a job (only for operations scheduling).</span></span> |

#### <a name="constraints-between-jobs"></a><span data-ttu-id="228ef-208">Ograniczenia między zadaniami</span><span class="sxs-lookup"><span data-stu-id="228ef-208">Constraints between jobs</span></span>

| <span data-ttu-id="228ef-209">**Metoda**</span><span class="sxs-lookup"><span data-stu-id="228ef-209">**Method**</span></span> | <span data-ttu-id="228ef-210">**Cel**</span><span class="sxs-lookup"><span data-stu-id="228ef-210">**Purpose**</span></span> |
| --- | --- |
| `addJobLink` | <span data-ttu-id="228ef-211">Dodaje łącze (np. zakończenie\>rozpoczęcie) między dwoma zadaniami.</span><span class="sxs-lookup"><span data-stu-id="228ef-211">Adds a link (such as finish\>start) between two jobs.</span></span> |
| `addConstraintEndsDelayed` | <span data-ttu-id="228ef-212">Definiuje ograniczenie, które określa, że nie zadanie nie może się zakończyć przed zakończeniem innego zadania i upłynięciem czasu opóźnienia.</span><span class="sxs-lookup"><span data-stu-id="228ef-212">Defines the constraint that a job cannot end before another jobs end plus some delay time.</span></span> |
| `addConstraintJobListWorkingTimeIntersect` | <span data-ttu-id="228ef-213">Dodaje ograniczenie określające, że gniazda zdolności produkcyjnych zarezerwowane dla zadań przypadać w przecinających się godzinach pracy dla dwóch zasobów używanych przez zadania.</span><span class="sxs-lookup"><span data-stu-id="228ef-213">Adds a constraint that the capacity slots reserved for the jobs must be on the intersecting working times for the two resources used by the jobs.</span></span> |
| `addConstraintJobOverlap` | <span data-ttu-id="228ef-214">Dodaj ograniczenie określające, w jaki sposób zadania są ustawiane kolejno, gdy dana ilość towaru może zostać przeniesiona między dwoma zasobami, gdy przetwarzanie pierwszego zasobu jeszcze nie zostało zakończone, tak aby drugi zasób mógł rozpocząć przetwarzanie.</span><span class="sxs-lookup"><span data-stu-id="228ef-214">Add a constraint that defines how jobs are sequenced when a given quantity of an item can be moved between two resources while the first resource is still not finished processing, so that the second resource can start processing.</span></span> |
| `addConstraintNotOnSameResource` | <span data-ttu-id="228ef-215">Umożliwia dodanie ograniczenia, które określa, że dwa zadania nie powinny być planowane na tym samym zasobie.</span><span class="sxs-lookup"><span data-stu-id="228ef-215">Adds a constraint that two jobs should not be scheduled on the same resource.</span></span> |
| `addConstraintOnSameResource` | <span data-ttu-id="228ef-216">Umożliwia dodanie ograniczenia, które określa, że dwa zadania muszą używać tego samego zasobu.</span><span class="sxs-lookup"><span data-stu-id="228ef-216">Adds a constraint that two jobs must be using the same resource.</span></span> |
| `addJobSameReservations` | <span data-ttu-id="228ef-217">Dodaje ograniczenie, które określa, że zadanie musi na końcu mieć te same rezerwacje zdolności produkcyjnych dla tych samych przedziałów czasu, co zadanie główne.</span><span class="sxs-lookup"><span data-stu-id="228ef-217">Adds a constraint that a job must end up having capacity reservations for the same time slots as the primary job.</span></span> |
| `setPrimaryParallelJob` | <span data-ttu-id="228ef-218">Dodaje informacje o tym, jakie zadanie jest zadaniem głównym w zestawie zadań równoległych.</span><span class="sxs-lookup"><span data-stu-id="228ef-218">Adds information about what job is the primary job in a set of parallel jobs.</span></span> |

### <a name="solver"></a><span data-ttu-id="228ef-219">Zmienna</span><span class="sxs-lookup"><span data-stu-id="228ef-219">Solver</span></span>

<span data-ttu-id="228ef-220">Sam aparat stanowi zasadniczo specjalistyczny solwer ograniczeń z dodanymi niestandardowymi heurystykami.</span><span class="sxs-lookup"><span data-stu-id="228ef-220">The engine itself is essentially a specialized constraint solver with custom heuristics added.</span></span> <span data-ttu-id="228ef-221">Solver jest oparty na dwóch głównych elementach: zmiennych i ograniczeniach.</span><span class="sxs-lookup"><span data-stu-id="228ef-221">The solver is based on two main elements: variables and constraints.</span></span>

#### <a name="variable"></a><span data-ttu-id="228ef-222">Zmienna</span><span class="sxs-lookup"><span data-stu-id="228ef-222">Variable</span></span>

<span data-ttu-id="228ef-223">Zmienna oznacza domenę możliwych wartości.</span><span class="sxs-lookup"><span data-stu-id="228ef-223">A variable represents a domain of possible values.</span></span> <span data-ttu-id="228ef-224">Aparat planowania ma dwa typy zmiennych:</span><span class="sxs-lookup"><span data-stu-id="228ef-224">Scheduling engine has two types of variables:</span></span>

- <span data-ttu-id="228ef-225">**Zmienna DateTime** — ma domenę wszystkich dat i godzin, a domena może być ograniczona przez zbliżenie dolnej i górnej granicy czasu zmiennej.</span><span class="sxs-lookup"><span data-stu-id="228ef-225">**DateTime variable** - Has a domain of all dates and times, and the domain can be restricted by moving the lower and upper bound for the time of the variable closer to each other.</span></span>
- <span data-ttu-id="228ef-226">**Zmienna zasobu** — ma domenę odpowiednich zasobów, a domena może podlegać ograniczeniom, eliminując zasoby z listy.</span><span class="sxs-lookup"><span data-stu-id="228ef-226">**Resource variable** - Has a domain of applicable resources, and the domain can be restricted by eliminating resources from the list.</span></span>

#### <a name="constraint"></a><span data-ttu-id="228ef-227">Ograniczenie</span><span class="sxs-lookup"><span data-stu-id="228ef-227">Constraint</span></span>

<span data-ttu-id="228ef-228">Ograniczenie działa w odniesieniu do zmiennych przez ograniczenie ich domen, ale jest również zależne od zmiennych, dzięki czemu jest uaktywniane po zmianie zmiennych.</span><span class="sxs-lookup"><span data-stu-id="228ef-228">A constraint acts on variables by restricting their domains, but it also depends on variables so it gets activated when variables change.</span></span> <span data-ttu-id="228ef-229">Proces „propagacji ograniczeń” oznacza, że warunek ograniczający wykonuje główną funkcję i raportuje z powrotem do logiki głównej w przypadku powodzenia.</span><span class="sxs-lookup"><span data-stu-id="228ef-229">The process of "constraint propagation" is when a constraint performs its main function and reports back to the main logic if successful.</span></span>

<span data-ttu-id="228ef-230">Zmienna jest uznawana za powiązaną, jeśli nie może być dalej ograniczona, co dla zmiennej DateTime oznacza, że górna i dolna granica są takie same, a zmienna zasobu ma tylko jeden odpowiedni zasób.</span><span class="sxs-lookup"><span data-stu-id="228ef-230">A variable is considered bound when it can't be restricted further, which for DateTime variable means that upper and lower bound is the same, and for the Resource variable that it has only a single applicable resource.</span></span> <span data-ttu-id="228ef-231">Jeśli wszystkie zmienne są powiązane, zostanie znalezione rozwiązanie.</span><span class="sxs-lookup"><span data-stu-id="228ef-231">When all variables are bound, a solution is found.</span></span>

### <a name="constraint-levels"></a><span data-ttu-id="228ef-232">Poziomy ograniczeń</span><span class="sxs-lookup"><span data-stu-id="228ef-232">Constraint levels</span></span>

<span data-ttu-id="228ef-233">Jeśli planowanie jest wykonywane jako część fazy planowania zapotrzebowania na materiały (MRP), zamówienia zostaną zaplanowane wstecz od daty zapotrzebowania.</span><span class="sxs-lookup"><span data-stu-id="228ef-233">When scheduling is executed as part of the material requirements planning (MRP) coverage phase, the orders will be scheduled backward from requirement date.</span></span> <span data-ttu-id="228ef-234">Jeśli jednak nie można odnaleźć harmonogramu rozpoczynającego się dzisiaj lub późniejszego i kończącego się przed datą zapotrzebowania, kierunek planowania zmieni się na biegnący od daty bieżącej.</span><span class="sxs-lookup"><span data-stu-id="228ef-234">However, if it is not possible to find a schedule that starts today or later and ends before the requirement date, then the scheduling direction will change to forward from today.</span></span>

<span data-ttu-id="228ef-235">Główna reguła biznesowa jest obsługiwana przez uporządkowanie ograniczeń na poziomach.</span><span class="sxs-lookup"><span data-stu-id="228ef-235">This main business rule is handled by organizing the constraints in levels.</span></span> <span data-ttu-id="228ef-236">Jeśli podczas używania ograniczeń na najwyższym poziomie nie zostanie znalezione rozwiązanie, ograniczenia na tym poziomie pozostaną usunięte i zostanie użyty poziom niższy.</span><span class="sxs-lookup"><span data-stu-id="228ef-236">If no solution is found when using the constraints on the highest level, then the constraints on that level are all dropped, and the lower level is tried.</span></span> <span data-ttu-id="228ef-237">W praktyce oznacza, że w przypadku planowania wstecz model będzie zawierał poziom 1 z celami zadania o najpóźniejszym czasie rozpoczęcia, odpowiadającym maksymalnemu ograniczeniu czasu zakończenia (dacie zapotrzebowania) oraz poziomowi 0 z celami zadania o najwcześniejszym czasie zakończenia i mającym minimalne ograniczenie czasu rozpoczęcia w dniu dzisiejszym.</span><span class="sxs-lookup"><span data-stu-id="228ef-237">In praxis, this means that for backward scheduling the model will contain a level 1 with job goals of latest start time given a maximum end time constraint (the requirement date), and a level 0 with job goals of earliest end time and given a minimum start time constraint of today.</span></span>

### <a name="algorithm"></a><span data-ttu-id="228ef-238">Algorytm</span><span class="sxs-lookup"><span data-stu-id="228ef-238">Algorithm</span></span>

<span data-ttu-id="228ef-239">Główne kroki algorytmu aparatu to:</span><span class="sxs-lookup"><span data-stu-id="228ef-239">The main steps of the engine algorithm are:</span></span>

1. <span data-ttu-id="228ef-240">Znalezienie sekwencji (łańcuchów zadań), które można rozwiązać osobno.</span><span class="sxs-lookup"><span data-stu-id="228ef-240">Find sequences (job chains) which can be solved separately.</span></span>
1. <span data-ttu-id="228ef-241">Spróbuj znaleźć początkowe rozwiązanie sekwencji dla najwyższego poziomu ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="228ef-241">Try to find an initial solution for the sequence for the highest constraint level.</span></span>
    1. <span data-ttu-id="228ef-242">Posortuj zadania w sekwencji na podstawie celu i priorytetów zadania, co pozwala na znalezienie zadania rozpoczęcia.</span><span class="sxs-lookup"><span data-stu-id="228ef-242">Sort the jobs in the sequence based on job goal and priorities, such that a start job can be found.</span></span>
    1. <span data-ttu-id="228ef-243">Zapętl zadania w następującej kolejności:</span><span class="sxs-lookup"><span data-stu-id="228ef-243">Loop the jobs in the following sequence:</span></span>
        1. <span data-ttu-id="228ef-244">Znajdź wszystkie ograniczenia, które muszą zostać rozpropagowane i uruchom propagację.</span><span class="sxs-lookup"><span data-stu-id="228ef-244">Find all constraints that need to be propagated and run propagation.</span></span>
        1. <span data-ttu-id="228ef-245">Jeśli wszystkie zmienne dla zadania zostały powiązane, znaleziono rozwiązanie tego zadania.</span><span class="sxs-lookup"><span data-stu-id="228ef-245">If all variables for the job have been bound, then a solution for that job has been found.</span></span>
        1. <span data-ttu-id="228ef-246">Jeśli nie można powiązać jednej ze zmiennych bez naruszania ograniczeń, wycofaj powiązanie zmiennej, spróbuj użyć innej wartości w domenie (dla zmiennej zasobu) i ponownie uruchom propagację ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="228ef-246">If one of the variables could not be bound without violating the constraints, then roll back the variable binding, try a different value in the domain (for resource variable), and rerun the constraint propagation.</span></span>
1. <span data-ttu-id="228ef-247">Jeśli nie znaleziono rozwiązania, wszystkie ograniczenia na bieżącym poziomie ograniczeń zostaną usunięte, a poziom ograniczenia obniżony (jeśli są dostępne niższe poziomy), a wyszukiwanie rozwiązania zostanie ponowione przy użyciu nowego zestawu ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="228ef-247">If no solution was found, then all constraints on the current constraint level is removed, the constraint level lowered (if any lower levels are available) and solution search retried with the new set of constraint.</span></span>
1. <span data-ttu-id="228ef-248">Jeśli znaleziono wykonalne rozwiązanie, rozpocznie się faza optymalizacji, w której zostanie podjęta próba znalezienia lepszego rozwiązania do czasu osiągnięcia limitu czasu optymalizacji lub wyczerpania wszystkich kombinacji zasobów.</span><span class="sxs-lookup"><span data-stu-id="228ef-248">If a feasible solution was found, then the optimization phase is started, which will try to find a better solution until the optimization timeout is reached or all resource combinations have been exhausted.</span></span>

<span data-ttu-id="228ef-249">Solver ograniczeń nie ma informacji o charakterystyce algorytmu planowania.</span><span class="sxs-lookup"><span data-stu-id="228ef-249">The constraint solver is not aware of the specifics of the scheduling algorithm.</span></span> <span data-ttu-id="228ef-250">„Magia” dzieję się w definicji i kombinacji różnych ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="228ef-250">It is in the definition and combination of the various constraints that the "magic" happens.</span></span>

### <a name="determining-working-times"></a><span data-ttu-id="228ef-251">Określanie czasu pracy</span><span class="sxs-lookup"><span data-stu-id="228ef-251">Determining working times</span></span>

<span data-ttu-id="228ef-252">Duża część ograniczeń (wewnętrznych) w aparacie steruje czasem pracy i zdolności produkcyjnych zasobu.</span><span class="sxs-lookup"><span data-stu-id="228ef-252">A large part of the (internal) constraints in the engine controls the working time and capacity of a resource.</span></span> <span data-ttu-id="228ef-253">W zasadzie zadaniem jest przechodzenie gniazd czasu pracy zasobu z określonego punktu w danym kierunku i znalezienie długiego interwału, w którym może zmieścić się wymagana wydajność (czas) zadań.</span><span class="sxs-lookup"><span data-stu-id="228ef-253">Essentially, the task is to traverse the working time slots for a resource from a given point in a given direction, and find a long enough interval in which the jobs required capacity (time) can fit.</span></span>

<span data-ttu-id="228ef-254">W tym celu aparat musi mieć informacje o czasie pracy zasobu.</span><span class="sxs-lookup"><span data-stu-id="228ef-254">To do this, the engine needs to know the working times of a resource.</span></span> <span data-ttu-id="228ef-255">W przeciwieństwie do danych modelu głównego czas pracy jest *ładowany z opóźnieniem* , co oznacza, że jest ładowany do aparatu w razie potrzeby.</span><span class="sxs-lookup"><span data-stu-id="228ef-255">Opposite to the main model data, the working times are *lazy loaded* , meaning that they are loaded into the engine as needed.</span></span> <span data-ttu-id="228ef-256">Powodem tego podejścia jest to, że często istnieje w Supply Chain Management czas pracy dla kalendarza przez bardzo długi okres i zazwyczaj istnieje wiele kalendarzy, więc wstępnie ładowane dane mogą być dość duże.</span><span class="sxs-lookup"><span data-stu-id="228ef-256">The reason for this approach is that there are often working times in Supply Chain Management for a calendar for a very long period and typically many calendars exist so the data would be quite large to pre-load.</span></span>

<span data-ttu-id="228ef-257">Informacje w kalendarzu są wymagane przez aparat we fragmentach przez wywołanie metody klasy X++ `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span><span class="sxs-lookup"><span data-stu-id="228ef-257">Calendar information is requested by the engine in chunks, by invoking the X++ class method `WrkCtrSchedulingInteropDataProvider.getWorkingTimes`.</span></span> <span data-ttu-id="228ef-258">Żądanie dotyczy określonego identyfikatora kalendarza w określonym danym czasu.</span><span class="sxs-lookup"><span data-stu-id="228ef-258">The request is for a specific calendar ID in a specific time interval.</span></span> <span data-ttu-id="228ef-259">W zależności od stanu pamięci podręcznej serwera w Supply Chain Management każde z tych żądań może się zakończyć kilkoma wywołaniami bazy danych, co zabiera dużo czasu (w odniesieniu do czystego czasu obliczeniowego).</span><span class="sxs-lookup"><span data-stu-id="228ef-259">Depending on the state of the server cache in Supply Chain Management, each of these requests could end up in several database calls, which takes a long time (relative to the pure computational time).</span></span> <span data-ttu-id="228ef-260">Ponadto, jeśli kalendarz zawiera bardzo rozbudowane definicje czasu pracy z wieloma dziennymi przedziałami czasu pracy, zwiększa to czas trwania ładowania.</span><span class="sxs-lookup"><span data-stu-id="228ef-260">Also, if the calendar contains very elaborate working time definitions with many working time intervals per day, this adds to the time the loading takes.</span></span>

<span data-ttu-id="228ef-261">Gdy dane czasu pracy są ładowane do aparatu planowania, są zachowywane w wewnętrznej pamięci podręcznej dla określonego kalendarza, co oznacza, że jeśli inne zadania lub zasoby używają tego samego kalendarza, kolejne wyszukiwania mogą być wykonywane szybko z pamięci.</span><span class="sxs-lookup"><span data-stu-id="228ef-261">When the working time data is loaded in the scheduling engine, this is retained in its internal cache for the specific calendar, meaning that if any other jobs or resources are using the same calendar then the next lookups can be performed quickly from memory.</span></span> <span data-ttu-id="228ef-262">Jedną z najczęstszych przyczyn nieprawidłowej wydajności jest użycie osobnego identyfikatora kalendarza dla każdego zasobu, ponieważ konieczne będzie żądanie danych dla każdego z kalendarzy, nawet jeśli zawartość kalendarzy może być taka sama.</span><span class="sxs-lookup"><span data-stu-id="228ef-262">One common cause of bad performance is if a separate calendar ID is used for each resource, because data will then need to be requested for each calendar, even though the content of the calendars might be the same.</span></span>

### <a name="finite-capacity"></a><span data-ttu-id="228ef-263">Ograniczone zdolności produkcyjne</span><span class="sxs-lookup"><span data-stu-id="228ef-263">Finite capacity</span></span>

<span data-ttu-id="228ef-264">Jeśli używane są ograniczone zdolności produkcyjne, przedziały czasu pracy z kalendarza są dzielone i zmniejszane na podstawie istniejących rezerwacji zdolności produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-264">When using finite capacity, the working time slots from the calendar are split and reduced based on the existing capacity reservations.</span></span> <span data-ttu-id="228ef-265">Te rezerwacje są również pobierane przy użyciu tej samej klasy `WrkCtrSchedulingInteropDataProvider` co kalendarze, ale używają metody `getCapacityReservations`.</span><span class="sxs-lookup"><span data-stu-id="228ef-265">These reservations are also fetched through the same `WrkCtrSchedulingInteropDataProvider` class as the calendars, but instead use the method `getCapacityReservations`.</span></span> <span data-ttu-id="228ef-266">W przypadku planowania w trakcie planowania głównego są brane pod uwagę rezerwacje określonego planu głównego, a jeśli są włączone na stronie **Parametry planowania głównego** , uwzględniane są także rezerwacje z ustalonych zleceń produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-266">When scheduling during master planning, the reservations for the specific master plan are considered and if enabled on the **Master planning parameters** page, the reservations from firmed production orders are also included.</span></span> <span data-ttu-id="228ef-267">Podobnie podczas planowania zlecenia produkcyjnego jest to również opcja, która uwzględnia rezerwacje z istniejących zamówień planowanych, chociaż nie jest to powszechne, tak jak w poprzednim przypadku.</span><span class="sxs-lookup"><span data-stu-id="228ef-267">Similarly, when scheduling a production order, it is also an option to include reservations from existing planned orders, although this is not as common as the other way around.</span></span>

<span data-ttu-id="228ef-268">Użycie ograniczonych zdolności produkcyjnych spowoduje, że planowanie będzie trwać dłużej z kilku powodów:</span><span class="sxs-lookup"><span data-stu-id="228ef-268">Using finite capacity will cause scheduling to take longer due to several reasons:</span></span>

- <span data-ttu-id="228ef-269">Pobieranie informacji o zdolnościach produkcyjnej z bazy danych jest powolną operacją, a buforowanie informacji o zdolnościach produkcyjnych na serwerze zazwyczaj nie jest tak dobre jak w przypadku czasu pracy, ponieważ nie są współużytkowane w zasobach typowych dla kalendarzy.</span><span class="sxs-lookup"><span data-stu-id="228ef-269">Fetching the capacity information from database is a slow operation and the server-side caching of capacity information is typically not as good as for working times because they are not shared among resources like calendars typically are.</span></span>
- <span data-ttu-id="228ef-270">Liczba przedziałów czasu pracy do przejścia zwiększa się z powodu podziałów, a aby można było znaleźć rozwiązanie, zwykle należy przeanalizować przedziały dla dłuższego okresu.</span><span class="sxs-lookup"><span data-stu-id="228ef-270">The number of working time slots to traverse increases due to the splits, and slots for a longer time period must typically be investigated before a solution can be found.</span></span>
- <span data-ttu-id="228ef-271">Po zakończeniu planowania konieczne jest sprawdzenie, czy istnieją rezerwacje powodujące konflikt (patrz część „Równoległe uruchamianie aparatów planowania”).</span><span class="sxs-lookup"><span data-stu-id="228ef-271">After the scheduling is complete, a check for conflicting reservations must be performed (see the "Running scheduling engines in parallel" section for details).</span></span>

### <a name="examining-the-resource-combinations"></a><span data-ttu-id="228ef-272">Sprawdzanie kombinacji zasobów</span><span class="sxs-lookup"><span data-stu-id="228ef-272">Examining the resource combinations</span></span>

<span data-ttu-id="228ef-273">Jeśli sekwencja zadań zawiera tylko standardowe łącza `FinishStart`, co oznacza, że formularz jest prostym łańcuchem bez oddziałów, optymalny wynik (widoczny w jednym zamówieniu, nie między kolejnymi zamówieniami) można uzyskać przez znalezienie najlepszego rozwiązania dla pierwszego zadania, a następnie znalezienia najlepszego rozwiązania dla następnego zadania.</span><span class="sxs-lookup"><span data-stu-id="228ef-273">If the job sequence only contains the standard `FinishStart` links, meaning it forms a simple chain without any branches, an optimal result (seen from the single order, not across orders) can be achieved by finding the best solution for the first job and then moving on to find the best solution for the next job.</span></span> <span data-ttu-id="228ef-274">Najlepszym rozwiązaniem zadania jest znalezienie zasobu, który może uzyskać datę początkową i końcową zadania najbardziej zbliżonego do celu zadania (w procesie planowania od dnia dzisiejszego oznacza to uzyskanie daty zakończenia zadania możliwie najwcześniej) przy zachowaniu tych ograniczeń.</span><span class="sxs-lookup"><span data-stu-id="228ef-274">The best solution for a job means finding the resource that can get the from and to date of the job closest to the job goal (in forward scheduling this means getting the end date of the job as early as possible) while still respecting the constraints.</span></span>

<span data-ttu-id="228ef-275">Jeśli istnieją zadania równoległe, znalezienie rozwiązania może wymagać zbadania różnych kombinacji zasobów.</span><span class="sxs-lookup"><span data-stu-id="228ef-275">When there are parallel jobs, finding a solution may involve examining different combinations of resources.</span></span> <span data-ttu-id="228ef-276">Liczba możliwych kombinacji zasobów wynika z liczby zasobów odpowiednich dla połączonych zadań równoległych.</span><span class="sxs-lookup"><span data-stu-id="228ef-276">The number of possible resource combinations is the product of the number of applicable resources for the connected parallel jobs.</span></span> <span data-ttu-id="228ef-277">Szczególnie w przypadku planowania zamówienia wstecz od daty zapotrzebowania potrzebny jest czas, aby logika mogła określić, że nie ma rozwiązania problemu, który spowoduje, że zadania równoległe nie zmieszczą się przed datą dzisiejszą, co będzie wymagało sprawdzenia wszystkich kombinacji, ponieważ mogą istnieć pewne zasoby o wyższej wydajności lub innym kalendarzu, który może dać wynik.</span><span class="sxs-lookup"><span data-stu-id="228ef-277">Especially when scheduling an order backwards from a requirement date, it can take quite a while for the logic to realize that there is no solution to the problem that will make the parallel jobs fit before today's date, as it will need to check all the combinations because there could be some resources that had a higher efficiency or a different calendar that might give a result.</span></span> <span data-ttu-id="228ef-278">Oznacza to, że jeśli limit czasu nie zostanie skonfigurowany, będzie on uruchomiony przez dłuższy czas przed zmianą kierunku na do przodu.</span><span class="sxs-lookup"><span data-stu-id="228ef-278">This means that if no timeout limit has been set it will run for a long time before changing the direction to forward.</span></span>

<span data-ttu-id="228ef-279">Ta logika kombinatoryczna oznacza, że dodanie większej liczby odpowiednich zasobów może spowodować wolniejsze uruchamianie aparatu.</span><span class="sxs-lookup"><span data-stu-id="228ef-279">This combinatorial logic also means that adding more applicable resources may make the engine run slower.</span></span> <span data-ttu-id="228ef-280">Jeśli występują problemy z wydajnością podczas wykonywania równoległych operacji i planowania z nieskończonymi zdolnościami produkcyjnymi, można je częściowo rozliczyć, konfigurując projektanta marszrut w celu podjęcia decyzji, który zasób powinien zostać użyty, a następnie bezpośredniego przypisywania zasobu do operacji (ponieważ aparat w większości przypadków zawsze zakończy pobieranie tego samego zasobu, więc wynik końcowy będzie taki sam).</span><span class="sxs-lookup"><span data-stu-id="228ef-280">If performance problems occur when having parallel operations and scheduling with infinite capacity, it can partly be fixed by having the route designer take a decision on which resource should be used and then assign the resource directly on the operation (because the engine in most cases will always end up picking the same resource, so the end result will be the same).</span></span>

### <a name="hard-links"></a><span data-ttu-id="228ef-281">Łącza stałe</span><span class="sxs-lookup"><span data-stu-id="228ef-281">Hard links</span></span>

<span data-ttu-id="228ef-282">Ustawienie typu łącza między dwoma zadaniami na stałe gwarantuje, że nie ma przerwy w przedziale czasu między zakończeniem jednego zadania a początkiem kolejnego.</span><span class="sxs-lookup"><span data-stu-id="228ef-282">Setting the link type between two jobs to hard, ensures that there is no time gap between the finish of one job and the start of the next one.</span></span> <span data-ttu-id="228ef-283">Może to być bardzo przydatne w scenariuszach takich jak wtedy, gdy metal jest podgrzewany w jednym zadaniu, a następnie przetwarzany w następnym zadaniu, gdzie nie jest pożądane schładzane metalu między nimi.</span><span class="sxs-lookup"><span data-stu-id="228ef-283">This can be very useful in scenarios like when metal is heated in one job and then processed in the next job, where it is not desirable to have the metal cool down in between.</span></span>

<span data-ttu-id="228ef-284">W przypadku standardowych łączy miękkich i planowania do przodu, jeśli marszruta tworzy prosty łańcuch bez oddziałów, można uzyskać wynik, wyszukując rozwiązanie dla pierwszego zadania, które spełnia jego własne ograniczenia, a następnie przechodząc przez łańcuch propagacji czasu zakończenia z poprzedniego zadania do następnego zadania.</span><span class="sxs-lookup"><span data-stu-id="228ef-284">With standard soft links and forward scheduling, if the route forms a simple chain without any branches, a result can be achieved by finding a solution for the first job that satisfies its own constraints and then moving on through the chain propagating the end time from the previous job to the next job.</span></span> <span data-ttu-id="228ef-285">Jeśli bieżące zadanie nie może znaleźć zdolności produkcyjnych, czas rozpoczęcia dla tego zadania zostanie przesunięty najpóźniej, bez żadnego związku z poprzednimi zadaniami, potencjalnie tworząc przerwy między zadaniami.</span><span class="sxs-lookup"><span data-stu-id="228ef-285">If the current job can't find any capacity, the start time for it will be moved out further, without any consequence for the previous jobs potentially creating gaps between the jobs.</span></span> <span data-ttu-id="228ef-286">Jednak w przypadku łączy stałych (szczególnie w związku z ograniczonymi zdolnościami produkcyjnymi) w tym samym scenariuszu fakt, że jedno zadanie późniejsze w łańcuchu zdolności produkcyjnych nie ma możliwości znalezienia zdolności produkcyjnych oznacza, że wszystkie poprzednie zaplanowane zadania muszą być „przeciągnięte” pojedynczo, a w konsekwencji ponownie zaplanowane wiele razy.</span><span class="sxs-lookup"><span data-stu-id="228ef-286">However with hard links (especially in connection with finite capacity) for the same scenario, the fact that one job later in the chain cannot find capacity, will mean that all previous scheduled jobs will have to be "dragged" along one by one and thereby rescheduled a number of times.</span></span> <span data-ttu-id="228ef-287">W szczególności w scenariuszach z wysokim obciążeniem dla wielu zasobów stałe łącza mogą powodować reakcje łańcuchowe, w których zadania mają wpływ na siebie, a wiele iteracji będzie wymagało wykonania przed ustabilizowaniem wyników do wykonalnego harmonogramu.</span><span class="sxs-lookup"><span data-stu-id="228ef-287">Especially in scenarios with high load for multiple resources, the hard links can cause a chain reaction where the jobs will affect each other and a number of iterations will have to be performed before the result stabilizes into a feasible schedule.</span></span>

## <a name="running-scheduling-engines-in-parallel"></a><span data-ttu-id="228ef-288">Uruchamianie aparatów planowania równolegle</span><span class="sxs-lookup"><span data-stu-id="228ef-288">Running scheduling engines in parallel</span></span>

<span data-ttu-id="228ef-289">Podczas planowania w ramach procesu planowania głównego, w którym używani są pomocnicy, każdy wątek pomocniczy planowania głównego może również pobierać zadania planowania zlecenia produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="228ef-289">When performing scheduling as part of a master planning run where helpers are used, each of the master planning helper threads can also pick up production order scheduling tasks.</span></span> <span data-ttu-id="228ef-290">Oznacza to, że wiele aparatów planowania może być uruchomionych w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="228ef-290">This means that multiple scheduling engines can be running at the same time.</span></span> <span data-ttu-id="228ef-291">Choć wielowątkowość jest bardzo istotną zaletą wydajności, istnieją również pewne wady funkcjonalne dotyczące planowania.</span><span class="sxs-lookup"><span data-stu-id="228ef-291">While multithreading in general is a highly significant performance benefit, there are also some functional downsides when it comes to scheduling.</span></span>

<span data-ttu-id="228ef-292">W module MRP wszystkie zlecenia produkcyjne dla danego poziomu listy składowej (BOM) są planowane w sekwencjach dat zapotrzebowania, co oznacza, że zamówienia z najwcześniejszą datą zapotrzebowania powinny być zaplanowane jako pierwsze i w ten sposób mieć największą szansę na uzyskanie dostępnej zdolności produkcyjnej zasobu.</span><span class="sxs-lookup"><span data-stu-id="228ef-292">In MRP, all production orders for a given bill of materials (BOM) level are scheduled in requirement date sequence, meaning that those orders with the earliest requirement date should be scheduled first and thereby have the highest chance of getting the available resource capacity.</span></span> <span data-ttu-id="228ef-293">Jednak w przypadku wielu aparatów pobierających z listy nieplanowanych zamówień sekwencja nie jest już zapewniana, ponieważ jeden może zakończyć pracę szybciej niż drugi.</span><span class="sxs-lookup"><span data-stu-id="228ef-293">However, with multiple engines picking from the list of unscheduled orders the sequence is no longer ensured, as one might complete faster than the other.</span></span>

<span data-ttu-id="228ef-294">Ponadto podczas planowania przy użyciu ograniczonych zdolności produkcyjnych i gdy wiele wystąpień aparatów próbuje zaplanować zamówienia, które mogą potencjalnie korzystać z tych samych zasobów w tym samym przedziale czasu, może wystąpić stan wyścigu.</span><span class="sxs-lookup"><span data-stu-id="228ef-294">Also, when scheduling using finite capacity and when multiple engine instances are trying to schedule orders that are potentially using the same resources at the same time interval, a race condition can occur.</span></span> <span data-ttu-id="228ef-295">Liczba takich stanów wyścigu jest rejestrowana w polu **Konflikty planowania** na stronie historii planów głównych.</span><span class="sxs-lookup"><span data-stu-id="228ef-295">The number of such race conditions is recorded in the **Scheduling conflicts** field on the master plans history page.</span></span> <span data-ttu-id="228ef-296">Logika rozwiązywania konfliktów jest następująca:</span><span class="sxs-lookup"><span data-stu-id="228ef-296">The conflict resolution logic is as follows:</span></span>

- <span data-ttu-id="228ef-297">Zaplanuj zamówienie (bez blokady) i pobierz rezerwacje zdolności produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-297">Schedule an order (lock-free) and get capacity reservations.</span></span>
- <span data-ttu-id="228ef-298">Użyj blokady.</span><span class="sxs-lookup"><span data-stu-id="228ef-298">Take the lock.</span></span>
- <span data-ttu-id="228ef-299">Sprawdź, czy istnieją nowsze rezerwacje zdolności produkcyjnych dla zaplanowanych zasobów w przedziale czasu.</span><span class="sxs-lookup"><span data-stu-id="228ef-299">Check if newer capacity reservations exist for the scheduled resources in the timespan.</span></span>
  - <span data-ttu-id="228ef-300">Jeśli nie, zapisz zdolności produkcyjne i zwolnij blokadę.</span><span class="sxs-lookup"><span data-stu-id="228ef-300">If no, write the capacity and release the lock.</span></span>
  - <span data-ttu-id="228ef-301">Jeśli tak, zwolnij blokadę i ponownie zaplanuj zamówienie od początku.</span><span class="sxs-lookup"><span data-stu-id="228ef-301">If yes, release the lock and reschedule the order from the beginning.</span></span>

<span data-ttu-id="228ef-302">Dlatego podczas planowania z wieloma wystąpieniami aparatu wynik nie jest całkowicie określony, ponieważ będzie zależny od dokładnego czasu trwania każdego z wątków.</span><span class="sxs-lookup"><span data-stu-id="228ef-302">So, when scheduling with multiple engine instances, the result is not fully deterministic because it will depend on the exact timing of each of the threads.</span></span>

## <a name="operation-scheduling-performance"></a><span data-ttu-id="228ef-303">Wydajność planowania operacji</span><span class="sxs-lookup"><span data-stu-id="228ef-303">Operation scheduling performance</span></span>

<span data-ttu-id="228ef-304">Chociaż planowanie operacji jest również nazywane wstępnym planowaniem zdolności produkcyjnych, z punktu widzenia aparatu, może to utrudnić rozwiązanie problemu, jeśli są używane ograniczone zdolności produkcyjne, ponieważ więcej danych jest potrzebnych do określenia wykonalności.</span><span class="sxs-lookup"><span data-stu-id="228ef-304">Even though operation scheduling is also known as rough-cut capacity planning, seen from an engine standpoint, it can be a harder problem to solve if finite capacity is used, as more data is needed to determine feasibility.</span></span>

<span data-ttu-id="228ef-305">Zdolności produkcyjne grupy zasobów zależą od tego, jakie i ile zasobów należy do danej grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="228ef-305">The capacity of a resource group depends on which and how many resources are members of the resource group.</span></span> <span data-ttu-id="228ef-306">Grupa zasobów w sama w sobie nie ma żadnych zdolności produkcyjnych &mdash; tylko gdy zasoby są elementami grupy, będą mieć zdolności produkcyjne.</span><span class="sxs-lookup"><span data-stu-id="228ef-306">A resource group in itself does not have any capacity&mdash;only when resources are a member of the group will it have capacity.</span></span> <span data-ttu-id="228ef-307">Ponieważ członkostwo grupy zasobów może się różnić w miarę upływu czasu, zdolności produkcyjne muszą być oceniane codziennie.</span><span class="sxs-lookup"><span data-stu-id="228ef-307">Because the resource group membership can vary over time, capacity must be evaluated per day.</span></span>

<span data-ttu-id="228ef-308">W planowaniu operacji kalendarz grupy zasobów służy do ustalania godzin rozpoczęcia i zakończenia każdej operacji.</span><span class="sxs-lookup"><span data-stu-id="228ef-308">In operations scheduling, the resource group's calendar is used to determine the start and end times for each operation.</span></span> <span data-ttu-id="228ef-309">Oznacza to, że kalendarz grupy zasobów określa limit czasu, w którym operacje są planowane dla jednej operacji w jednym dniu w jednej grupie zasobów.</span><span class="sxs-lookup"><span data-stu-id="228ef-309">This means that the resource group's calendar places a limit on how much time can be operations scheduled for one operation on one day in one resource group.</span></span> <span data-ttu-id="228ef-310">W przeciwieństwie do kalendarza dla określonych zasobów dane dotyczące wydajności kalendarza są ignorowane dla grupy zasobów, ponieważ oznaczają po prostu godziny otwarcia, a nie rzeczywiste zdolności produkcyjne.</span><span class="sxs-lookup"><span data-stu-id="228ef-310">Opposite the calendar for the specific resources, the efficiency data of the calendar is ignored for the resource group as it simply denotes opening hours and not actual capacity.</span></span>

<span data-ttu-id="228ef-311">Jeśli na przykład czas pracy dla grupy zasobów w określonym dniu wynosi od 8:00 do 16:00, jedna operacja nie może nałożyć większego obciążenia na grupę zasobów, niż może ona zawierać w ciągu 8 godzin, bez względu na ilość zdolności produkcyjnych, która w danym dniu była dostępna dla danej grupy zasobów.</span><span class="sxs-lookup"><span data-stu-id="228ef-311">For example, if the working time for a resource group on one specific date is from 8:00 to 16:00, one operation can't put more load on the resource group than what can be fit into 8 hours, no matter how much capacity that the resource group has available in total on that day.</span></span> <span data-ttu-id="228ef-312">Dostępne zdolności produkcyjne mogą jednak dodatkowo ograniczyć obciążenie.</span><span class="sxs-lookup"><span data-stu-id="228ef-312">The available capacity can however limit the load further.</span></span>

<span data-ttu-id="228ef-313">Obciążenie pracą z planowania zadań na wszystkich zasobach uwzględnionych w grupie zasobów jest brane pod uwagę w przypadku obliczania dostępnych zdolności produkcyjnych dla grupy zasobów w danym dniu.</span><span class="sxs-lookup"><span data-stu-id="228ef-313">The load from job scheduling on all the resources included in the resource group on a given day is considered when the available capacity for the resource group on the same day is calculated.</span></span> <span data-ttu-id="228ef-314">Dla każdej daty obliczenie jest następujące:</span><span class="sxs-lookup"><span data-stu-id="228ef-314">For each date, the calculation is:</span></span>

<span data-ttu-id="228ef-315">*Dostępna pojemność grupy zasobów = pojemność zasobów w grupie na podstawie ich kalendarza &ndash; Zaplanowane zadanie obciążenia zasobów w grupie &ndash; Zaplanowane operacje obciążenia zasobów w grupie &ndash; Zaplanowane obciążenie operacji w grupie zasobów*</span><span class="sxs-lookup"><span data-stu-id="228ef-315">*Available resource group capacity = Capacity for resources in the group based on their calendar &ndash; Job scheduled load on the resources in the group &ndash; Operations scheduled load on the resources in the group &ndash; Operations scheduled load on the resource group*</span></span>

<span data-ttu-id="228ef-316">Na karcie **Zapotrzebowanie na zasoby** w operacji marszruty zapotrzebowanie na zasoby można określać przy użyciu danego zasobu (w takim przypadku operacja będzie planowana na podstawie tego zasobu), dla grupy zasobów, dla typu zasobu lub dla jednego lub większej liczby możliwości, umiejętności, kursu lub certyfikatu.</span><span class="sxs-lookup"><span data-stu-id="228ef-316">On the **Resource requirements** tab on the route operation, the resource requirements can be specified using either a specific resource (in which case the operation will be scheduled using that resource), for a resource group, for a resource type, or for one or more capabilities, skill, course, or certificate.</span></span> <span data-ttu-id="228ef-317">Użycie wszystkich tych opcji zapewnia dużą elastyczność w projektowaniu marszruty, a także komplikuje planowanie dla aparatu, ponieważ zdolności produkcyjne muszą być księgowane według „właściwości” (nazwy abstrakcyjnej używanej w aparacie w celu uzyskania możliwości, umiejętności itp.).</span><span class="sxs-lookup"><span data-stu-id="228ef-317">While using all of these options gives a great flexibility on the route design, it also complicates the scheduling for the engine as the capacity must be accounted for per "property" (the abstract name used in the engine for capability, skills, and so on).</span></span>

<span data-ttu-id="228ef-318">Wydajność grupy zasobów dla zdolności produkcyjnych to suma wydajności dla wszystkich zasobów w grupie zasobów o danej zdolności produkcyjnej.</span><span class="sxs-lookup"><span data-stu-id="228ef-318">The resource group's capacity for a capability is the sum of the capacity for all resources in the resource group that has the capability in question.</span></span> <span data-ttu-id="228ef-319">Jeśli zasób w grupie ma zdolności produkcyjne, będzie on uwzględniany niezależnie od tego, jaki poziom wydajności jest wymagany.</span><span class="sxs-lookup"><span data-stu-id="228ef-319">If a resource in the group has a capability, it will be considered no matter what level of the capacity is required.</span></span>

<span data-ttu-id="228ef-320">W planowaniu operacji dostępna wydajność dla danych zdolności produkcyjnych grupy zasobów zostanie zmniejszona po załadowaniu operacji wymagającej danych zdolności produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-320">In operations scheduling, the available capacity for a certain capability for a resource group will be reduced when it is loaded with an operation that requires the capability in question.</span></span> <span data-ttu-id="228ef-321">Jeśli operacja wymaga więcej niż jednej zdolności produkcyjnej, wydajność zostanie zmniejszona dla wszystkich wymaganych zdolności produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-321">If the operation requires more than one capability, the capacity will be reduced for all required capabilities.</span></span>

<span data-ttu-id="228ef-322">Dla każdej daty wymagane obliczenie jest następujące:</span><span class="sxs-lookup"><span data-stu-id="228ef-322">For each date, the required calculation is:</span></span>

<span data-ttu-id="228ef-323">*Dostępna pojemność dla zdolności = Pojemność dla zdolności &ndash; Zaplanowane obciążenie zasobów z określonymi możliwościami, które są zawarte w grupie zasobów &ndash; Zaplanowane obciążenie operacji na zasobach z określonymi możliwościami, które są zawarte w grupie zasobów &ndash; Zaplanowane ładowanie operacji w samej grupie zasobów, które wymagają określonej możliwości*</span><span class="sxs-lookup"><span data-stu-id="228ef-323">*Available capacity for a capability = Capacity for the capability &ndash; Job scheduled load on the resources with the specific capability, included in the resource group &ndash; Operations scheduled load on the resources with the specific capability, included in the resource group &ndash; Operations scheduled load on the resource group itself that require the specific capability*</span></span>

<span data-ttu-id="228ef-324">Oznacza to, że w przypadku obciążenia określonego zasobu, obciążenie jest brane pod uwagę przy obliczaniu dostępnej wydajności grupy zasobów na jedną zdolność, ponieważ obciążenie określonego zasobu zmniejsza jego udział w wydajności grupy zasobów w zależności od zdolności produkcyjnych, jeśli obciążenie określonego zasobu jest związane z daną zdolnościami produkcyjnymi.</span><span class="sxs-lookup"><span data-stu-id="228ef-324">This means that if there is load on a specific resource, the load is considered in the calculation of the resource group's available capacity per capability, because the load on a specific resource reduces its contribution to the resource group's capacity for a capability no matter if the load on the specific resource is for that specific capability.</span></span> <span data-ttu-id="228ef-325">Jeśli na poziomie grupy zasobów znajduje się obciążenie, jest ono uwzględniane w obliczeniach dostępnej wydajności grupy zasobów na zdolności produkcyjne tylko wtedy, gdy obciążenie pochodzi z operacji wymagającej określonych zdolności produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-325">If there is load on the resource group level, it is considered in the calculation of the resource group's available capacity per capability only if the load is from an operation that requires the specific capability.</span></span>

<span data-ttu-id="228ef-326">Powyższa logika jest skomplikowana, ponieważ jest taka sama dla każdego typu „właściwości”, więc korzystanie z funkcji planowania operacji o ograniczonych zdolnościach produkcyjnych wymaga załadowania znacznej ilości danych.</span><span class="sxs-lookup"><span data-stu-id="228ef-326">The above logic is complicated, as this is the same for each type of "property" so using operations scheduling with finite capacity requires a significant amount of data to be loaded.</span></span>

## <a name="viewing-scheduling-engine-input-and-output"></a><span data-ttu-id="228ef-327">Wyświetlanie danych wejściowych i wyjściowych aparatu planowania</span><span class="sxs-lookup"><span data-stu-id="228ef-327">Viewing scheduling engine input and output</span></span>

<span data-ttu-id="228ef-328">Aby uzyskać szczegółowe informacje dotyczące wejścia i wyjścia procesu planowania, należy włączyć rejestrowanie, przechodząc do **Administrowanie organizacją \> Ustawienia \> Planowanie \> Panel śledzenia planowania**.</span><span class="sxs-lookup"><span data-stu-id="228ef-328">To get specific details of the input and output of the scheduling process,  enable logging by going to **Organization administration \> Setup \> Scheduling \> Scheduling tracing cockpit**.</span></span>

<span data-ttu-id="228ef-329">Na tej stronie najpierw wybierz opcję **Włącz rejestrowanie** w okienku akcji.</span><span class="sxs-lookup"><span data-stu-id="228ef-329">On this page, first select **Enable logging** on the Action Pane.</span></span> <span data-ttu-id="228ef-330">Następnie uruchom planowanie zlecenia produkcyjnego.</span><span class="sxs-lookup"><span data-stu-id="228ef-330">Then run the scheduling for the production order.</span></span> <span data-ttu-id="228ef-331">Po zakończeniu wróć do strony **Panel śledzenia planowania** i wybierz opcję **Wyłącz rejestrowanie** w okienku akcji.</span><span class="sxs-lookup"><span data-stu-id="228ef-331">When complete, return to the **Scheduling tracing cockpit** page and select **Disable logging** on the Action Pane.</span></span> <span data-ttu-id="228ef-332">Umożliwia odświeżenie strony i wyświetlenie nowego wiersza w tabeli.</span><span class="sxs-lookup"><span data-stu-id="228ef-332">Refresh the page and a new line will appear in the grid.</span></span> <span data-ttu-id="228ef-333">Wybierz nowy wiersz, a następnie opcję **Pobierz** w okienku akcji.</span><span class="sxs-lookup"><span data-stu-id="228ef-333">Select the new line and select **Download** on the Action Pane.</span></span> <span data-ttu-id="228ef-334">Spowoduje to udostępnienie skompresowanego folderu. zip zawierającego następujące pliki:</span><span class="sxs-lookup"><span data-stu-id="228ef-334">This will give you a .zip compressed folder containing the following files:</span></span>

- <span data-ttu-id="228ef-335">**Log. txt** — jest to plik dziennika opisujący kroki, jakie wykona aparat.</span><span class="sxs-lookup"><span data-stu-id="228ef-335">**Log.txt** - This is the log file that describes the steps that the engine goes through.</span></span> <span data-ttu-id="228ef-336">Jest bardzo rozbudowany i może być nieco przytłaczający, ale jeśli jest używany jako część eksperymentowania z konfiguracją marszruty w celu rozwiązania problemów z wydajnością, pierwszym elementem analizy powinna być różnica w czasie między pierwszym a ostatnim wierszem, co pozwoli uzyskać dokładny czas trwania harmonogramu.</span><span class="sxs-lookup"><span data-stu-id="228ef-336">It is very elaborate and can be a bit overwhelming, but when used as part of experimenting with the route setup to resolve performance problems the first thing to look for is the difference in time between the first and the last line, as this will give you the exact time the scheduler has spent.</span></span>
- <span data-ttu-id="228ef-337">**XmlModel.xml** — zawiera model zbudowany w języku X++ i, na którym działa aparat.</span><span class="sxs-lookup"><span data-stu-id="228ef-337">**XmlModel.xml** - This contains the model that is built in X++ and that the engine operates on.</span></span> <span data-ttu-id="228ef-338">`JobId` użyty w pliku odpowiada `RecId` z tabeli źródłowej zawierającej zadania (`ReqRouteJob` lub `ProdRouteJob`).</span><span class="sxs-lookup"><span data-stu-id="228ef-338">The `JobId` used in the file correlates to the `RecId` from the source table containing the jobs (`ReqRouteJob` or `ProdRouteJob`).</span></span> <span data-ttu-id="228ef-339">Typowym elementem do sprawdzenia w tym pliku jest to, że daty podane w `ConstraintJobStartsAt` i `ConstraintJobEndsAt` są zgodne z oczekiwaniami, właściwość `JobGoal` jest poprawnie ustawiona i zadania są ze sobą wzajemnie powiązane przez ograniczenia `JobLink`.</span><span class="sxs-lookup"><span data-stu-id="228ef-339">The typical thing to look for in this file is that the dates given in `ConstraintJobStartsAt` and `ConstraintJobEndsAt` are as expected, that the `JobGoal` property is set correctly, and that the jobs are related to each other through the `JobLink` constraints.</span></span>
- <span data-ttu-id="228ef-340">**XmlSlots.xml** — zawiera wszystkie rezerwacje czasów pracy i zdolności produkcyjnych, których wymaga dany aparat.</span><span class="sxs-lookup"><span data-stu-id="228ef-340">**XmlSlots.xml** - This contains all the working times and capacity reservations that the engine has requested.</span></span> <span data-ttu-id="228ef-341">Czas pracy w kalendarzu i rezerwacje będą wymagane tylko przez aparat dla okresów, w których próbuje on umieścić zadania (i dodatkowy bufor), więc jeśli plik zawiera terminy w dalekiej przyszłości, może to oznaczać problem z konfiguracją.</span><span class="sxs-lookup"><span data-stu-id="228ef-341">The calendar working times and reservations will only be requested by the engine for the time periods where it tries to place the jobs (and an extra buffer), so if the file contains times very far in the future, it might be an indication of a problem with the setup.</span></span> <span data-ttu-id="228ef-342">W węzłach `ResourceProperty` będą pokazywane wszystkie zasoby, z którymi skojarzone są grupy zasobów i funkcje, dla których są powiązane okresy.</span><span class="sxs-lookup"><span data-stu-id="228ef-342">The `ResourceProperty` nodes will show for each resource which resource group and capabilities it is associated with for which periods.</span></span>
- <span data-ttu-id="228ef-343">**Result. XML** — zawiera wynik uruchomienia planowania.</span><span class="sxs-lookup"><span data-stu-id="228ef-343">**Result.xml** - This contains the result of the scheduling run.</span></span>

<span data-ttu-id="228ef-344">Należy zauważyć, że funkcja śledzenia może dodawać znaczne obciążenie związane z wydajnością, dlatego służy tylko do badania planowania konkretnych zamówień w kontrolowany sposób.</span><span class="sxs-lookup"><span data-stu-id="228ef-344">Note that the tracing functionality can add significant performance overhead, so only use it for investigating scheduling of specific orders in a controlled manner.</span></span> <span data-ttu-id="228ef-345">Jeśli ta opcja jest włączona podczas planowania głównego, system szybko osiągnie swój limit rozmiaru i zostanie zatrzymany.</span><span class="sxs-lookup"><span data-stu-id="228ef-345">If it is turned on during a master planning run it will quickly reach its size limit and stop.</span></span>

## <a name="troubleshooting-performance"></a><span data-ttu-id="228ef-346">Rozwiązywanie problemów z wydajnością</span><span class="sxs-lookup"><span data-stu-id="228ef-346">Troubleshooting performance</span></span>

<span data-ttu-id="228ef-347">Zgodnie z informacjami we wszystkich poprzednich sekcjach, istnieją pewne pułapki związane z konfiguracją i użytkowaniem aparatu planowania, co może prowadzić do problemów z wydajnością.</span><span class="sxs-lookup"><span data-stu-id="228ef-347">As can be understood from all of the previous sections, there are some pitfalls when it comes to the setup and usage of the scheduling engine, which can lead to performance problems.</span></span> <span data-ttu-id="228ef-348">Do rozwiązywania takich problemów można użyć następującej listy kontrolnej.</span><span class="sxs-lookup"><span data-stu-id="228ef-348">The following check list can be used for troubleshooting such issues.</span></span> <span data-ttu-id="228ef-349">Ważne jest, aby przeanalizować wszystkie punkty, ponieważ najczęściej połączenie wielu czynników powoduje problemy.</span><span class="sxs-lookup"><span data-stu-id="228ef-349">It is important to look at all the points as it is most often a combination of multiple factors that leads to problems.</span></span>

### <a name="performing-scheduling-as-part-of-mrp-when-it-is-not-needed"></a><span data-ttu-id="228ef-350">Wykonywanie planowania jako części MRP bez potrzeby</span><span class="sxs-lookup"><span data-stu-id="228ef-350">Performing scheduling as part of MRP when it is not needed</span></span>

<span data-ttu-id="228ef-351">Chociaż marszruty są używane do celów kontroli produkcji, takich jak wycena i raportowanie, nie trzeba ich uwzględniać podczas MRP.</span><span class="sxs-lookup"><span data-stu-id="228ef-351">Even though routes are used for the production control purposes such as costing and reporting, it might not be necessary to consider them during MRP.</span></span> <span data-ttu-id="228ef-352">W niektórych przypadkach, gdy dla danego towaru określenie standardowego czasu realizacji produkcji będzie wystarczające do planowania.</span><span class="sxs-lookup"><span data-stu-id="228ef-352">In some cases, having a standard production lead time specified for the item will be sufficient for planning.</span></span> <span data-ttu-id="228ef-353">Aby wyłączyć planowanie marszruty, należy ustawić wartość w polu horyzont czasowy zdolności produkcyjnych na zero.</span><span class="sxs-lookup"><span data-stu-id="228ef-353">To turn off route scheduling, set the capacity time fence to zero.</span></span> <span data-ttu-id="228ef-354">Jeśli planowanie powinno zostać wykonane, horyzont czasowy zdolności produkcyjnych musi zostać starannie ustawiony, ponieważ może nie być konieczne uwzględnienie marszrut w pełnym zakresie horyzontu czasowego zapotrzebowania na MRP.</span><span class="sxs-lookup"><span data-stu-id="228ef-354">If scheduling should be done, then the capacity time fence must be carefully set because it might not be necessary to consider routes for the full extent of the MRP's coverage time fence.</span></span>

<span data-ttu-id="228ef-355">Należy zauważyć, że jeśli zamówienie nie jest planowane w trakcie MRP, będzie konieczne zaplanowanie podczas ustalania zamówienia planowanego.</span><span class="sxs-lookup"><span data-stu-id="228ef-355">Note that if the order is not scheduled during MRP, then it will instead need to be scheduled when the planned order is firmed.</span></span> <span data-ttu-id="228ef-356">Oznacza to, że proces ustalania może trwać dłużej, więc w zależności od liczby potwierdzonych sugerowanych planowanych zamówień zysk wydajności w czasie MRP może zostać utracony przy potwierdzaniu.</span><span class="sxs-lookup"><span data-stu-id="228ef-356">This means that the firming process will take longer, so depending on how many of the suggested planned orders get firmed the performance gain during MRP might be lost at firming.</span></span>

### <a name="route-with-unnecessary-operations"></a><span data-ttu-id="228ef-357">Marszruta z niepotrzebnymi operacjami</span><span class="sxs-lookup"><span data-stu-id="228ef-357">Route with unnecessary operations</span></span>

<span data-ttu-id="228ef-358">Podczas projektowania marszruty kuszące jest wypróbowanie modelu rzeczywistego ze wszystkimi etapami produkcji.</span><span class="sxs-lookup"><span data-stu-id="228ef-358">When designing the route, it is tempting to try to model the real world exactly with all the steps the production goes through.</span></span> <span data-ttu-id="228ef-359">Chociaż może to być przydatne w niektórych przypadkach, nie jest dobrym rozwiązaniem, ponieważ model, na którym musi działać aparat, rośnie (zarówno pod względem zadań, jak i ograniczeń), a w celu wstawienia i zaktualizowania zadań i rezerwacji zdolności produkcyjnych więcej będzie wykonywanych instrukcji SQL.</span><span class="sxs-lookup"><span data-stu-id="228ef-359">While this can be useful in some cases, it is not good for the performance as the model the engine needs to work on gets larger (both in terms of jobs and constraints) and more SQL statements will be executed for insertion and update of the jobs and capacity reservations.</span></span> <span data-ttu-id="228ef-360">Ponadto istnieje efekt niższego rzędu powodujący konieczność raportowania postępu na zadaniach, który można ograniczyć przez automatyczne księgowania.</span><span class="sxs-lookup"><span data-stu-id="228ef-360">Also, there is the downstream effect of having to eventually report progress on the jobs, which can be mitigated with automatic postings.</span></span> <span data-ttu-id="228ef-361">Jeśli dane nie są używane do niczego, tworzy to niepotrzebne obciążenie.</span><span class="sxs-lookup"><span data-stu-id="228ef-361">If the data is not used for anything, it creates unnecessary load.</span></span>

<span data-ttu-id="228ef-362">Zalecane jest tworzenie tylko operacji, które są niezbędne do planowania (zazwyczaj są to zasoby powodujące powstanie wąskiego gardła) i/lub wyceny.</span><span class="sxs-lookup"><span data-stu-id="228ef-362">We recommend that you only create operations that are strictly needed for scheduling (which will typically be the bottleneck resources) and/or costing purposes.</span></span> <span data-ttu-id="228ef-363">Można również zgrupować wiele mniejszych operacji w jedną większą operację, która reprezentuje większą część procesu.</span><span class="sxs-lookup"><span data-stu-id="228ef-363">Alternatively you should group many smaller distinct operations into one larger operation that represents a greater part of the process.</span></span>

### <a name="many-applicable-resources-for-an-operation"></a><span data-ttu-id="228ef-364">Wiele odpowiednich zasobów dla operacji</span><span class="sxs-lookup"><span data-stu-id="228ef-364">Many applicable resources for an operation</span></span>

<span data-ttu-id="228ef-365">Liczba odpowiednich zasobów dla operacji jest określona przez zapotrzebowanie na zasoby określone w relacji operacji.</span><span class="sxs-lookup"><span data-stu-id="228ef-365">The number of applicable resources for an operation is determined by the resource requirements set on the operation relation.</span></span> <span data-ttu-id="228ef-366">Wymaganie może dotyczyć konkretnego (pojedynczego) zasobu lub może być oparte na członkostwie zasobu w grupie zasobów lub możliwości produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-366">The requirement can either be for a specific (individual) resource or it can be based on the resource's membership of a resource group or capability.</span></span>

<span data-ttu-id="228ef-367">Jeśli planowanie nie jest wykonywane przy użyciu ograniczonych zdolności produkcyjnych, a wszystkie odpowiednie zasoby mają ten sam kalendarz i efektywność, aparat planowania będzie zawsze kontynuować pobieranie tego zasobu dla operacji, ale tylko po próbie sprawdzenia, czy wszystkie odpowiednie zasoby nie są „lepsze” niż inne.</span><span class="sxs-lookup"><span data-stu-id="228ef-367">If scheduling is not done using finite capacity and all the applicable resources have the same calendar and efficiency, then the scheduling engine will always end up picking the same resource for an operation, but only after trying all the applicable resources to check if there is one that is "better" than the others.</span></span> <span data-ttu-id="228ef-368">W takim przypadku obciążenie planowania może być znacznie zmniejszone przez stałe przypisanie konkretnego zasobu do operacji w czasie projektowania marszruty.</span><span class="sxs-lookup"><span data-stu-id="228ef-368">In this case, the load of the scheduling can be greatly reduced simply by always assigning a specific resource to the operation at the route design time.</span></span>

### <a name="route-with-parallel-operations"></a><span data-ttu-id="228ef-369">Marszruta z równoległymi operacjami</span><span class="sxs-lookup"><span data-stu-id="228ef-369">Route with parallel operations</span></span>

<span data-ttu-id="228ef-370">Chociaż operacje równoległe (podstawowe/pomocnicze) to zaawansowane narzędzie do modelowania scenariuszy, np. gdy maszyna i operator, są potrzebne do wykonania określonego zadania, to również źródło wielu problemów z wydajnością.</span><span class="sxs-lookup"><span data-stu-id="228ef-370">While parallel operations (primary/secondary) are a powerful tool to model scenarios like when a machine and an operator are both needed to perform a specific task, it is also the source of many performance issues.</span></span> <span data-ttu-id="228ef-371">Jeśli zapotrzebowanie dla konkretnego zasobu jest przypisane zarówno do operacji głównej, jak i pomocniczej, zwykle nie jest to problem.</span><span class="sxs-lookup"><span data-stu-id="228ef-371">If a requirement for a specific individual resource is assigned to both the primary and secondary operation, it is typically not a problem.</span></span> <span data-ttu-id="228ef-372">Jeśli jednak istnieje wiele możliwych zasobów dla każdej z tych operacji, zwiększa to znacznie złożoność obliczeń w planowaniu.</span><span class="sxs-lookup"><span data-stu-id="228ef-372">But if there are many possible resources for each of the operations, then it adds significant computational complexity to the scheduling.</span></span>

<span data-ttu-id="228ef-373">Alternatywą dla stosowania równoległych operacji jest modelowanie par jako zasobów „wirtualnych” (będą one oznaczać zespół, który zawsze będzie się łączyć z daną operacją) lub po prostu niemodelowanie jednej z operacji, jeśli nie powoduje powstania wąskiego gardła.</span><span class="sxs-lookup"><span data-stu-id="228ef-373">An alternative to using parallel operations is either to model the pairs as "virtual" resources (which will then represent the team that always goes together for the operation) or to simply not model one of the operations if it doesn't represent a bottleneck.</span></span>

### <a name="route-with-quantity-of-resources-higher-than-1"></a><span data-ttu-id="228ef-374">Marszruta zawierająca więcej niż 1 zasób</span><span class="sxs-lookup"><span data-stu-id="228ef-374">Route with quantity of resources higher than 1</span></span>

<span data-ttu-id="228ef-375">W przypadku ustawienia ilości zasobów potrzebnych do wykonania operacji na więcej niż jeden w praktyce jest to tak samo, co użycie operacji podstawowych/drugorzędnych, ponieważ do aparatu jest wysyłanych wiele zadań równoległych.</span><span class="sxs-lookup"><span data-stu-id="228ef-375">If setting the quantity of resources needed for an operation higher than one, then it results effectively the same as using primary/secondary operations because multiple parallel jobs are sent to the engine.</span></span> <span data-ttu-id="228ef-376">Jednak w tym przypadku nie jest dostępna opcja stosowania konkretnych przydziałów zasobów, ponieważ ilość wyższa niż jeden wymaga, aby dla danej operacji był dostępny więcej niż jeden zasób.</span><span class="sxs-lookup"><span data-stu-id="228ef-376">However, for this case there is not an option of using specific resource assignments, because a quantity higher than one requires that more than one resource is applicable for the operation.</span></span>

### <a name="excessive-use-of-finite-capacity"></a><span data-ttu-id="228ef-377">Nadmierne używanie ograniczonych zdolności produkcyjnych</span><span class="sxs-lookup"><span data-stu-id="228ef-377">Excessive use of finite capacity</span></span>

<span data-ttu-id="228ef-378">Użycie ograniczonych zdolności produkcyjnych wymaga, aby aparat ładował informacje o zdolnościach produkcyjnych z bazy danych i miał narzut obliczeniowy, ponieważ znalezienie rozwiązania jest trudniejsze w środowiskach, w których zasoby są zarezerwowane blisko ich maksymalnych zdolności produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-378">Use of finite capacity requires the engine to load the capacity information from a database and can have a computational overhead because it will be harder to find a solution especially in environments where the resources are booked close to their maximum capacity.</span></span> <span data-ttu-id="228ef-379">W związku z tym ważne jest dokładne oszacowanie, czy zasób naprawdę wymaga użycia ograniczonych zdolności produkcyjnych czy można go zarezerwować ponad swoje możliwości.</span><span class="sxs-lookup"><span data-stu-id="228ef-379">As a result, it is important to carefully evaluate if a resource really needs to use finite capacity or they can be overbooked.</span></span> <span data-ttu-id="228ef-380">Ponieważ istnieje różnica między zasobami z ograniczonymi zdolnościami produkcyjnymi dotyczące znaczenia ich nierezerwowania ponad możliwości, zaleca się użycie opcji wąskiego gardła dla zasobu w połączeniu z oddzielną wartością planu w sekcji „Horyzont czasowy zdolności produkcyjnych dla zasobów wąskich gardeł”.</span><span class="sxs-lookup"><span data-stu-id="228ef-380">Because there might be a difference among finite capacity resources in how important they are not to overbook, we recommend using the bottleneck option on a resource in combination with a separate value on the plan in "Capacity time fence for bottleneck resources".</span></span> <span data-ttu-id="228ef-381">Użycie koncepcji wąskiego gardła może umożliwić skrócenie horyzontu czasowego ograniczonych zdolności produkcyjnych.</span><span class="sxs-lookup"><span data-stu-id="228ef-381">Using the bottleneck concept can enable that the general finite capacity time fence can be lowered.</span></span>

### <a name="setting-hard-links"></a><span data-ttu-id="228ef-382">Ustawianie łączy stałych</span><span class="sxs-lookup"><span data-stu-id="228ef-382">Setting hard links</span></span>

<span data-ttu-id="228ef-383">Standardowy typ łącza marszruty jest *miękki* , co oznacza, że jest dozwolony odstęp czasowy między godziną zakończenia jednej operacji a początkiem następnej.</span><span class="sxs-lookup"><span data-stu-id="228ef-383">The standard link type of the route is *soft* , which means that a time gap is allowed between the finishing time of one operation and the start of the next.</span></span> <span data-ttu-id="228ef-384">Zezwolenie na ten proces może mieć negatywny efekt: jeśli materiały lub zdolności produkcyjne nie są dostępne dla jednej z operacji wykonywanych przez bardzo długi czas, produkcja może być w dłuższym czasie bezczynna, co oznacza możliwy wzrost ilości prac w toku.</span><span class="sxs-lookup"><span data-stu-id="228ef-384">Allowing this can have the unfortunate effect that, if materials or capacity are not available for one of the operations for a very long time, the production could be idle for quite a while, meaning a possible increase of work in progress.</span></span> <span data-ttu-id="228ef-385">Nie będzie to miało miejsca w przypadku użycia łączy stałych, ponieważ zakończenie i rozpoczęcie muszą być dokładnie zsynchronizowane.</span><span class="sxs-lookup"><span data-stu-id="228ef-385">This will not happen with hard links because the finish and start must align perfectly.</span></span> <span data-ttu-id="228ef-386">Jednak ustawienie łączy stałych sprawia, że problem planowania jest trudniejszy, ponieważ przedziały czasu pracy i zdolności produkcyjnych muszą być obliczane dla dwóch zasobów operacji.</span><span class="sxs-lookup"><span data-stu-id="228ef-386">But setting hard links makes the scheduling problem more difficult because working time and capacity intersections must be calculated for the two resources of the operations.</span></span> <span data-ttu-id="228ef-387">Jeśli istnieją również operacje równoległe, powoduje to dodanie znacznego czasu obliczeniowego.</span><span class="sxs-lookup"><span data-stu-id="228ef-387">If there are also parallel operations involved, this adds significant computational time.</span></span> <span data-ttu-id="228ef-388">Jeśli zasoby dwóch operacji mają różne kalendarze, które się wcale nie nakładają, problemu nie da się rozwiązać.</span><span class="sxs-lookup"><span data-stu-id="228ef-388">If the resources of the two operations have different calendars that don't overlap at all, the problem is unsolvable.</span></span>

<span data-ttu-id="228ef-389">Zaleca się używanie łączy stałych tylko wtedy, gdy jest to absolutnie konieczne i należy dokładnie przeanalizować, czy jest to konieczne dla każdej operacji związanej z daną marszrutą.</span><span class="sxs-lookup"><span data-stu-id="228ef-389">We recommend using hard links only when strictly necessary, and carefully consider if it is necessary for each operation of the route.</span></span>

<span data-ttu-id="228ef-390">Aby zmniejszyć ilość pracy w toku bez stosowania stałych łączy, należy zaplanować zlecenie dwa razy, zmieniając na przeciwny kierunek drugiego przebiegu.</span><span class="sxs-lookup"><span data-stu-id="228ef-390">To reduce the work in progress without applying hard links, a trick is to schedule the order twice with changing to the opposite direction for the second pass.</span></span> <span data-ttu-id="228ef-391">Jeśli pierwszy harmonogram został wykonany wstecz od daty dostawy, drugi powinien zostać wykonany do przodu od zaplanowanej daty rozpoczęcia.</span><span class="sxs-lookup"><span data-stu-id="228ef-391">If the first schedule was done backwards from delivery date, then the second should be done forward from the scheduled start date.</span></span> <span data-ttu-id="228ef-392">Dzięki temu zadania będą kompresowane w możliwie największym stopniu, aby praca w toku była zminimalizowana.</span><span class="sxs-lookup"><span data-stu-id="228ef-392">This will result in the jobs being compressed as much as possible so that the work in progress is minimized.</span></span>

### <a name="separate-calendar-for-each-resource"></a><span data-ttu-id="228ef-393">Osobny kalendarz dla każdego zasobu</span><span class="sxs-lookup"><span data-stu-id="228ef-393">Separate calendar for each resource</span></span>

<span data-ttu-id="228ef-394">Jednym z głównych źródeł danych dla aparatu planowania są informacje kalendarza, których ładowanie z bazy danych może być kosztowne.</span><span class="sxs-lookup"><span data-stu-id="228ef-394">One of the main sources of data for the scheduling engine is calendar information, which can be expensive to load from the database.</span></span> <span data-ttu-id="228ef-395">Ponieważ kalendarze są generowane na podstawie szablonów, kuszące jest generowanie kalendarza dla każdego zasobu, a następnie korygowanie informacji w tym kalendarzu, gdy zasób ma przestoje i inne problemy.</span><span class="sxs-lookup"><span data-stu-id="228ef-395">Because calendars are generated based on templates, it would be tempting to generate a calendar for each resource and then adjust the information in this calendar when the resource has downtime and other issues.</span></span> <span data-ttu-id="228ef-396">Jednak ten sposób poważnie ogranicza zdolność aparatu do buforowania danych kalendarza, ponieważ wymaga to żądania nowych danych dla każdego zasobu i może być dużym źródłem problemów z wydajnością.</span><span class="sxs-lookup"><span data-stu-id="228ef-396">However, doing this will severely limit the engines ability to cache the calendar data as it would need to request new data for each resource and can be a large source of performance problems.</span></span> <span data-ttu-id="228ef-397">Zamiast tego zaleca się ponowne użycie kalendarzy w możliwie największym stopniu między zasobami, a następnie kontrolowanie zmian czasu przestojów przez przypisanie do okresu innego identyfikatora kalendarza.</span><span class="sxs-lookup"><span data-stu-id="228ef-397">Instead, we recommend that you reuse the calendars as much as possible between the resources, and then control downtime changes by assigning a different calendar ID for a period.</span></span>

### <a name="high-number-of-working-time-slots-per-calendar-day"></a><span data-ttu-id="228ef-398">Duża liczba przedziałów czasu pracy dziennie w kalendarzu</span><span class="sxs-lookup"><span data-stu-id="228ef-398">High number of working time slots per calendar day</span></span>

<span data-ttu-id="228ef-399">Ponieważ działanie aparatu polega na sprawdzeniu zdolności produkcyjnych poszczególnych przedziałów czasu, korzystne jest zminimalizowanie liczby gniazd czasu na dzień kalendarzowy.</span><span class="sxs-lookup"><span data-stu-id="228ef-399">Because the engine works by examining time slots one-by-one for capacity, it is beneficial to minimize the number of time slots per calendar day.</span></span> <span data-ttu-id="228ef-400">Można to zrobić na przykład analizując, czy w wynikowym harmonogramu jest ważna informacja, że co godzinę pracownicy mają 5-minutową przerwę.</span><span class="sxs-lookup"><span data-stu-id="228ef-400">This could be done, for example, by considering whether it's important for the resulting schedule to reflect that workers have a 5-minute break every hour.</span></span>

### <a name="large-or-none-scheduling-timeouts"></a><span data-ttu-id="228ef-401">Duże (lub brak) limity czasu planowania</span><span class="sxs-lookup"><span data-stu-id="228ef-401">Large (or none) scheduling timeouts</span></span>

<span data-ttu-id="228ef-402">Wydajność aparatu planowania można zoptymalizować przy użyciu parametrów znajdujących się na stronie **Parametry planowania**.</span><span class="sxs-lookup"><span data-stu-id="228ef-402">Scheduling engine performance can be optimized using parameters found on the **Scheduling parameters** page.</span></span> <span data-ttu-id="228ef-403">Ustawienia **Limit czasu planowania włączony** i **Limit czasu optymalizacji włączony** muszą zawsze mieć wartość **Tak**.</span><span class="sxs-lookup"><span data-stu-id="228ef-403">The **Scheduling timeout enabled** and **Scheduling optimization timeout enabled** settings should always be set to **Yes**.</span></span> <span data-ttu-id="228ef-404">Jeśli jest ustawiona wartość **Nie** , planowanie może działać bez ograniczeń, jeśli utworzono niemożliwą do realizacji marszrutę z wieloma opcjami.</span><span class="sxs-lookup"><span data-stu-id="228ef-404">If set to **No** , the scheduling can potentially run infinitely if an unfeasible route with many options has been created.</span></span>

<span data-ttu-id="228ef-405">Wartość opcji **Maksymalny czas planowania na sekwencję** określa liczbę sekund, przez jaką można najdłużej próbować znaleźć rozwiązanie dla jednej sekwencji (w większości przypadków sekwencja odpowiada jednemu zamówieniu).</span><span class="sxs-lookup"><span data-stu-id="228ef-405">The value for **Maximum scheduling time per sequence** controls how many seconds can, at most, be spent trying to find a solution for a single sequence (in most cases a sequence corresponds to a single order).</span></span> <span data-ttu-id="228ef-406">Wartość, która ma być używana w tym miejscu, zależy od złożoności marszruty i ustawień, takich jak ograniczone zdolności produkcyjne, a maksymalnie 30 sekund jest dobrą wartością początkową.</span><span class="sxs-lookup"><span data-stu-id="228ef-406">The value to use here highly depends on the complexity of the route and settings like finite capacity, ut a maximum of about 30 seconds is a good starting point.</span></span>

<span data-ttu-id="228ef-407">Wartość **Limit czasu prób optymalizacji** umożliwia określenie liczby sekund, przez jaką można szukać lepszego rozwiązania niż pierwotnie znalezione.</span><span class="sxs-lookup"><span data-stu-id="228ef-407">The value for **Optimization attempts timeout** controls how many seconds can at most be used to find a better solution than the one originally found.</span></span> <span data-ttu-id="228ef-408">Ma to wpływ tylko na marszruty, które używają równoległych operacji, ponieważ są one niezbędne do testowania różnych kombinacji.</span><span class="sxs-lookup"><span data-stu-id="228ef-408">This will only influence routes that are using parallel operations as these make it necessary to test different combinations.</span></span>

> [!NOTE]
> <span data-ttu-id="228ef-409">Wartości ustawione dla limitów czasu zostaną zastosowane zarówno do planowania zwolnionych zleceń produkcyjnych, jak i planowanych zamówień w ramach modułu MRP.</span><span class="sxs-lookup"><span data-stu-id="228ef-409">The values set for the timeouts will be applied both for scheduling of released production orders and of planned orders as part of MRP.</span></span> <span data-ttu-id="228ef-410">Dlatego ustawienie bardzo wysokich wartości może znacząco zwiększyć czas działania procesu MRP w przypadku działania planu z wieloma zaplanowanymi zleceniami produkcyjnymi.</span><span class="sxs-lookup"><span data-stu-id="228ef-410">As a result, setting very high values could significantly add to the run time of MRP when running for a plan with many planned production orders.</span></span>
