---
title: Ulepszenia funkcji księgowania zestawień
description: W tym temacie opisano ulepszenia, które zostały wprowadzone w funkcji księgowania zestawień.
author: josaw1
manager: AnnBe
ms.date: 05/14/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: retail
ms.author: anpurush
ms.search.validFrom: 2018-04-30
ms.dyn365.ops.version: AX 7.0.0, Retail July 2017 update
ms.openlocfilehash: 1e3fc0e8cb5c9a6cc7729dfbddd5d918a1d6bdb5
ms.sourcegitcommit: 0099fb24f5f40ff442020b488ef4171836c35c48
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/23/2019
ms.locfileid: "2653378"
---
# <a name="improvements-to-statement-posting-functionality"></a><span data-ttu-id="87418-103">Ulepszenia funkcji księgowania zestawień</span><span class="sxs-lookup"><span data-stu-id="87418-103">Improvements to statement posting functionality</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="87418-104">W tym temacie opisano pierwszy zestaw ulepszeń, które zostały wprowadzone w funkcji księgowania zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-104">This topic describes the first set of improvements that have been made to the statement posting feature.</span></span> <span data-ttu-id="87418-105">Te ulepszenia są dostępne w programie Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span><span class="sxs-lookup"><span data-stu-id="87418-105">These improvements are available in Microsoft Dynamics 365 for Finance and Operations 7.3.2.</span></span>

## <a name="activation"></a><span data-ttu-id="87418-106">Aktywacja</span><span class="sxs-lookup"><span data-stu-id="87418-106">Activation</span></span>

<span data-ttu-id="87418-107">Domyślnie podczas instalowania programu Finance and Operations 7.3.2 jest w nim konfigurowane używanie starszej funkcji księgowania zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-107">By default, during deployment of Finance and Operations 7.3.2, the program is set up to use the legacy feature for statement postings.</span></span> <span data-ttu-id="87418-108">Aby włączyć ulepszoną funkcję księgowania zestawień, należy wyłączyć dla niej klucz konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="87418-108">To enable the improved statement posting feature, you must turn on the configuration key for it.</span></span>

- <span data-ttu-id="87418-109">Wybierz kolejno opcje **Administrowanie systemem** \> **Ustawienia** \> **Konfiguracja licencji**, a następnie w węźle **Handel detaliczny** wyczyść pole wyboru **Zestawienia handlu detalicznego (starsze)**, po czym zaznacz pole wyboru **Zestawienia handlu detalicznego**.</span><span class="sxs-lookup"><span data-stu-id="87418-109">Go to **System administration** \> **Setup** \> **License configuration**, and then, under the **Retail** node, clear the **Retail statements (legacy)** check box, and select the **Retail statements** check box.</span></span>

<span data-ttu-id="87418-110">Po włączeniu nowego klucza konfiguracji **Zestawienia handlu detalicznego** jest dostępny nowy element menu o nazwie **Zestawienia handlu detalicznego**.</span><span class="sxs-lookup"><span data-stu-id="87418-110">When the new **Retail statements** configuration key is turned on, a new menu item that is named **Retail statements** is available.</span></span> <span data-ttu-id="87418-111">Ten element menu umożliwia ręczne tworzenie, obliczanie i księgowanie zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-111">This menu item lets you manually create, calculate, and post statements.</span></span> <span data-ttu-id="87418-112">Każde zestawienie, które powoduje błąd podczas używania procesu księgowania wsadowego, będzie również dostępne w tym elemencie menu.</span><span class="sxs-lookup"><span data-stu-id="87418-112">Any statement that causes an error when the batch posting process is used will also be available through this menu item.</span></span> <span data-ttu-id="87418-113">(Gdy jest włączony klucz konfiguracji **Zestawienia handlu detalicznego (starsze)**, ten element menu nosi nazwę **Otwórz zestawienia**).</span><span class="sxs-lookup"><span data-stu-id="87418-113">(When the **Retail statements (legacy)** configuration key is turned on, the menu item is named **Open statements**.)</span></span>

<span data-ttu-id="87418-114">Retail zawiera następujące mechanizmy sprawdzania poprawności, które dotyczą tych kluczy konfiguracji:</span><span class="sxs-lookup"><span data-stu-id="87418-114">Retail includes the following validations that are related to these configuration keys:</span></span>

- <span data-ttu-id="87418-115">Oba klucze konfiguracji nie mogą być włączone w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="87418-115">Both configuration keys can't be turned on at the same time.</span></span>
- <span data-ttu-id="87418-116">Ten sam klucz konfiguracji musi być używany do wszystkich operacji wykonywanych na danym zestawieniu podczas jego całego cyklu (tworzenie, obliczanie, czyszczenie, księgowanie itd.).</span><span class="sxs-lookup"><span data-stu-id="87418-116">The same configuration keys must be used for all the operations that are performed on a given statement during its lifecycle (Create, Calculate, Clear, Post, and so on).</span></span> <span data-ttu-id="87418-117">Na przykład nie można utworzyć i obliczyć zestawienia przy włączonym kluczu konfiguracji **Zestawienia handlu detalicznego (starsze)**, a następnie próbować zaksięgować to samo zestawienie przy włączonym kluczu konfiguracji **Zestawienia handlu detalicznego** .</span><span class="sxs-lookup"><span data-stu-id="87418-117">For example, you can't create and calculate a statement while the **Retail statement (legacy)** configuration key is turned on, and then try to post the same statement while the **Retail statement** configuration key is turned on.</span></span>

> [!NOTE]
> <span data-ttu-id="87418-118">Zalecamy, aby używać klucza konfiguracji **Zestawienia handlu detalicznego** zapewniającego dostęp do ulepszonej funkcji księgowania zestawień, chyba że istnieją istotne powody do używania klucza konfiguracji **Zestawienia handlu detalicznego (starsze)**.</span><span class="sxs-lookup"><span data-stu-id="87418-118">We recommend that you use the **Retail statements** configuration key for the improved statement posting feature, unless you have compelling reasons to use the **Retail statements (legacy)** configuration key instead.</span></span> <span data-ttu-id="87418-119">Microsoft będzie nadal inwestować w ulepszoną funkcję księgowania zestawień, dlatego ważne jest, aby użytkownicy jak najwcześniej zaczęli się z nią oswajać.</span><span class="sxs-lookup"><span data-stu-id="87418-119">Microsoft will continue to invest in the new and improved statement posting feature, and it's important that you switch to it at the earliest opportunity to benefit from it.</span></span> <span data-ttu-id="87418-120">Starsza funkcja księgowania zestawień będzie wycofywana, począwszy od wersji 8.0.</span><span class="sxs-lookup"><span data-stu-id="87418-120">The legacy statement posting feature is deprecated starting in 8.0 release.</span></span>

## <a name="setup"></a><span data-ttu-id="87418-121">Konfiguracja</span><span class="sxs-lookup"><span data-stu-id="87418-121">Setup</span></span>

<span data-ttu-id="87418-122">W ramach ulepszania funkcji księgowania zestawień wprowadzono trzy nowe parametry na skróconej karcie **Zestawienie** dostępnej na karcie **Księgowanie** na stronie **Parametry sieci sprzedaży**:</span><span class="sxs-lookup"><span data-stu-id="87418-122">As part of the improvements to the statement posting feature, three new parameters have been introduced on the **Statement** FastTab on the **Posting** tab of the **Retail parameters** page:</span></span>

- <span data-ttu-id="87418-123">**Wyłącz czyszczenie wierszy zestawienia** — Ta opcja ma zastosowanie tylko do starszej funkcji księgowania zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-123">**Disable clear statement** – This option is applicable only for the legacy statement posting feature.</span></span> <span data-ttu-id="87418-124">Zalecamy ustawienie w niej wartości **Nie**, aby uniemożliwić użytkownikom czyszczenie zestawień będących w stanie częściowego zaksięgowania.</span><span class="sxs-lookup"><span data-stu-id="87418-124">We recommend that you set this option to **No** to prevent users from clearing statements that are in a semi-posted state.</span></span> <span data-ttu-id="87418-125">Wyczyszczenie zestawień w stanie częściowego zaksięgowania powoduje uszkodzenie danych.</span><span class="sxs-lookup"><span data-stu-id="87418-125">If statements that are in a semi-posted state are cleared, data becomes corrupted.</span></span> <span data-ttu-id="87418-126">Należy ustawić w tej opcji wartość **Tak** tylko w wyjątkowych okolicznościach.</span><span class="sxs-lookup"><span data-stu-id="87418-126">You should set this option to **Yes** only in exceptional circumstances.</span></span>
- <span data-ttu-id="87418-127">**Rezerwuj zapasy podczas obliczania** — zalecamy, aby do rezerwowania zapasów używać zadania wsadowego **Księgowanie zapasu**, a w tej opcji ustawić wartość **Nie**.</span><span class="sxs-lookup"><span data-stu-id="87418-127">**Reserve inventory during calculation** – We recommend that you use the **Post inventory** batch job for inventory reservation, and that you set this option to **No**.</span></span> <span data-ttu-id="87418-128">Gdy w tej opcji zostanie ustawiona wartość **Nie**, ulepszona funkcja księgowania zestawień nie próbuje utworzyć wpisów rezerwacji zapasów podczas obliczania (jeśli wpisy nie zostały jeszcze utworzone za pomocą zadania wsadowego **Księgowanie zapasu**).</span><span class="sxs-lookup"><span data-stu-id="87418-128">When this option is set to **No**, the improved statement posting feature doesn't try to create inventory reservation entries at the time of calculation (if entries weren't already created through the **Post inventory** batch job).</span></span> <span data-ttu-id="87418-129">Zamiast tego funkcja tworzy wpisy rezerwacji zapasów tylko podczas księgowania.</span><span class="sxs-lookup"><span data-stu-id="87418-129">Instead, the feature creates inventory reservation entries only at the time of posting.</span></span> <span data-ttu-id="87418-130">Ta implementacja została wprowadzona specjalnie w związku z faktem, że okno czasowe między procesem obliczania a procesem księgowania jest zazwyczaj bardzo krótkie.</span><span class="sxs-lookup"><span data-stu-id="87418-130">This implementation was a design choice and was based on the fact that the time window between the calculation process and the posting process is typically small.</span></span> <span data-ttu-id="87418-131">Jednak jeśli chcesz rezerwować zapasy podczas obliczania, ustaw w tej opcji wartość **Tak**.</span><span class="sxs-lookup"><span data-stu-id="87418-131">However, if you want to reserve inventory at the time of calculation, you can set this option to **Yes**.</span></span>

    <span data-ttu-id="87418-132">Starsza funkcja księgowania zestawień zawsze rezerwuje zapasy w trakcie procesu obliczania zestawienia (jeżeli rezerwacja nie została jeszcze dokonana za pomocą zadania wsadowego **Księgowanie zapasu**), niezależnie od ustawienia tej opcji.</span><span class="sxs-lookup"><span data-stu-id="87418-132">The legacy statement posting feature always reserves inventory during the statement calculation process (if reservation wasn't already done through the **Post inventory** batch job), regardless of the setting of this option.</span></span>

- <span data-ttu-id="87418-133">**Wymagane wyłączenie zliczania** — Jeśli ta opcja jest ustawiona na **Tak**, proces księgowania zestawienia jest kontynuowany, nawet gdy różnica między kwotą obliczoną a kwotą transakcji wykracza poza próg zdefiniowany na skróconej karcie **Zestawienie** w oknie Sklepy sieci sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-133">**Disable counting required** – When this option is set to **Yes**, the posting process for a statement continues, even if the difference between the counted amount and the transaction amount on the statement is outside the threshold that is defined on the **Statement** FastTab for Retail stores.</span></span>

<span data-ttu-id="87418-134">Ponadto w skróconej karcie **przetwarzania wsadowego** na karcie **Księgowanie** na stronie **parametry sieci sprzedaży** wprowadzono następujące parametry:</span><span class="sxs-lookup"><span data-stu-id="87418-134">Additionally, the following parameters have been introduced on the **Batch processing** FastTab on the **Posting** tab of the **Retail parameters** page:</span></span> 

- <span data-ttu-id="87418-135">**Maksymalna liczba równoległych operacji księgowania zestawień** — to pole określa liczbę zadań wsadowych, które będą używane do księgowania wielu zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-135">**Maximum number of parallel statement posting** – This field defines the number of batch tasks that will be used to post multiple statements.</span></span> 
- <span data-ttu-id="87418-136">**Maksymalny wątek na potrzeby przetwarzania zamówień na zestawienie** — to pole reprezentuje maksymalną liczbę wątków używanych przez zadanie wsadowe księgowania zestawienia do tworzenia i fakturowania zamówień sprzedaży dla jednego zestawienia.</span><span class="sxs-lookup"><span data-stu-id="87418-136">**Max thread for order processing per statement** – This field represents the maximum number of threads used by the statement posting batch job to create and invoice sales orders for a single statement.</span></span> <span data-ttu-id="87418-137">Łączna liczba wątków, które będą używane przez proces księgowania zestawienia, zostanie obliczona na podstawie wartości w tym parametrze pomnożonej przez wartość w polu parametru **Maksymalna liczba równoległych operacji księgowania zestawień**.</span><span class="sxs-lookup"><span data-stu-id="87418-137">The total number of threads that will be used by the statement posting process will be computed based on the value in this parameter multiplied by the value in the **Maximum number of parallel statement posting** parameter.</span></span> <span data-ttu-id="87418-138">Ustawienie zbyt dużej wartości tego parametru może mieć negatywny wpływ na wydajność procesu księgowania zestawienia.</span><span class="sxs-lookup"><span data-stu-id="87418-138">Setting the value of this parameter too high can negatively impact the performance of the statement posting process.</span></span>
- <span data-ttu-id="87418-139">**Maksymalna liczba wierszy transakcji uwzględnionych w agregacji** — to pole określa liczbę wierszy transakcji, które zostaną uwzględnione w jednej zagregowanej transakcji przed utworzeniem nowej.</span><span class="sxs-lookup"><span data-stu-id="87418-139">**Max transaction lines included in aggregation** – This field defines the number of transaction lines that will be included in a single aggregated transaction before a new one is created.</span></span> <span data-ttu-id="87418-140">Zagregowane transakcje są tworzone na podstawie różnych kryteriów agregacji, takich jak odbiorca, Data firmy lub wymiary finansowe.</span><span class="sxs-lookup"><span data-stu-id="87418-140">Aggregated transactions are created based on different aggregation criteria such as customer, business date, or financial dimensions.</span></span> <span data-ttu-id="87418-141">Należy pamiętać, że wiersze z pojedynczej transakcji detalicznej nie będą dzielone między różne zagregowane transakcje.</span><span class="sxs-lookup"><span data-stu-id="87418-141">It is important to note that the lines from a single retail transaction will not be split across different aggregated transactions.</span></span> <span data-ttu-id="87418-142">Oznacza to, że istnieje możliwość, że liczba wierszy w zagregowanej transakcji jest nieco wyższa lub niższa w zależności od czynników, takich jak liczba odrębnych produktów.</span><span class="sxs-lookup"><span data-stu-id="87418-142">This means that there is a possibility that the number of lines in a aggregated transaction is slightly higher or lower based on factors such as number of distinct products.</span></span>
- <span data-ttu-id="87418-143">**Maksymalna liczba wątków sprawdzania poprawność transakcji w sklepie** — to pole określa liczbę wątków, które będą używane do sprawdzania poprawności transakcji detalicznych.</span><span class="sxs-lookup"><span data-stu-id="87418-143">**Maximum number of threads to validate store transactions** – This field defines the number of threads that will be used to validate retail transactions.</span></span> <span data-ttu-id="87418-144">Sprawdzanie transakcji detalicznych jest wymaganym krokiem, który musi nastąpić, zanim transakcje będą mogły zostać uwzględnione w zestawieniach.</span><span class="sxs-lookup"><span data-stu-id="87418-144">Validating retail transactions is a required step that needs to occur before the transactions can be pulled into the statements.</span></span> <span data-ttu-id="87418-145">Ponadto konieczne jest zdefiniowanie ustawienia **Produkt karty upominkowej** na skróconej karcie **Karta upominkowa** dostępnej na karcie **Księgowanie** na stronie **Parametry sieci sprzedaży**.</span><span class="sxs-lookup"><span data-stu-id="87418-145">You also need to define a **Gift card product** on the **Gift card** FastTab on the **Posting** tab of the **Retail parameters** page.</span></span> <span data-ttu-id="87418-146">Ta zasada obowiązuje, nawet jeśli organizacja nie używa żadnych kart upominkowych.</span><span class="sxs-lookup"><span data-stu-id="87418-146">This needs to defined even if gift cards are not used by the organization.</span></span>

> [!NOTE]
> <span data-ttu-id="87418-147">Wszystkie ustawienia i parametry związane z księgowaniem zestawień, które są zdefiniowane w oknie Sklepy sieci sprzedaży i na stronie **Parametry sieci sprzedaży**, mają zastosowanie do ulepszonej funkcji księgowania zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-147">All settings and parameters that are related to statement postings, and that are defined on Retail stores and on the **Retail parameters** page, are applicable to the improved statement posting feature.</span></span>

## <a name="processing"></a><span data-ttu-id="87418-148">Przetwarzanie</span><span class="sxs-lookup"><span data-stu-id="87418-148">Processing</span></span>

<span data-ttu-id="87418-149">Zestawienia mogą być obliczane i księgowane wsadowo za pomocą elementów menu **Oblicz zestawienia w partii** i **Zaksięguj zestawienia w partii**.</span><span class="sxs-lookup"><span data-stu-id="87418-149">Statements can be calculated and posted in batch using the menu items **Calculate statements in batch** and **Post statements in batch**.</span></span> <span data-ttu-id="87418-150">Alternatywnie zestawienia można ręcznie obliczać i księgować przy użyciu elementu menu **Zestawienia handlu detalicznego** dostępnego w ulepszonej funkcji księgowania zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-150">Alternatively, statements can be manually calculated and posted by using the **Retail statements** menu item that the improved statement posting feature provides.</span></span>

<span data-ttu-id="87418-151">Proces oraz etapy obliczania i księgowania zestawień wsadowo są takie same, jak w starszej funkcji księgowania zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-151">The process and steps for calculating and posting statements in a batch are the same as they were in the legacy statement posting feature.</span></span> <span data-ttu-id="87418-152">Jednak wprowadzono znaczne udoskonalenia w bazowym przetwarzaniu zestawień w systemach zaplecza.</span><span class="sxs-lookup"><span data-stu-id="87418-152">However, significant improvements have been made in the core back-end processing of the statements.</span></span> <span data-ttu-id="87418-153">Te ulepszenia zwiększają odporność procesu na ewentualne problemy oraz oferują lepszy wgląd w stany i informacje o błędach.</span><span class="sxs-lookup"><span data-stu-id="87418-153">These improvements make the process more resilient, and provide for better visibility into the states and error information.</span></span> <span data-ttu-id="87418-154">Dzięki temu użytkownicy mogą usuwać główne przyczyny błędów, a następnie kontynuować proces księgowania, nie powodując uszkodzenia danych i unikając konieczności stosowania poprawek danych.</span><span class="sxs-lookup"><span data-stu-id="87418-154">Therefore, users can address the root cause of errors and then continue the posting process without causing data corruption and without causing data fixes to be required.</span></span>

<span data-ttu-id="87418-155">W poniższych sekcjach opisano niektóre najważniejsze ulepszenia funkcji księgowania zestawień, które są wyświetlane interfejsie użytkownika dla zestawień sprzedaży detalicznej i zaksięgowanych zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-155">The following sections describe some of the major improvements for the statement posting feature that appear in the user interface for retail statements and posted statements.</span></span>

### <a name="status-details"></a><span data-ttu-id="87418-156">Szczegóły stanu</span><span class="sxs-lookup"><span data-stu-id="87418-156">Status details</span></span>

<span data-ttu-id="87418-157">We wszystkich procesach obliczania i księgowania wprowadzono nowy model stanów w procedurze księgowania zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-157">A new state model has been introduced in the statement posting routine across the calculation and posting processes.</span></span>

<span data-ttu-id="87418-158">W poniższej tabeli opisano różne stany i ich kolejność w procesie obliczania.</span><span class="sxs-lookup"><span data-stu-id="87418-158">The following table describes the various states and their order during the calculation process.</span></span>

| <span data-ttu-id="87418-159">Nr kolejny stanu</span><span class="sxs-lookup"><span data-stu-id="87418-159">State order</span></span> | <span data-ttu-id="87418-160">Stanowy</span><span class="sxs-lookup"><span data-stu-id="87418-160">State</span></span>      | <span data-ttu-id="87418-161">opis</span><span class="sxs-lookup"><span data-stu-id="87418-161">Description</span></span> |
|-------------|------------|-------------|
| <span data-ttu-id="87418-162">1</span><span class="sxs-lookup"><span data-stu-id="87418-162">1</span></span>           | <span data-ttu-id="87418-163">Rozpoczęte</span><span class="sxs-lookup"><span data-stu-id="87418-163">Started</span></span>    | <span data-ttu-id="87418-164">Zestawienie zostało utworzone i jest gotowe do obliczenia.</span><span class="sxs-lookup"><span data-stu-id="87418-164">The statement was created and is ready to be calculated.</span></span> |
| <span data-ttu-id="87418-165">2</span><span class="sxs-lookup"><span data-stu-id="87418-165">2</span></span>           | <span data-ttu-id="87418-166">Zaznaczone</span><span class="sxs-lookup"><span data-stu-id="87418-166">Marked</span></span>     | <span data-ttu-id="87418-167">Transakcje będące w zakresie zestawienia są identyfikowane na podstawie parametrów zestawienia i oznaczone identyfikatorem zestawienia.</span><span class="sxs-lookup"><span data-stu-id="87418-167">The transactions that are in scope for the statement are identified based on the statement parameters, and they are marked with the statement ID.</span></span> |
| <span data-ttu-id="87418-168">3</span><span class="sxs-lookup"><span data-stu-id="87418-168">3</span></span>           | <span data-ttu-id="87418-169">Obliczony</span><span class="sxs-lookup"><span data-stu-id="87418-169">Calculated</span></span> | <span data-ttu-id="87418-170">Wiersze zestawienia są obliczane i wyświetlane.</span><span class="sxs-lookup"><span data-stu-id="87418-170">The statement lines are computed and shown.</span></span> |

<span data-ttu-id="87418-171">W poniższej tabeli opisano różne stany i ich kolejność w procesie księgowania.</span><span class="sxs-lookup"><span data-stu-id="87418-171">The following table describes the various states and their order during the posting process.</span></span>

| <span data-ttu-id="87418-172">Nr kolejny stanu</span><span class="sxs-lookup"><span data-stu-id="87418-172">State order</span></span> | <span data-ttu-id="87418-173">Stanowy</span><span class="sxs-lookup"><span data-stu-id="87418-173">State</span></span>                   | <span data-ttu-id="87418-174">opis</span><span class="sxs-lookup"><span data-stu-id="87418-174">Description</span></span> |
|-------------|-------------------------|-------------|
| <span data-ttu-id="87418-175">1</span><span class="sxs-lookup"><span data-stu-id="87418-175">1</span></span>           | <span data-ttu-id="87418-176">Sprawdzone</span><span class="sxs-lookup"><span data-stu-id="87418-176">Checked</span></span>                 | <span data-ttu-id="87418-177">System dokonuje wielu kontroli poprawności dotyczących parametrów (na przykład opłaty za złożenie dyspozycji) oraz zestawienia i jego wierszy (na przykład różnicy między kwotą obliczoną a kwotą transakcji).</span><span class="sxs-lookup"><span data-stu-id="87418-177">Multiple validations are done that are related to parameters (for example, the disposition charge), and to the statement and statement lines (for example, the difference between the counted amount and the transaction amount).</span></span> |
| <span data-ttu-id="87418-178">2</span><span class="sxs-lookup"><span data-stu-id="87418-178">2</span></span>           | <span data-ttu-id="87418-179">Zagregowane</span><span class="sxs-lookup"><span data-stu-id="87418-179">Aggregated</span></span>              | <span data-ttu-id="87418-180">Transakcje sprzedaży dla odbiorców nazwanych i nienazwanych są agregowane na podstawie konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="87418-180">Sales transactions for named and unnamed customers are aggregated based on the configuration.</span></span> <span data-ttu-id="87418-181">Każda zagregowana transakcja jest ostatecznie konwertowana na zamówienie sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-181">Every aggregated transaction is eventually converted to a sales order.</span></span> |
| <span data-ttu-id="87418-182">3</span><span class="sxs-lookup"><span data-stu-id="87418-182">3</span></span>           | <span data-ttu-id="87418-183">Utworzono zamówienie odbiorcy</span><span class="sxs-lookup"><span data-stu-id="87418-183">Customer order created</span></span>  | <span data-ttu-id="87418-184">Na podstawie zagregowanej transakcji w systemie są tworzone zamówienia sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-184">Based on the aggregated transaction, sales orders are created in the system.</span></span> |
| <span data-ttu-id="87418-185">4</span><span class="sxs-lookup"><span data-stu-id="87418-185">4</span></span>           | <span data-ttu-id="87418-186">Zaksięgowano zamówienie odbiorcy</span><span class="sxs-lookup"><span data-stu-id="87418-186">Customer order invoiced</span></span> | <span data-ttu-id="87418-187">Zamówienia sprzedaży są księgowane.</span><span class="sxs-lookup"><span data-stu-id="87418-187">Sales orders are invoiced.</span></span> |
| <span data-ttu-id="87418-188">5</span><span class="sxs-lookup"><span data-stu-id="87418-188">5</span></span>           | <span data-ttu-id="87418-189">Zaksięgowano rabaty</span><span class="sxs-lookup"><span data-stu-id="87418-189">Discounts posted</span></span>        | <span data-ttu-id="87418-190">Na podstawie konfiguracji są księgowane arkusze rababów okresowych.</span><span class="sxs-lookup"><span data-stu-id="87418-190">Periodic discount journals are posted based on the configuration.</span></span> |
| <span data-ttu-id="87418-191">6</span><span class="sxs-lookup"><span data-stu-id="87418-191">6</span></span>           | <span data-ttu-id="87418-192">Zaksięgowano dochody/wydatki</span><span class="sxs-lookup"><span data-stu-id="87418-192">Income/expense posted</span></span>   | <span data-ttu-id="87418-193">Transakcje przychodów/wydatków są księgowane jako załączniki.</span><span class="sxs-lookup"><span data-stu-id="87418-193">Income/expense transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="87418-194">7</span><span class="sxs-lookup"><span data-stu-id="87418-194">7</span></span>           | <span data-ttu-id="87418-195">Połączono załączniki</span><span class="sxs-lookup"><span data-stu-id="87418-195">Vouchers linked</span></span>         | <span data-ttu-id="87418-196">Są tworzone arkusze płatności i łączone z odpowiednią fakturą.</span><span class="sxs-lookup"><span data-stu-id="87418-196">Payment journals are created and linked to the corresponding invoice.</span></span> |
| <span data-ttu-id="87418-197">8</span><span class="sxs-lookup"><span data-stu-id="87418-197">8</span></span>           | <span data-ttu-id="87418-198">Zaksięgowano płatności</span><span class="sxs-lookup"><span data-stu-id="87418-198">Payments posted</span></span>         | <span data-ttu-id="87418-199">Arkusze płatności są księgowane.</span><span class="sxs-lookup"><span data-stu-id="87418-199">Payment journals are posted.</span></span> |
| <span data-ttu-id="87418-200">9</span><span class="sxs-lookup"><span data-stu-id="87418-200">9</span></span>           | <span data-ttu-id="87418-201">Zaksięgowano karty upominkowe</span><span class="sxs-lookup"><span data-stu-id="87418-201">Gift cards posted</span></span>       | <span data-ttu-id="87418-202">Transakcje kartami upominkowymi są księgowane jako załączniki.</span><span class="sxs-lookup"><span data-stu-id="87418-202">Gift card transactions are posted as vouchers.</span></span> |
| <span data-ttu-id="87418-203">10</span><span class="sxs-lookup"><span data-stu-id="87418-203">10</span></span>          | <span data-ttu-id="87418-204">Opublikowano</span><span class="sxs-lookup"><span data-stu-id="87418-204">Posted</span></span>                  | <span data-ttu-id="87418-205">Zestawienie jest oznaczane jako zaksięgowane.</span><span class="sxs-lookup"><span data-stu-id="87418-205">The statement is marked as posted.</span></span> |

<span data-ttu-id="87418-206">Każdy stan w tabelach powyżej ma charakter niezależny i między stanami jest budowana hierarchiczna zależność.</span><span class="sxs-lookup"><span data-stu-id="87418-206">Every state in the preceding tables is independent in nature, and a hierarchical dependency is built between the states.</span></span> <span data-ttu-id="87418-207">Ta zależność przechodzi od góry do dołu.</span><span class="sxs-lookup"><span data-stu-id="87418-207">This dependency flows from top to bottom.</span></span> <span data-ttu-id="87418-208">Jeśli system napotka jakiekolwiek błędy podczas przetwarzania stanu, stan zestawienia wraca do poprzedniego stanu.</span><span class="sxs-lookup"><span data-stu-id="87418-208">If the system encounters any errors while it's processing a state, the status of the statement is reverted to the previous state.</span></span> <span data-ttu-id="87418-209">Wszystkie kolejne próby uruchomienia procesu są wznawiane od stanu, w którym wystąpił błąd.</span><span class="sxs-lookup"><span data-stu-id="87418-209">Any subsequent reattempt of the process resumes from the state that failed and continues to move forward.</span></span> <span data-ttu-id="87418-210">Ta metoda ma następujące zalety:</span><span class="sxs-lookup"><span data-stu-id="87418-210">This approach has the following benefits:</span></span>

- <span data-ttu-id="87418-211">Użytkownik ma pełen wgląd w stan, w którym wystąpił błąd.</span><span class="sxs-lookup"><span data-stu-id="87418-211">The user has complete visibility into the state where the error occurred.</span></span>
- <span data-ttu-id="87418-212">Unika się uszkodzenia danych.</span><span class="sxs-lookup"><span data-stu-id="87418-212">Data corruption is avoided.</span></span> <span data-ttu-id="87418-213">Na przykład w starszej funkcji księgowania zestawień były przypadki, gdy niektóre zamówienia sprzedaży były fakturowane, ale inne pozostawały otwarte.</span><span class="sxs-lookup"><span data-stu-id="87418-213">For example, in the legacy statement posting feature, there were instances where some sales orders were invoiced but others were left open.</span></span> <span data-ttu-id="87418-214">Były również przypadki, że niektóre arkusze płatności nie miały odpowiadającej im faktury na potrzeby rozliczenia, ponieważ podczas księgowania faktury występował błąd.</span><span class="sxs-lookup"><span data-stu-id="87418-214">There were also instances where some payment journals didn't have a corresponding invoice to settle, because the invoice posting had an error.</span></span>
- <span data-ttu-id="87418-215">Użytkownicy mogą zobaczyć bieżący stan zestawienia, naciskając przycisk **Szczegóły stanu** w grupie **Szczegóły wykonania** dla zestawienia.</span><span class="sxs-lookup"><span data-stu-id="87418-215">Users can see the current state of a statement by using the **Status details** button in the **Execution details** group of the statement.</span></span> <span data-ttu-id="87418-216">Strona Szczegóły stanu ma trzy części:</span><span class="sxs-lookup"><span data-stu-id="87418-216">The status details page has three sections:</span></span>

    - <span data-ttu-id="87418-217">Pierwsza sekcja przedstawia bieżący stan zestawienia wraz z kodem błędu i szczegółowym komunikatem o błędzie, jeśli wystąpił błąd.</span><span class="sxs-lookup"><span data-stu-id="87418-217">The first section shows the current status of the statement, together with the error code and a detailed error message, if an error occurred.</span></span>
    - <span data-ttu-id="87418-218">Druga sekcja przedstawia różne stany procesu obliczania.</span><span class="sxs-lookup"><span data-stu-id="87418-218">The second section shows the various states of the calculation process.</span></span> <span data-ttu-id="87418-219">Podpowiedzi wizualne wskazują stany, które zostały pomyślnie osiągnięte, stany, których nie można osiągnąć z powodu błędów, oraz stany, których jeszcze nie próbowano osiągnąć.</span><span class="sxs-lookup"><span data-stu-id="87418-219">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>
    - <span data-ttu-id="87418-220">Trzecia sekcja przedstawia różne stany procesu księgowania.</span><span class="sxs-lookup"><span data-stu-id="87418-220">The third section shows the various states of the posting process.</span></span> <span data-ttu-id="87418-221">Podpowiedzi wizualne wskazują stany, które zostały pomyślnie osiągnięte, stany, których nie można osiągnąć z powodu błędów, oraz stany, których jeszcze nie próbowano osiągnąć.</span><span class="sxs-lookup"><span data-stu-id="87418-221">Visual cues indicate states that have been successfully run, states that could not be run because of errors, and states that haven't yet been run.</span></span>

<span data-ttu-id="87418-222">Ponadto nagłówek sekcji drugiej i trzeciej pokazuje całościowy stan odnośnego procesu.</span><span class="sxs-lookup"><span data-stu-id="87418-222">Additionally, the header of the second and third sections shows the overall status of the relevant process.</span></span>

### <a name="event-logs"></a><span data-ttu-id="87418-223">Dzienniki zdarzeń</span><span class="sxs-lookup"><span data-stu-id="87418-223">Event logs</span></span>

<span data-ttu-id="87418-224">Zestawienie przechodzi przez różne operacje (na przykład tworzenia, obliczania, czyszczenia i księgowania), a w trakcie cyklu życia zestawienia może być wywoływanych wiele wystąpień tej samej operacji.</span><span class="sxs-lookup"><span data-stu-id="87418-224">A statement goes through various operations (for example, Create, Calculate, Clear, and Post), and multiple instances of the same operation might be called during the statement's lifecycle.</span></span> <span data-ttu-id="87418-225">Na przykład po utworzeniu i obliczeniu zestawienia użytkownik może wyczyścić zestawienie i obliczyć je ponownie.</span><span class="sxs-lookup"><span data-stu-id="87418-225">For example, after a statement is created and calculated, a user can clear the statement and calculate it again.</span></span> <span data-ttu-id="87418-226">Przycisk **Dzienniki zdarzeń** w grupie **Szczegóły wykonania** dla zestawienia wyświetla kompletny dziennik inspekcji wszystkich operacji, które zostały wywołane w sprawozdaniu, wraz z informacjami o tym, kiedy te operacje zostały wywołane.</span><span class="sxs-lookup"><span data-stu-id="87418-226">The **Event logs** button in the **Execution details** group of the statement provides a complete audit trail of the various operations that were called on a statement, together with information about when those operations were called.</span></span>

### <a name="aggregated-transactions"></a><span data-ttu-id="87418-227">Zagregowane transakcje</span><span class="sxs-lookup"><span data-stu-id="87418-227">Aggregated transactions</span></span>

<span data-ttu-id="87418-228">W trakcie procesu księgowania transakcje sprzedaży są agregowane na podstawie konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="87418-228">During the posting process, the sales transactions are aggregated based on the configuration.</span></span> <span data-ttu-id="87418-229">Te zagregowane transakcje są przechowywane w systemie i używane do tworzenia zamówień sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-229">These aggregated transactions are stored in the system and used to create sales orders.</span></span> <span data-ttu-id="87418-230">Każda zagregowana transakcja tworzy jedno odnośne zamówienie sprzedaży w systemie.</span><span class="sxs-lookup"><span data-stu-id="87418-230">Every aggregated transaction creates one corresponding sales order in the system.</span></span> <span data-ttu-id="87418-231">Zagregowane transakcje można zobaczyć, naciskając przycisk **Zagregowane transakcje** w grupie **Szczegóły wykonania** dla zestawienia.</span><span class="sxs-lookup"><span data-stu-id="87418-231">You can view the aggregated transactions by using the **Aggregated transactions** button in the **Execution details** group of the statement.</span></span>

<span data-ttu-id="87418-232">Karta **Szczegóły zamówienia sprzedaży** w oknie zagregowanej transakcji pokazuje następujące informacje:</span><span class="sxs-lookup"><span data-stu-id="87418-232">The **Sales order detail** tab of an aggregated transaction shows the following information:</span></span>

- <span data-ttu-id="87418-233">**Identyfikator rekordu** — Identyfikator rekordu zagregowanej transakcji.</span><span class="sxs-lookup"><span data-stu-id="87418-233">**Record ID** – The ID of the aggregated transaction.</span></span>
- <span data-ttu-id="87418-234">**Numer zestawienia** — Zestawienie, do którego należy zagregowana transakcja.</span><span class="sxs-lookup"><span data-stu-id="87418-234">**Statement number** – The statement that the aggregated transaction belongs to.</span></span>
- <span data-ttu-id="87418-235">**Data** — Dzień, w którym utworzono zagregowaną transakcję.</span><span class="sxs-lookup"><span data-stu-id="87418-235">**Date** – The date when the aggregated transaction was created.</span></span>
- <span data-ttu-id="87418-236">**Identyfikator sprzedaży** — Identyfikator zamówienia sprzedaży wstawiany po utworzeniu zamówienia sprzedaży na podstawie zagregowanej transakcji.</span><span class="sxs-lookup"><span data-stu-id="87418-236">**Sales ID** – When a sales order is created from the aggregated transaction, the sales order ID.</span></span> <span data-ttu-id="87418-237">Jeśli to pole jest puste, odnośne zamówienie sprzedaży nie zostało jeszcze utworzone.</span><span class="sxs-lookup"><span data-stu-id="87418-237">If this field is blank, the corresponding sales order hasn't been created.</span></span>
- <span data-ttu-id="87418-238">**Liczba zagregowanych wierszy** — Łączna liczba wierszy zagregowanej transakcji i zamówienia sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-238">**Number of aggregated lines** – The total number of lines for the aggregated transaction and sales order.</span></span>
- <span data-ttu-id="87418-239">**Stan** — Ostatni stan zagregowanej transakcji.</span><span class="sxs-lookup"><span data-stu-id="87418-239">**Status** – The last status of the aggregated transaction.</span></span>
- <span data-ttu-id="87418-240">**Identyfikator faktury** — Identyfikator faktury sprzedaży wstawiany po zafakturowaniu zamówienia sprzedaży powiązanego ze zagregowaną transakcją.</span><span class="sxs-lookup"><span data-stu-id="87418-240">**Invoice ID** – When the sales order for the aggregated transaction is invoiced, the sales invoice ID.</span></span> <span data-ttu-id="87418-241">Jeśli to pole jest puste, faktura za zamówienie sprzedaży nie została jeszcze zaksięgowana.</span><span class="sxs-lookup"><span data-stu-id="87418-241">If this field is blank, the invoice for the sales order hasn't been posted.</span></span>

<span data-ttu-id="87418-242">Karta **Szczegóły transakcji** w oknie zagregowanej transakcji pokazuje wszystkie transakcje sieci sprzedaży pobrane do zagregowanej transakcji.</span><span class="sxs-lookup"><span data-stu-id="87418-242">The **Transaction details** tab of an aggregated transaction shows all the retail transactions that have been pulled into the aggregated transaction.</span></span> <span data-ttu-id="87418-243">Zagregowane wiersze w zagregowanej transakcji pokazują wszystkie zagregowane rekordy z transakcji sieci sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-243">The aggregated lines on the aggregated transaction show all the aggregated records from the retail transactions.</span></span> <span data-ttu-id="87418-244">W zagregowanych wierszach są również wyświetlane szczegóły takie jak towar, wariant, ilość, cena, kwota netto, jednostka i magazyn.</span><span class="sxs-lookup"><span data-stu-id="87418-244">The aggregated lines also show details such as the item, variant, quantity, price, net amount, unit, and warehouse.</span></span> <span data-ttu-id="87418-245">Zasadniczo każdy zagregowany wiersz odpowiada jednemu wierszowi zamówienia sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-245">Basically, each aggregated line corresponds to one sales order line.</span></span>

<span data-ttu-id="87418-246">Na stronie **Zagregowane transakcje** można pobrać kod źródłowy XML konkretnej zagregowanej transakcji, naciskając przycisk **Eksportuj kod XML zamówienia sprzedaży**.</span><span class="sxs-lookup"><span data-stu-id="87418-246">From the **Aggregated transactions** page, you can download the XML for a specific aggregated transaction by using the **Export sales order XML** button.</span></span> <span data-ttu-id="87418-247">Kodu XML można używać do debugowania problemów dotyczących tworzenia i księgowania zamówienia sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-247">You can use the XML to debug issues that involve sales order creation and posting.</span></span> <span data-ttu-id="87418-248">Wystarczy pobrać kod XML, przekazać go do środowiska testowego, a następnie debugować problem w środowisku testowym.</span><span class="sxs-lookup"><span data-stu-id="87418-248">Just download the XML, upload it to a test environment, and debug the issue in the test environment.</span></span> <span data-ttu-id="87418-249">Funkcja pobierania kodu XML zagregowanych transakcji nie jest dostępna dla zestawień, które zostały już zaksięgowane.</span><span class="sxs-lookup"><span data-stu-id="87418-249">The functionality for downloading the XML for aggregated transactions isn't available for statements that have been posted.</span></span>

<span data-ttu-id="87418-250">Widok zagregowanych transakcji oferuje następujące zalety:</span><span class="sxs-lookup"><span data-stu-id="87418-250">The aggregated transaction view provides the following benefits:</span></span>

- <span data-ttu-id="87418-251">Użytkownik ma wgląd w zagregowane transakcje, których wykonanie nie powiodło się podczas tworzenia zamówienia sprzedaży, oraz w zamówienia sprzedaży, których przetwarzanie nie powiodło się podczas fakturowania.</span><span class="sxs-lookup"><span data-stu-id="87418-251">The user has visibility into the aggregated transactions that failed during sales order creation and the sales orders that failed during invoicing.</span></span>
- <span data-ttu-id="87418-252">Użytkownik ma wgląd w sposób agregowania transakcji.</span><span class="sxs-lookup"><span data-stu-id="87418-252">The user has visibility into how transactions are aggregated.</span></span>
- <span data-ttu-id="87418-253">Użytkownik ma kompletny dziennik inspekcji — od powstania transakcji sieci sprzedaży, przez zamówienia sprzedaży, aż po faktury sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-253">The user has a complete audit trail, from retail transactions, to sales orders, to sales invoices.</span></span> <span data-ttu-id="87418-254">Ten dziennik inspekcji nie był dostępny w starszej funkcji księgowania zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-254">This audit trail wasn't available in the legacy statement posting feature.</span></span>
- <span data-ttu-id="87418-255">Zagregowany plik XML ułatwia identyfikowanie problemów podczas tworzenia i fakturowania zamówienia sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-255">Aggregated XML file make it easier to identify issues during sales order creation and invoicing.</span></span>

### <a name="journal-vouchers"></a><span data-ttu-id="87418-256">Załączniki arkusza</span><span class="sxs-lookup"><span data-stu-id="87418-256">Journal vouchers</span></span>

<span data-ttu-id="87418-257">Przycisk **Załączniki arkusza** w grupie **Szczegóły wykonania** dla zestawienia powoduje wyświetlenie wszystkich transakcji załącznika utworzonych dla zestawienia, które są powiązane z rabatami, kontami przychodów/wydatków, kartami upominkowymi itd.</span><span class="sxs-lookup"><span data-stu-id="87418-257">The **Journal vouchers** button in the **Execution details** group of the statement shows all the various voucher transactions that are created for a statement, and that are related to discounts, income/expense accounts, gift cards, and so on.</span></span>

<span data-ttu-id="87418-258">Obecnie w programie te dane są wyświetlane tylko dla zaksięgowanych zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-258">Currently, the program shows this data only for posted statements.</span></span>

### <a name="payment-journals"></a><span data-ttu-id="87418-259">Arkusze płatności</span><span class="sxs-lookup"><span data-stu-id="87418-259">Payment journals</span></span>

<span data-ttu-id="87418-260">Przycisk **Arkusze płatności** w grupie **Szczegóły wykonania** dla zestawienia pokazuje wszystkie arkusze płatności utworzone dla zestawienia.</span><span class="sxs-lookup"><span data-stu-id="87418-260">The **Payment journals** button in the **Execution details** group of the statement shows all the various payment journals that are created for a statement.</span></span>

<span data-ttu-id="87418-261">Obecnie w programie te dane są wyświetlane tylko dla zaksięgowanych zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-261">Currently, the program shows this data only for posted statements.</span></span>

## <a name="other-improvements"></a><span data-ttu-id="87418-262">Inne ulepszenia</span><span class="sxs-lookup"><span data-stu-id="87418-262">Other improvements</span></span>

<span data-ttu-id="87418-263">W funkcji księgowania zestawień wprowadzono również różne ulepszenia w systemach zaplecza widoczne dla użytkowników.</span><span class="sxs-lookup"><span data-stu-id="87418-263">Other, back-end improvements that users can see have been made to the statement posting feature.</span></span> <span data-ttu-id="87418-264">Oto kilka przykładów:</span><span class="sxs-lookup"><span data-stu-id="87418-264">Here are some examples:</span></span>

- <span data-ttu-id="87418-265">Agregacja nie bierze pod uwagę jednostek personelu, terminala ani zmiany.</span><span class="sxs-lookup"><span data-stu-id="87418-265">The aggregation doesn't consider the staff, terminal, and shift entities.</span></span> <span data-ttu-id="87418-266">Ze względu na mniejszą liczbę parametrów agregacji system ma mniej wierszy zamówień sprzedaży do przetwarzania.</span><span class="sxs-lookup"><span data-stu-id="87418-266">Because there are fewer aggregation parameters, fewer sales order lines must be processed.</span></span>
- <span data-ttu-id="87418-267">Występowanie zakleszczeń w tabelach transakcji sieci sprzedaży zostało ograniczone poprzez wprowadzenie dodatkowych tabel rozszerzeń oraz poprzez wykonywanie operacji wstawiania zamiast operacji aktualizacji w tabelach transakcji sieci sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="87418-267">The occurrence of deadlock on retail transaction tables is reduced by introducing additional extension tables and by doing insert operations instead of update operations on the retail transaction tables.</span></span>
- <span data-ttu-id="87418-268">Liczba uruchamianych zadań przetwarzania wsadowego została sparametryzowana i ograniczona.</span><span class="sxs-lookup"><span data-stu-id="87418-268">The number of running batch tasks has been parameterized and limited.</span></span> <span data-ttu-id="87418-269">W związku z tym tę liczbę można precyzyjnie dostosować do specyfiki środowiska klienta.</span><span class="sxs-lookup"><span data-stu-id="87418-269">Therefore, this number can be fine-tuned specifically to a customer's environment.</span></span> <span data-ttu-id="87418-270">W starszej funkcji księgowania zestawień była tworzona nieograniczona liczba zadań wsadowych w tym samym czasie.</span><span class="sxs-lookup"><span data-stu-id="87418-270">In the legacy statement posting feature, an unlimited number of batch tasks was created at the same time.</span></span> <span data-ttu-id="87418-271">Efektem były ogromne obciążenia przetwarzaniem i powstawanie wąskich gardeł na serwerze przetwarzania wsadowego.</span><span class="sxs-lookup"><span data-stu-id="87418-271">The results were unmanageable loads, overhead, and bottlenecks on the batch server.</span></span>
- <span data-ttu-id="87418-272">Zestawienia są skutecznie umieszczane w kolejce do przetwarzania poprzez nadawanie priorytetu zestawieniom o największej liczbie transakcji.</span><span class="sxs-lookup"><span data-stu-id="87418-272">Statements are efficiently queued for processing by prioritizing the statements that have the maximum number of transactions.</span></span>
- <span data-ttu-id="87418-273">Procesy wsadowe, takie jak **Oblicz zestawienia w partii** i **Zaksięguj zestawienia w partii**, w wykonywane tylko w trybie wsadowym.</span><span class="sxs-lookup"><span data-stu-id="87418-273">Batch processes such as **Calculate statements in batch** and **Post statements in batch** are run only in batch mode.</span></span> <span data-ttu-id="87418-274">W starszej funkcji księgowania zestawień użytkownicy mogli wybrać opcję uruchamiania tych procesów wsadowych w trybie interakcyjnym, czyli jednowątkowym, w przeciwieństwie do procesów wsadowych, które są wielowątkowe.</span><span class="sxs-lookup"><span data-stu-id="87418-274">In the legacy statement posting feature, users could choose to run these batch processes in an interactive mode which is s single threaded operation unlike batch processes which are multi-threaded.</span></span>
- <span data-ttu-id="87418-275">W starszej funkcji księgowania zestawień każde niepowodzenie podzadania wsadowego powodowało stan błędu całego zadania wsadowego.</span><span class="sxs-lookup"><span data-stu-id="87418-275">In the legacy statement posting feature, any failure of a batch task put the whole batch job in an error state.</span></span> <span data-ttu-id="87418-276">W ulepszonej funkcji błędy podzadań wsadowych nie powodują ustawienia stanu błędu dla całego zadania wsadowego, jeśli inne podzadania wsadowe zostały wykonane pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="87418-276">In the improved feature, batch task failures don't put the batch job in an error state if other batch tasks are successfully completed.</span></span> <span data-ttu-id="87418-277">Stan księgowania sesji przetwarzania wsadowego należy ocenić za pomocą strony **Zestawienia handlu detalicznego**, gdzie widać wszystkie zestawienia, które nie zostały zaksięgowane z powodu błędów.</span><span class="sxs-lookup"><span data-stu-id="87418-277">You should assess the posting status for a batch execution run by using the **Retail statements** page, where you can see any statements that weren't posted because of errors.</span></span>
- <span data-ttu-id="87418-278">W starszej funkcji księgowania zestawień pierwsze wystąpienie niepowodzenia przetwarzania zestawienia powoduje niepowodzenie dla całej partii.</span><span class="sxs-lookup"><span data-stu-id="87418-278">In the legacy statement posting feature, the first occurrence of a statement failure causes the whole batch to fail.</span></span> <span data-ttu-id="87418-279">Pozostałe zestawienia nie są przetwarzane.</span><span class="sxs-lookup"><span data-stu-id="87418-279">The remaining statements aren't processed.</span></span> <span data-ttu-id="87418-280">W ulepszonej funkcji proces przetwarzania wsadowego kontynuuje przetwarzanie wszystkich zestawień, nawet jeśli przetwarzanie niektórych zestawień kończy się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="87418-280">In the improved feature, the batch process continues to process all statements, even if some of the statements fail.</span></span> <span data-ttu-id="87418-281">Jedną z zalet takiego rozwiązania jest to, że użytkownicy widzą dokładną liczbę zestawień zawierających błędy.</span><span class="sxs-lookup"><span data-stu-id="87418-281">One benefit is that users gain visibility into the exact number of statements that have errors.</span></span> <span data-ttu-id="87418-282">W rezultacie użytkownicy nie są już skazani na pętlę ustawicznego poprawiania błędów i ponownego uruchamiania procesu księgowania zestawień do czasu, aż wszystkie zestawienia zostaną pomyślnie zaksięgowane.</span><span class="sxs-lookup"><span data-stu-id="87418-282">Therefore, users don't have to be stuck in a continuous loop of fixing the errors and running the post statement process till all statements are posted.</span></span>

## <a name="general-guidance-about-the-statement-posting-process"></a><span data-ttu-id="87418-283">Ogólne wytyczne dotyczące procesu księgowania zestawień</span><span class="sxs-lookup"><span data-stu-id="87418-283">General guidance about the statement posting process</span></span>

- <span data-ttu-id="87418-284">Zalecamy, aby proces księgowania zestawień wykonywać wsadowo, ponieważ sesje przetwarzania wsadowego wykorzystują mechanizm wielowątkowości.</span><span class="sxs-lookup"><span data-stu-id="87418-284">We recommend that you run the statement posting process in a batch, because batch runs take advantage of the power of the batch framework in terms of multithreading.</span></span> <span data-ttu-id="87418-285">Wielowątkowość jest niezbędna do sprawnej obsługi dużych ilości transakcji występujących zwykle podczas księgowania zestawień.</span><span class="sxs-lookup"><span data-stu-id="87418-285">Multithreading is required in order to handle the huge volumes of transactions that are normally seen in statement postings.</span></span>
- <span data-ttu-id="87418-286">Zalecamy, aby w grupie modeli towarów włączyć funkcję ujemnych zapasów fizycznych, dzięki czemu księgowanie będzie przebiegało płynnie.</span><span class="sxs-lookup"><span data-stu-id="87418-286">We recommend that you turn on negative physical inventory on the item model group, so that you have a seamless posting experience.</span></span> <span data-ttu-id="87418-287">W niektórych scenariuszach zestawienia z wartościami ujemnymi mogą być księgowane tylko pod warunkiem istnienia ujemnych zapasów fizycznych.</span><span class="sxs-lookup"><span data-stu-id="87418-287">In some scenarios, negative statements might not be able to be posted unless there is negative physical inventory.</span></span> <span data-ttu-id="87418-288">Na przykład teoretycznie jeśli w zapasach istnieje tylko jedna jednostka towaru, a dla towaru wykonano transakcję sprzedaży i transakcję zwrotu, system powinien zaksięgować transakcję, nawet jeżeli nie włączono funkcji ujemnego poziomu zapasów.</span><span class="sxs-lookup"><span data-stu-id="87418-288">For example, in theory, if there is only one unit of an item in inventory, and there have been a sales transaction and a return transaction for the item, the transaction should be able to be posted even if negative inventory isn't turned on.</span></span> <span data-ttu-id="87418-289">Jednak ponieważ proces księgowania zestawienia pobiera transakcję sprzedaży i transakcję zwrotu w jednym zamówieniu odbiorcy, nie ma gwarancji, że wiersz sprzedaży zostanie zaksięgowany najpierw, a po nim wiersz zwrotu.</span><span class="sxs-lookup"><span data-stu-id="87418-289">However, because the statement posting process pulls both the sales transaction and the return transaction in a single customer order, there is no guarantee that the sales line will be posted first, followed by the return line.</span></span> <span data-ttu-id="87418-290">W związku z tym może wystąpić błąd.</span><span class="sxs-lookup"><span data-stu-id="87418-290">Therefore, errors can occur.</span></span> <span data-ttu-id="87418-291">Jeśli w tym scenariuszu jest włączona funkcja ujemnych zapasów, nie będzie negatywnego wpływu na księgowanie transakcji i system poprawnie odzwierciedli zapasy.</span><span class="sxs-lookup"><span data-stu-id="87418-291">If negative inventory is turned on in this scenario, the transaction posting isn't negatively affected, and the system will correctly reflect the inventory.</span></span>
- <span data-ttu-id="87418-292">Zalecamy, aby podczas obliczania i księgowania zestawień używać agregacji.</span><span class="sxs-lookup"><span data-stu-id="87418-292">We recommend that you use aggregation while you calculate and post statements.</span></span> <span data-ttu-id="87418-293">W związku z tym zalecamy następujące ustawienia niektórych parametrów agregacji:</span><span class="sxs-lookup"><span data-stu-id="87418-293">Therefore, the following settings are recommended for some of the aggregation parameters:</span></span>

    - <span data-ttu-id="87418-294">Kliknij kolejno opcje **Handel detaliczny** \> **Ustawienia centrali** \> **Parametry** \> **Parametry sieci sprzedaży**.</span><span class="sxs-lookup"><span data-stu-id="87418-294">Go to **Retail** \> **Headquarters setup** \> **Parameters** \> **Retail parameters**.</span></span> <span data-ttu-id="87418-295">Następnie na karcie **Księgowanie** na skróconej karcie **Aktualizacja zapasów** w polu **Poziom szczegółowości** zaznacz wartość **Podsumowanie**.</span><span class="sxs-lookup"><span data-stu-id="87418-295">Then, on the **Posting** tab, on the **Inventory update** FastTab, in the **Detail level** field, select **Summary**.</span></span>
    - <span data-ttu-id="87418-296">Kliknij kolejno opcje **Handel detaliczny** \> **Ustawienia centrali** \> **Parametry** \> **Parametry sieci sprzedaży**.</span><span class="sxs-lookup"><span data-stu-id="87418-296">Go to **Retail** \> **Headquarters setup** \> **Parameters** \> **Retail parameters**.</span></span> <span data-ttu-id="87418-297">Następnie na karcie **Księgowanie** na skróconej karcie **Agregacja** w opcji **Transakcje na załączniku** ustaw wartość **Tak**.</span><span class="sxs-lookup"><span data-stu-id="87418-297">Then, on the **Posting** tab, on the **Aggregation** FastTab, set the **Voucher transactions** option to **Yes**.</span></span>
