---
title: Przykładowa integracja drukarki fiskalnej dla Polski
description: W tym temacie zawarto ogólne informacje o przykładowej integracji dla Polski.
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Poland
ms.search.industry: Retail
ms.author: v-dmpere
ms.search.validFrom: 2019-2-1
ms.dyn365.ops.version: 10.0.1
ms.openlocfilehash: cfd93f27ab5b498f6a97e1508e0a6f2d4aff01a3
ms.sourcegitcommit: f87de0f949b5d60993b19e0f61297f02d42b5bef
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/24/2019
ms.locfileid: "2025420"
---
# <a name="fiscal-printer-integration-sample-for-poland"></a><span data-ttu-id="09adb-103">Przykładowa integracja drukarki fiskalnej dla Polski</span><span class="sxs-lookup"><span data-stu-id="09adb-103">Fiscal printer integration sample for Poland</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="09adb-104">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="09adb-104">Introduction</span></span>

<span data-ttu-id="09adb-105">Funkcja programu Dynamics 365 Retail dla Polski obejmuje przykładową integrację punktu sprzedaży (POS) z drukarką fiskalną.</span><span class="sxs-lookup"><span data-stu-id="09adb-105">The Dynamics 365 Retail functionality for Poland includes a sample integration of the point of sale (POS) with a fiscal printer.</span></span> <span data-ttu-id="09adb-106">Przykładowa integracja rozszerza [funkcję integracji fiskalnej](fiscal-integration-for-retail-channel.md) i obsługuje protokół POSNET THERMAL HD 2.02 dla drukarek fiskalnych z [Posnet Polska S.A.](https://www.posnet.com.pl) Przykład umożliwia komunikację z drukarką fiskalną połączoną przez port COM przy użyciu natywnego oprogramowania sterownika.</span><span class="sxs-lookup"><span data-stu-id="09adb-106">The sample extends the [fiscal integration functionality](fiscal-integration-for-retail-channel.md) and supports the POSNET THERMAL HD 2.02 protocol for fiscal printers from [Posnet Polska S.A.](https://www.posnet.com.pl) The sample enables communication with a fiscal printer that is connected via a COM port by using a native software driver.</span></span> <span data-ttu-id="09adb-107">Implementację i testy przeprowadzono przy użyciu emulatora oprogramowania dostarczonego przez Posnet dla drukarki fiskalnej Posnet Thermal HD FV EJ.</span><span class="sxs-lookup"><span data-stu-id="09adb-107">It was implemented and tested by using a software emulator that Posnet provided for the Posnet Thermal HD FV EJ fiscal printer.</span></span> <span data-ttu-id="09adb-108">Przykładowa integracja ma formę kodu źródłowego i jest częścią zestawu SDK modułu Retail.</span><span class="sxs-lookup"><span data-stu-id="09adb-108">The sample is provided in the form of source code and is part of the Retail software development kit (SDK).</span></span>

<span data-ttu-id="09adb-109">Microsoft nie udostępnia żadnego sprzętu, oprogramowania ani dokumentacji firmy Posnet.</span><span class="sxs-lookup"><span data-stu-id="09adb-109">Microsoft doesn't release any hardware, software, or documentation from Posnet.</span></span> <span data-ttu-id="09adb-110">Aby dowiedzieć się, jak uzyskać drukarkę fiskalną i jak ją obsługiwać, skontaktuj się z [Posnet Polska S.A.](https://www.posnet.com.pl)</span><span class="sxs-lookup"><span data-stu-id="09adb-110">For information about how to get the fiscal printer and operate it, contact [Posnet Polska S.A.](https://www.posnet.com.pl)</span></span>

## <a name="scenarios"></a><span data-ttu-id="09adb-111">Scenariusze</span><span class="sxs-lookup"><span data-stu-id="09adb-111">Scenarios</span></span>

<span data-ttu-id="09adb-112">Poniższe scenariusze są objęte próbką integracją drukarki fiskalnej dla Polski:</span><span class="sxs-lookup"><span data-stu-id="09adb-112">The following scenarios are covered by the fiscal printer integration sample for Poland:</span></span>

- <span data-ttu-id="09adb-113">Scenariusze sprzedaży:</span><span class="sxs-lookup"><span data-stu-id="09adb-113">Sales scenarios:</span></span>

    - <span data-ttu-id="09adb-114">Drukowanie paragonu fiskalnego dla sprzedaży i zwrotów zapłaty przy kasie.</span><span class="sxs-lookup"><span data-stu-id="09adb-114">Print a fiscal receipt for cash-and-carry sales and returns.</span></span>
    - <span data-ttu-id="09adb-115">Rejestrowanie odpowiedzi z drukarki fiskalnej i zapisywanie jej w bazie danych kanału.</span><span class="sxs-lookup"><span data-stu-id="09adb-115">Capture a response from the fiscal printer, and store it in the channel database.</span></span>
    - <span data-ttu-id="09adb-116">Podatki:</span><span class="sxs-lookup"><span data-stu-id="09adb-116">Taxes:</span></span>

        - <span data-ttu-id="09adb-117">Mapowanie kodów podatku drukarki fiskalnej (działy).</span><span class="sxs-lookup"><span data-stu-id="09adb-117">Map to the fiscal printer's tax codes (departments).</span></span>
        - <span data-ttu-id="09adb-118">Przesyłanie zamapowanych danych podatku do drukarki fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-118">Transfer mapped tax data to the fiscal printer.</span></span>

    - <span data-ttu-id="09adb-119">Płatności:</span><span class="sxs-lookup"><span data-stu-id="09adb-119">Payments:</span></span>

        - <span data-ttu-id="09adb-120">Mapowanie metod płatności drukarki fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-120">Map to the fiscal printer's methods of payment.</span></span>
        - <span data-ttu-id="09adb-121">Drukowanie płatności na paragonie fiskalnym.</span><span class="sxs-lookup"><span data-stu-id="09adb-121">Print payments on a fiscal receipt.</span></span>
        - <span data-ttu-id="09adb-122">Drukowanie informacji o zmianie.</span><span class="sxs-lookup"><span data-stu-id="09adb-122">Print change information.</span></span>

    - <span data-ttu-id="09adb-123">Drukowanie rabatów dla pozycji.</span><span class="sxs-lookup"><span data-stu-id="09adb-123">Print line discounts.</span></span>
    - <span data-ttu-id="09adb-124">Karty upominkowe:</span><span class="sxs-lookup"><span data-stu-id="09adb-124">Gift cards:</span></span>

        - <span data-ttu-id="09adb-125">Wykluczanie pozycji wydanej/doładowanej karty upominkowej z paragonu fiskalnego dla sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="09adb-125">Exclude an issued/re-charged gift card line from a fiscal receipt for a sale.</span></span>
        - <span data-ttu-id="09adb-126">Drukowanie płatności używającej karty upominkowej jako zwykłej metody płatności.</span><span class="sxs-lookup"><span data-stu-id="09adb-126">Print a payment that uses a gift card as a regular method of payment.</span></span>

    - <span data-ttu-id="09adb-127">Drukowanie paragonów fiskalnych dla operacji zamówień odbiorcy:</span><span class="sxs-lookup"><span data-stu-id="09adb-127">Print fiscal receipts for customer order operations:</span></span>

        - <span data-ttu-id="09adb-128">Paragon fiskalny nie jest drukowany dla wypłaty za zamówienie odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="09adb-128">A fiscal receipt isn't printed for a customer order deposit.</span></span>
        - <span data-ttu-id="09adb-129">Drukowanie paragonu fiskalnego dla wierszy przeprowadzenia hybrydowego zamówienia odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="09adb-129">Print a fiscal receipt for carry-out lines of a hybrid customer order.</span></span>
        - <span data-ttu-id="09adb-130">Drukowanie paragonu fiskalnego dla operacji pobrania zamówienia odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="09adb-130">Print a fiscal receipt for the pickup operation for a customer order.</span></span>
        - <span data-ttu-id="09adb-131">Drukowanie paragonu fiskalnego dla zamówienia zwrotu.</span><span class="sxs-lookup"><span data-stu-id="09adb-131">Print a fiscal receipt for a return order.</span></span>

- <span data-ttu-id="09adb-132">Zestawienia na koniec dnia (raporty fiskalne X i końcowy raport sprzedaży).</span><span class="sxs-lookup"><span data-stu-id="09adb-132">End of day statements (fiscal X and fiscal Z reports).</span></span>
- <span data-ttu-id="09adb-133">Obsługa błędów, np. następujących opcji:</span><span class="sxs-lookup"><span data-stu-id="09adb-133">Error handling, such as the following options:</span></span>

    - <span data-ttu-id="09adb-134">Ponowienie próby rejestracji fiskalnej, jeśli ponownie jest możliwe, np. jeśli drukarka fiskalna nie jest podłączona, jest niegodowa lub nie odpowiada, w drukarce nie ma papieru lub występuje zakleszczenie papieru.</span><span class="sxs-lookup"><span data-stu-id="09adb-134">Retry fiscal registration if a retry is possible, such as if the fiscal printer isn't connected, isn't ready, or isn't responding, the printer is out of paper, or there is a paper jam.</span></span>
    - <span data-ttu-id="09adb-135">Odroczenie rejestracji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-135">Postpone fiscal registration.</span></span>
    - <span data-ttu-id="09adb-136">Pominięcie rejestracji fiskalnej lub oznaczenie transakcji jako zarejestrowanej i wprowadzenie kodów informacji oznaczających przyczynę błędu oraz dodatkowe informacje.</span><span class="sxs-lookup"><span data-stu-id="09adb-136">Skip fiscal registration, or mark the transaction as registered, and include info codes to capture the reason for the failure and additional information.</span></span>
    - <span data-ttu-id="09adb-137">Sprawdź dostępność drukarki fiskalnej przed otwarciem nowej transakcji sprzedaży lub zakończeniem transakcji sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="09adb-137">Check the availability of the fiscal printer before a new sales transaction is opened or a sales transaction is finalized.</span></span>

### <a name="default-data-mapping"></a><span data-ttu-id="09adb-138">Domyślne mapowanie danych</span><span class="sxs-lookup"><span data-stu-id="09adb-138">Default data mapping</span></span>

<span data-ttu-id="09adb-139">Następujące domyślne mapowanie danych jest uwzględnione w bieżącej konfiguracji dostawcy dokumentu fiskalnego dostarczanego jako część przykładowej integracji fiskalnej:</span><span class="sxs-lookup"><span data-stu-id="09adb-139">The following default data mapping is included in the fiscal document provider configuration that is provided as part of the fiscal integration sample:</span></span>

- <span data-ttu-id="09adb-140">Mapowanie podatku od towarów i usług (VAT):</span><span class="sxs-lookup"><span data-stu-id="09adb-140">Value-added tax (VAT) rates mapping:</span></span>

    <span data-ttu-id="09adb-141">*0 : 23.00 ; 1 : 8.00 ; 2 : 5.00 ; 3 : 0.00*</span><span class="sxs-lookup"><span data-stu-id="09adb-141">*0 : 23.00 ; 1 : 8.00 ; 2 : 5.00 ; 3 : 0.00*</span></span>

- <span data-ttu-id="09adb-142">Mapowanie typów metod płatności:</span><span class="sxs-lookup"><span data-stu-id="09adb-142">Tender type mapping:</span></span>

    <span data-ttu-id="09adb-143">*0 : 0 ; 1 : 0 ; 2 : 2 ; 3 : 2 ; 4 : 0 ; 5 : 0 ; 6 : 0 ; 7 : 2 ; 8 : 0*</span><span class="sxs-lookup"><span data-stu-id="09adb-143">*0 : 0 ; 1 : 0 ; 2 : 2 ; 3 : 2 ; 4 : 0 ; 5 : 0 ; 6 : 0 ; 7 : 2 ; 8 : 0*</span></span>

### <a name="gift-cards"></a><span data-ttu-id="09adb-144">Karty upominkowe</span><span class="sxs-lookup"><span data-stu-id="09adb-144">Gift cards</span></span>

<span data-ttu-id="09adb-145">Przykładowa integracja drukarki fiskalnej implementuje następujące reguły związane z kartami upominkowymi:</span><span class="sxs-lookup"><span data-stu-id="09adb-145">The fiscal printer integration sample implements the following rules that are related to gift cards:</span></span>

- <span data-ttu-id="09adb-146">Wyłączenie z paragonu fiskalnego wierszy sprzedaży, które są związane z operacjami *Wystaw kartę upominkową* i *Dodaj do karty upominkowej*.</span><span class="sxs-lookup"><span data-stu-id="09adb-146">Exclude sales lines that are related to the *Issue gift card* and *Add to gift card* operations from the fiscal receipt.</span></span>
- <span data-ttu-id="09adb-147">Niedrukowanie paragonu fiskalnego, jeśli zawiera tylko wiersze karty upominkowej.</span><span class="sxs-lookup"><span data-stu-id="09adb-147">Don't print a fiscal receipt if it consists only of gift card lines.</span></span>
- <span data-ttu-id="09adb-148">Odjęcie łącznej kwoty kart upominkowych, które zostały wystawione lub doładowane w ramach transakcji z wierszy płatności paragonu fiskalnego.</span><span class="sxs-lookup"><span data-stu-id="09adb-148">Deduct the total amount of gift cards that are issued or re-charged in a transaction from payment lines of the fiscal receipt.</span></span>
- <span data-ttu-id="09adb-149">Zapisanie obliczanych korekt wierszy płatności w bazie danych kanału w odniesieniu do odpowiedniej transakcji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-149">Save calculated adjustments of payment lines in the channel database with a reference to a corresponding fiscal transaction.</span></span>
- <span data-ttu-id="09adb-150">Płatność kartą upominkową jest traktowana jako zwykła płatność.</span><span class="sxs-lookup"><span data-stu-id="09adb-150">Payment by gift card is considered a regular payment.</span></span>

### <a name="customer-deposits-and-customer-order-deposits"></a><span data-ttu-id="09adb-151">Obsługa wpłat odbiorcy i wpłat za zamówienie odbiorcy</span><span class="sxs-lookup"><span data-stu-id="09adb-151">Customer deposits and customer order deposits</span></span>

<span data-ttu-id="09adb-152">Przykładowa integracji drukarki fiskalnej implementuje następujące reguły, które są związane z wpłatami odbiorcy i wpłatami za zamówienie odbiorcy:</span><span class="sxs-lookup"><span data-stu-id="09adb-152">The fiscal printer integration sample implements the following rules that are related to customer deposits and customer order deposits:</span></span>

- <span data-ttu-id="09adb-153">Nie drukuj paragonu fiskalnego, jeśli transakcja jest wpłatą odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="09adb-153">Don't print a fiscal receipt if a transaction is a customer deposit.</span></span>
- <span data-ttu-id="09adb-154">Nie drukuj paragonu fiskalnego, jeśli transakcja zawiera tylko wpłatę za zamówienie klienta lub zwrot takiej wpłaty.</span><span class="sxs-lookup"><span data-stu-id="09adb-154">Don't print a fiscal receipt if a transaction contains only a customer order deposit or a customer order deposit refund.</span></span>
- <span data-ttu-id="09adb-155">Drukuj kwotę wcześniej zapłaconej wpłaty na paragonie fiskalnym dla operacji odebrania zamówienia odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="09adb-155">Print the amount of the previously paid deposit on a fiscal receipt for a customer order pickup operation.</span></span>
- <span data-ttu-id="09adb-156">Odejmij kwotę wpłaty za zamówienie odbiorcy od wiersza płatności, kiedy tworzone jest zamówienie hybrydowe odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="09adb-156">Deduct the customer order deposit amount from payment lines when a hybrid customer order is created.</span></span>
- <span data-ttu-id="09adb-157">Zapisz obliczane korekty wierszy płatności w bazie danych kanału w odniesieniu do odpowiedniej transakcji fiskalnej dla hybrydowego zamówienia odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="09adb-157">Save calculated adjustments of payment lines in the channel database with a reference to a fiscal transaction for a hybrid customer order.</span></span>

### <a name="limitations-of-the-sample"></a><span data-ttu-id="09adb-158">Ograniczenia przykładowej integracji</span><span class="sxs-lookup"><span data-stu-id="09adb-158">Limitations of the sample</span></span>

- <span data-ttu-id="09adb-159">Drukarka fiskalna obsługuje tylko scenariusze, w których podatek od sprzedaży jest uwzględniony w cenie.</span><span class="sxs-lookup"><span data-stu-id="09adb-159">The fiscal printer supports only scenarios where sales tax is included in the price.</span></span> <span data-ttu-id="09adb-160">Z tego względu opcja **Cena zawiera podatek** musi być ustawiona na **Tak** zarówno dla sklepów detalicznych, jak i odbiorców.</span><span class="sxs-lookup"><span data-stu-id="09adb-160">Therefore, the **Price include sales tax** option must be set to **Yes** for both retail stores and customers.</span></span>
- <span data-ttu-id="09adb-161">Raporty dzienne (fiskalne X i końcowy raport sprzedaży)są drukowane przy użyciu osadzonego formatu *Raport zmiany*.</span><span class="sxs-lookup"><span data-stu-id="09adb-161">Daily reports (fiscal X and fiscal Z) are printed by using the embedded *Shift report* format.</span></span>
- <span data-ttu-id="09adb-162">Drukowanie kodu kreskowego na paragonach fiskalnych jest traktowane jako potencjalne dostosowanie, ponieważ ta funkcja nie jest obsługiwana w formatach osadzonych i jej wprowadzenie może nastąpić wyłącznie przy użyciu dostosowywanego raportu **Super-format**.</span><span class="sxs-lookup"><span data-stu-id="09adb-162">Printing a bar code on fiscal receipts is considered a potential customization, because this feature isn't supported in the embedded formats and can be implemented only by using the customizable **Super-format** report.</span></span>
- <span data-ttu-id="09adb-163">Mieszane transakcje nie są obsługiwane przez drukarkę fiskalną.</span><span class="sxs-lookup"><span data-stu-id="09adb-163">The fiscal printer doesn't support mixed transactions.</span></span> <span data-ttu-id="09adb-164">Opcja **Zabraniaj umieszczania sprzedaży i zwrotów na jednym paragonie** powinna być ustawiona na **Tak**w profilach funkcji POS.</span><span class="sxs-lookup"><span data-stu-id="09adb-164">The **Prohibit mixing sales and returns in one receipt** option should be set to **Yes** in POS functionality profiles.</span></span>

## <a name="set-up-retail-for-poland"></a><span data-ttu-id="09adb-165">Konfigurowanie modułu Retail dla Polski</span><span class="sxs-lookup"><span data-stu-id="09adb-165">Set up Retail for Poland</span></span>

### <a name="configure-fiscal-integration"></a><span data-ttu-id="09adb-166">Konfiguracja integracji fiskalnej</span><span class="sxs-lookup"><span data-stu-id="09adb-166">Configure fiscal integration</span></span>

<span data-ttu-id="09adb-167">Wykonaj kroki konfiguracji integracji fiskalnej w sposób opisany w [Konfigurowanie integracji fiskalnej dla kanałów sprzedaży detalicznej](setting-up-fiscal-integration-for-retail-channel.md):</span><span class="sxs-lookup"><span data-stu-id="09adb-167">Complete the fiscal integration setup steps as described in [Set up the fiscal integration for Retail channels](setting-up-fiscal-integration-for-retail-channel.md):</span></span>

- <span data-ttu-id="09adb-168">[Konfigurowanie procesu rejestracji fiskalnej](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="09adb-168">[Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span> <span data-ttu-id="09adb-169">Należy zauważyć również ustawienia dla procesu rejestracji fiskalnej [specyficzne dla tej drukarki fiskalnej w przykładzie integracji](#set-up-the-registration-process).</span><span class="sxs-lookup"><span data-stu-id="09adb-169">Note also the settings for the fiscal registration process that are [specific to this fiscal printer integration sample](#set-up-the-registration-process).</span></span>
- <span data-ttu-id="09adb-170">[Określanie ustawienia ustawień obsługi błędów](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="09adb-170">[Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>
- <span data-ttu-id="09adb-171">[Konfigurowanie raportów fiskalnych X / końcowych raportów sprzedaży z POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span><span class="sxs-lookup"><span data-stu-id="09adb-171">[Set up fiscal X/Z reports from the POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span></span>
- <span data-ttu-id="09adb-172">[Włączanie ręcznego wykonywania odroczonej rejestracji fiskalnej](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span><span class="sxs-lookup"><span data-stu-id="09adb-172">[Enable manual execution of postponed fiscal registration](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span></span>

### <a name="enable-extensions"></a><span data-ttu-id="09adb-173">Włączanie rozszerzeń</span><span class="sxs-lookup"><span data-stu-id="09adb-173">Enable extensions</span></span>

#### <a name="commerce-runtime-extension-components"></a><span data-ttu-id="09adb-174">Komponentu rozszerzenia środowiska uruchomieniowego Commerce</span><span class="sxs-lookup"><span data-stu-id="09adb-174">Commerce runtime extension components</span></span>

<span data-ttu-id="09adb-175">Komponenty rozszerzenia Commerce Runtime (CRT) znajdują się w zestawie SDK modułu Retail.</span><span class="sxs-lookup"><span data-stu-id="09adb-175">The Commerce runtime (CRT) extension components are included in the Retail SDK.</span></span> <span data-ttu-id="09adb-176">Aby wykonać poniższe procedury, otwórz rozwiązanie CRT, **CommerceRuntimeSamples.sln**, w obszarze **RetailSdk\\SampleExtensions\\CommerceRuntime**.</span><span class="sxs-lookup"><span data-stu-id="09adb-176">To complete the following procedures, open the CRT solution, **CommerceRuntimeSamples.sln**, under **RetailSdk\\SampleExtensions\\CommerceRuntime**.</span></span>

1. <span data-ttu-id="09adb-177">Znajdź projekt **Runtime.Extensions.DocumentProvider.PosnetSample** i zbuduj go.</span><span class="sxs-lookup"><span data-stu-id="09adb-177">Find the **Runtime.Extensions.DocumentProvider.PosnetSample** project, and build it.</span></span>
2. <span data-ttu-id="09adb-178">W folderze **Extensions.DocumentProvider.PosnetSample\\bin\\Debug** znajdź plik zestawu **Contoso.Commerce.Runtime.Extensions.DocumentProvider.PosnetSample.dll**.</span><span class="sxs-lookup"><span data-stu-id="09adb-178">In the **Extensions.DocumentProvider.PosnetSample\\bin\\Debug** folder, find the **Contoso.Commerce.Runtime.Extensions.DocumentProvider.PosnetSample.dll** assembly file.</span></span>
3. <span data-ttu-id="09adb-179">Skopiuj plik zestawu do folderu rozszerzenia CRT:</span><span class="sxs-lookup"><span data-stu-id="09adb-179">Copy the assembly file to the CRT extension folder:</span></span>

    - <span data-ttu-id="09adb-180">**Retail Server:** skopiuj zestaw do folderu **\\bin\\ext** w lokalizacji Microsoft Internet Information Services (IIS) witryny Retail Server.</span><span class="sxs-lookup"><span data-stu-id="09adb-180">**Retail Server:** Copy the assembly to the **\\bin\\ext** folder under the Microsoft Internet Information Services (IIS) Retail Server site location.</span></span>
    - <span data-ttu-id="09adb-181">**Lokalne wystąpienie CRT na Modern POS:** skopiuj zestaw do folderu **\\ext** w lokalizacji brokera lokalnego klienta CRT.</span><span class="sxs-lookup"><span data-stu-id="09adb-181">**Local CRT on Modern POS:** Copy the assembly to the **\\ext** folder under the local CRT client broker location.</span></span>

4. <span data-ttu-id="09adb-182">Znajdź plik konfiguracji rozszerzeń dla CRT:</span><span class="sxs-lookup"><span data-stu-id="09adb-182">Find the extensions configuration file for CRT:</span></span>

    - <span data-ttu-id="09adb-183">**Retail Server:** plik nosi nazwę **commerceruntime.ext.config** i jest w folderze bin\\ext w lokalizacji IIS witryny Retail Server.</span><span class="sxs-lookup"><span data-stu-id="09adb-183">**Retail Server:** The file is named **commerceruntime.ext.config**, and it's in the bin\\ext folder under the IIS Retail Server site location.</span></span>
    - <span data-ttu-id="09adb-184">**Lokalne wystąpienie CRT na Modern POS:** plik nosi nazwę **CommerceRuntime.MPOSOffline.Ext.config** i znajduje się w lokalizacji brokera lokalnego klienta CRT.</span><span class="sxs-lookup"><span data-stu-id="09adb-184">**Local CRT on Modern POS:** The file is named **CommerceRuntime.MPOSOffline.Ext.config**, and it's under the local CRT client broker location.</span></span>

5. <span data-ttu-id="09adb-185">Zarejestruj zmianę CRT w pliku konfiguracji rozszerzenia.</span><span class="sxs-lookup"><span data-stu-id="09adb-185">Register the CRT change in the extension's configuration file.</span></span> <span data-ttu-id="09adb-186">Dodaj **source="assembly" value="Contoso.Commerce.Runtime.Extensions.DocumentProvider.PosnetSample"**.</span><span class="sxs-lookup"><span data-stu-id="09adb-186">Add **source="assembly" value="Contoso.Commerce.Runtime.Extensions.DocumentProvider.PosnetSample"**.</span></span>
6. <span data-ttu-id="09adb-187">Uruchom ponownie usługę Retail.</span><span class="sxs-lookup"><span data-stu-id="09adb-187">Restart the Retail service.</span></span>

    - <span data-ttu-id="09adb-188">**Retail Server:** uruchom ponownie witrynę usługi Retail z menedżera IIS.</span><span class="sxs-lookup"><span data-stu-id="09adb-188">**Retail Server:** Restart the Retail service site from IIS Manager.</span></span>
    - <span data-ttu-id="09adb-189">**Broker klienta:** zakończ proces **dllhost.exe** w Menedżerze zadań, a następnie uruchom Modern POS.</span><span class="sxs-lookup"><span data-stu-id="09adb-189">**Client broker:** End the **dllhost.exe** process in Task Manager, and then restart Modern POS.</span></span>

#### <a name="hardware-station-extension-components"></a><span data-ttu-id="09adb-190">Komponenty rozszerzenia Hardware Station</span><span class="sxs-lookup"><span data-stu-id="09adb-190">Hardware station extension components</span></span>

<span data-ttu-id="09adb-191">Komponenty rozszerzenia Hardware Station znajdują się w zestawie SDK modułu Retail.</span><span class="sxs-lookup"><span data-stu-id="09adb-191">The Hardware station extension components are included in the Retail SDK.</span></span> <span data-ttu-id="09adb-192">Aby wykonać poniższe procedury, otwórz rozwiązania Hardware Station (**HardwareStationSamples.sln**) w obszarze **RetailSdk\\SampleExtensions\\HardwareStation**.</span><span class="sxs-lookup"><span data-stu-id="09adb-192">To complete the following procedures, open the Hardware Station solution, **HardwareStationSamples.sln**, under **RetailSdk\\SampleExtensions\\HardwareStation**.</span></span>

1. <span data-ttu-id="09adb-193">Znajdź projekt **Extension.PosnetThermalFVFiscalPrinterSample** i zbuduj go.</span><span class="sxs-lookup"><span data-stu-id="09adb-193">Find the **Extension.PosnetThermalFVFiscalPrinterSample** project, and build it.</span></span>
2. <span data-ttu-id="09adb-194">W folderze **Extension.PosnetThermalFVFiscalPrinterSample\\bin\\Debug** znajdź plik zestawu **Contoso.Commerce.HardwareStation.PosnetThermalFVFiscalPrinterSample.dll**.</span><span class="sxs-lookup"><span data-stu-id="09adb-194">In the **Extension.PosnetThermalFVFiscalPrinterSample\\bin\\Debug** folder, find the **Contoso.Commerce.HardwareStation.PosnetThermalFVFiscalPrinterSample.dll** assembly file.</span></span>
3. <span data-ttu-id="09adb-195">Skopiuj plik do wdrożonego komputera Hardware Station:</span><span class="sxs-lookup"><span data-stu-id="09adb-195">Copy the files to a deployed Hardware station machine:</span></span>

    - <span data-ttu-id="09adb-196">**Zdalna usługa Hardware Station:** skopiuj pliki do folderu **bin** w lokalizacji IIS witryny Hardware Station.</span><span class="sxs-lookup"><span data-stu-id="09adb-196">**Remote Hardware station:** Copy the files to the **bin** folder under the IIS Hardware station site location.</span></span> <span data-ttu-id="09adb-197">Skopiuj biblioteki sterownika drukarki (**libposcmbth.dll**, **libcmbth\_serial.dll** oraz **cmbth\_pl.lng**).</span><span class="sxs-lookup"><span data-stu-id="09adb-197">Copy the printer driver libraries (**libposcmbth.dll**, **libcmbth\_serial.dll**, and **cmbth\_pl.lng**).</span></span>

4. <span data-ttu-id="09adb-198">Znajdź plik konfiguracji dla rozszerzeń Hardware Station.</span><span class="sxs-lookup"><span data-stu-id="09adb-198">Find the configuration file for the Hardware station's extensions.</span></span> <span data-ttu-id="09adb-199">Plik nosi nazwę **HardwareStation.Extension.config**:</span><span class="sxs-lookup"><span data-stu-id="09adb-199">The file is named **HardwareStation.Extension.config**:</span></span>

    - <span data-ttu-id="09adb-200">**Zdalna usługa Hardware Station:** plik znajduje się w lokalizacji IIS witryny Hardware Station.</span><span class="sxs-lookup"><span data-stu-id="09adb-200">**Remote Hardware station:** The file is located under the IIS Hardware station site location.</span></span>

5. <span data-ttu-id="09adb-201">Dodaj następującą sekcję do sekcji **kompozycja** pliku konfiguracji.</span><span class="sxs-lookup"><span data-stu-id="09adb-201">Add the following section to the **composition** section of the config file.</span></span>

    ``` xml
    <add source="assembly" value="Contoso.Commerce.HardwareStation.PosnetThermalFVFiscalPrinterSample" />
    ```

6. <span data-ttu-id="09adb-202">Uruchom ponownie usługę Hardware Station:</span><span class="sxs-lookup"><span data-stu-id="09adb-202">Restart the Hardware station service:</span></span>

    - <span data-ttu-id="09adb-203">**Zdalna usługa Hardware Station:** uruchom ponownie Hardware Station z Menedżera IIS.</span><span class="sxs-lookup"><span data-stu-id="09adb-203">**Remote Hardware station:** Restart the Hardware station site from IIS Manager.</span></span>

### <a name="set-up-the-registration-process"></a><span data-ttu-id="09adb-204">Konfigurowanie procesu rejestracji</span><span class="sxs-lookup"><span data-stu-id="09adb-204">Set up the registration process</span></span>

<span data-ttu-id="09adb-205">Aby włączyć proces rejestracji, wykonaj następujące kroki do skonfigurowania Retail Headquarters.</span><span class="sxs-lookup"><span data-stu-id="09adb-205">To enable the registration process, follow these steps to set up Retail Headquarters.</span></span> <span data-ttu-id="09adb-206">Aby uzyskać więcej informacji, zobacz [Konfigurowanie procesu rejestracji fiskalnej](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="09adb-206">For more details, see [Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

1. <span data-ttu-id="09adb-207">Wybierz kolejno **Handel detaliczny \> Konfigurowanie kanału \> Integracja fiskalna \> Łączniki fiskalne**.</span><span class="sxs-lookup"><span data-stu-id="09adb-207">Go to **Retail \> Channel Setup \> Fiscal Integration \> Fiscal Connectors**.</span></span> <span data-ttu-id="09adb-208">Zaimportuj konfigurację z **RetailSdk\\SampleExtensions\\HardwareStation\\Extension.Posnet.ThermalDeviceSample\\Configuration\\ConnectorConnectorPosnetThermalFVEJ.xml**.</span><span class="sxs-lookup"><span data-stu-id="09adb-208">Import the configuration from **RetailSdk\\SampleExtensions\\HardwareStation\\Extension.Posnet.ThermalDeviceSample\\Configuration\\ConnectorConnectorPosnetThermalFVEJ.xml**.</span></span>
2. <span data-ttu-id="09adb-209">Wybierz kolejno **Handel detaliczny \> Ustawienia kanału \> Integracja fiskalna \> Dostawcy dokumentów fiskalnych**.</span><span class="sxs-lookup"><span data-stu-id="09adb-209">Go to **Retail \> Channel Setup \> Fiscal Integration \> Fiscal Document providers**.</span></span> <span data-ttu-id="09adb-210">Zaimportuj konfigurację z **RetailSdk\\SampleExtensions\\CommerceRuntime\\Extension.DocumentProvider.PosnetSample\\Configuration\\DocumentProviderPosnetSample.xml**.</span><span class="sxs-lookup"><span data-stu-id="09adb-210">Import the configuration from **RetailSdk\\SampleExtensions\\CommerceRuntime\\Extension.DocumentProvider.PosnetSample\\Configuration\\DocumentProviderPosnetSample.xml**.</span></span>
3. <span data-ttu-id="09adb-211">Wybierz kolejno **Handel detaliczny \> Konfigurowanie kanału \> Integracja fiskalna \> Profile techniczne łącznika**.</span><span class="sxs-lookup"><span data-stu-id="09adb-211">Go to **Retail \> Channel Setup \> Fiscal Integration \> Connector Technical profiles**.</span></span> <span data-ttu-id="09adb-212">Utwórz nowy profil i wybierz łącznik załadowany w poprzednim kroku.</span><span class="sxs-lookup"><span data-stu-id="09adb-212">Create a new profile, and select the loaded connector from the earlier step.</span></span> <span data-ttu-id="09adb-213">Zaktualizuj ustawienia połączenia, jeśli wymagana jest aktualizacja.</span><span class="sxs-lookup"><span data-stu-id="09adb-213">Update connection settings if an update is required.</span></span>
4. <span data-ttu-id="09adb-214">Wybierz kolejno **Handel detaliczny \> Konfigurowanie kanału \> Integracja fiskalna \> Profile funkcjonalności łącznika**.</span><span class="sxs-lookup"><span data-stu-id="09adb-214">Go to **Retail \> Channel Setup \> Fiscal Integration \> Connector Functional profiles**.</span></span> <span data-ttu-id="09adb-215">Utwórz nowy profil i wybierz łącznik i dostawcę dokumentów załadowane w poprzednich krokach.</span><span class="sxs-lookup"><span data-stu-id="09adb-215">Create a new profile, and select the loaded connector and document provider from the earlier steps.</span></span> <span data-ttu-id="09adb-216">Zaktualizuj ustawienia mapowania danych, jeśli aktualizacja jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="09adb-216">Update data mapping settings, if an update is required.</span></span>
5. <span data-ttu-id="09adb-217">Wybierz kolejno **Handel detaliczny \> Konfigurowanie kanału \> Integracja fiskalna \> Grupa funkcjonalności łącznika**.</span><span class="sxs-lookup"><span data-stu-id="09adb-217">Go to **Retail \> Channel Setup \> Fiscal Integration \> Connector Functional group**.</span></span> <span data-ttu-id="09adb-218">Utwórz nową grupę i wybierz profil funkcji łącznika z poprzedniego kroku.</span><span class="sxs-lookup"><span data-stu-id="09adb-218">Create a new group, and select the connector functional profile from the earlier step.</span></span>
6. <span data-ttu-id="09adb-219">Wybierz kolejno **Handel detaliczny \> Konfigurowanie kanału \> Integracja fiskalna \> Proces rejestracji**.</span><span class="sxs-lookup"><span data-stu-id="09adb-219">Go to **Retail \> Channel Setup \> Fiscal Integration \> Registration process**.</span></span> <span data-ttu-id="09adb-220">Utwórz nowy proces i wybierz grupę funkcji łącznika z poprzedniego kroku.</span><span class="sxs-lookup"><span data-stu-id="09adb-220">Create a new process, and select the connector functional group from the earlier step.</span></span>
7. <span data-ttu-id="09adb-221">Wybierz kolejno **Handel detaliczny \> Ustawienia kanału punkt sprzedaży \> Ustawienia punktu sprzedaży \> Profile punktów sprzedaży \> Profile funkcji**.</span><span class="sxs-lookup"><span data-stu-id="09adb-221">Go to **Retail \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span> <span data-ttu-id="09adb-222">Otwórz profil funkcji, który jest połączony z magazynem, w którym należy aktywować proces rejestracji.</span><span class="sxs-lookup"><span data-stu-id="09adb-222">Open the functionality profile that is linked to the store where the registration process should be activated.</span></span> <span data-ttu-id="09adb-223">Na skróconej karcie **Proces rejestracji fiskalnej** wybierz proces rejestracji, który został utworzony wcześniej.</span><span class="sxs-lookup"><span data-stu-id="09adb-223">On the **Fiscal registration process** FastTab, select the registration process that was created earlier.</span></span>
8. <span data-ttu-id="09adb-224">Wybierz kolejno opcje **Handel detaliczny \> Ustawienia kanału \> Ustawienia punktu sprzedaży \> Profile punktów sprzedaży \> Profile sprzętu**.</span><span class="sxs-lookup"><span data-stu-id="09adb-224">Go to **Retail \> Channel setup \> POS setup \> POS profiles \> Hardware profiles**.</span></span> <span data-ttu-id="09adb-225">Otwórz profil sprzętu, który jest połączony z usługą Hardware Station, do której będzie połączona drukarka fiskalna.</span><span class="sxs-lookup"><span data-stu-id="09adb-225">Open the hardware profile that is linked to the Hardware station that the fiscal printer will be connected to.</span></span> <span data-ttu-id="09adb-226">Na skróconej karcie **Fiskalne urządzenia peryferyjne** wybierz profil techniczny łącznika.</span><span class="sxs-lookup"><span data-stu-id="09adb-226">On the **Fiscal peripherals** FastTab, select the connector technical profile.</span></span>
9. <span data-ttu-id="09adb-227">Otwórz harmonogram dystrybucji (**Handel detaliczny \> Składniki IT w handlu detalicznym \> Harmonogram dystrybucji**) i wybierz zadania **1070** i **1090** do przesyłania danych do bazy danych kanału.</span><span class="sxs-lookup"><span data-stu-id="09adb-227">Open the distribution schedule (**Retail \> Retail IT \> Distribution schedule**), and select jobs **1070** and **1090** to transfer data to the channel database.</span></span>

### <a name="production-environment"></a><span data-ttu-id="09adb-228">Środowisko produkcyjne</span><span class="sxs-lookup"><span data-stu-id="09adb-228">Production environment</span></span>

<span data-ttu-id="09adb-229">Wykonaj następujące kroki, aby utworzyć możliwe do wdrożenia pakiety, które zawierają składniki sieci sprzedaży i aby stosować te pakiety w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="09adb-229">Follow these steps to create deployable packages that contain Retail components, and to apply those packages in a production environment.</span></span>

1. <span data-ttu-id="09adb-230">Wykonaj kroki opisane w części [Włączanie rozszerzeń](#enable-extensions) w tym temacie.</span><span class="sxs-lookup"><span data-stu-id="09adb-230">Complete the steps that are described in the [Enable extensions](#enable-extensions) section earlier in this topic.</span></span>
2. <span data-ttu-id="09adb-231">Wprowadź następujące zmiany w pliku konfiguracji pakietu w folderze **RetailSdk\\aktywów**:</span><span class="sxs-lookup"><span data-stu-id="09adb-231">Make the following changes in the package configuration files under the **RetailSdk\\Assets** folder:</span></span>

    - <span data-ttu-id="09adb-232">W plikach konfiguracji **commerceruntime.ext.config** i **CommerceRuntime.MPOSOffline.Ext.config** dodaj następujący wiersz w sekcji **kompozycja**.</span><span class="sxs-lookup"><span data-stu-id="09adb-232">In the **commerceruntime.ext.config** and **CommerceRuntime.MPOSOffline.Ext.config** configuration files, add the following line to the **composition** section.</span></span>

        ``` xml 
        <add source="assembly" value="Contoso.Commerce.Runtime.Extensions.DocumentProvider.PosnetSample" />
        ```

    - <span data-ttu-id="09adb-233">W pliku konfiguracji **HardwareStation.Extension.config** dodaj następujący wiersz w sekcji **kompozycja**.</span><span class="sxs-lookup"><span data-stu-id="09adb-233">In the **HardwareStation.Extension.config** configuration file, add the following line to the **composition** section.</span></span>

        ``` xml
        <add source="assembly" value="Contoso.Commerce.HardwareStation.PosnetThermalFVFiscalPrinterSample" />
        ```

3. <span data-ttu-id="09adb-234">Należy wprowadzić następujące zmiany w pliku konfiguracji dostosowań pakietu **BuildTools\\Customization.settings**:</span><span class="sxs-lookup"><span data-stu-id="09adb-234">Make the following changes in the **BuildTools\\Customization.settings** package customization configuration file:</span></span>

    - <span data-ttu-id="09adb-235">Dodaj poniższy wiersz, aby dołączyć rozszerzenie CRT w pakietach, które można wdrożyć.</span><span class="sxs-lookup"><span data-stu-id="09adb-235">Add the following line to include the CRT extension in the deployable packages.</span></span>

        ``` xml 
        <ISV_CommerceRuntime_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.Runtime.Extensions.DocumentProvider.PosnetSample.dll"/>
        ```

    - <span data-ttu-id="09adb-236">Dodaj poniższy wiersz, aby dołączyć rozszerzenie stacji sprzętu w pakietach, które można wdrożyć.</span><span class="sxs-lookup"><span data-stu-id="09adb-236">Add the following line to include the Hardware station extension in the deployable packages.</span></span>

        ``` xml 
        <ISV_HardwareStation_CustomizableFile Include="$(SdkReferencesPath)\Contoso.Commerce.HardwareStation.PosnetThermalFVFiscalPrinterSample.dll"/>
        ```

4. <span data-ttu-id="09adb-237">Uruchom wiersz polecenia MSBuild dla Visual Studio i uruchom **msbuild** w folderze Retail SDK, aby utworzyć pakiety, które można wdrożyć.</span><span class="sxs-lookup"><span data-stu-id="09adb-237">Start the MSBuild Command Prompt for Visual Studio utility, and run **msbuild** under the Retail SDK folder to create deployable packages.</span></span>
5. <span data-ttu-id="09adb-238">Zastosuj pakiety za pośrednictwem Microsoft Dynamics Lifecycle Services (LCS) lub ręcznie.</span><span class="sxs-lookup"><span data-stu-id="09adb-238">Apply the packages via Microsoft Dynamics Lifecycle Services (LCS) or manually.</span></span> <span data-ttu-id="09adb-239">Aby uzyskać więcej informacji, zobacz [Tworzenie wdrażalnych pakietów rozwiązania Retail](../dev-itpro/retail-sdk/retail-sdk-packaging.md).</span><span class="sxs-lookup"><span data-stu-id="09adb-239">For more information, see [Create retail deployable packages](../dev-itpro/retail-sdk/retail-sdk-packaging.md).</span></span>

## <a name="design-of-extensions"></a><span data-ttu-id="09adb-240">Projekt rozszerzenia</span><span class="sxs-lookup"><span data-stu-id="09adb-240">Design of extensions</span></span>

### <a name="commerce-runtime-extension-design"></a><span data-ttu-id="09adb-241">Projekt rozszerzenia środowiska uruchomieniowego Commerce</span><span class="sxs-lookup"><span data-stu-id="09adb-241">Commerce runtime extension design</span></span>

<span data-ttu-id="09adb-242">Celem rozszerzenia (dostawcy dokumentów fiskalnych) jest generowanie dokumentów specyficznych dla drukarki i obsługa odpowiedzi z drukarki fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-242">The purpose of the extension that is a fiscal document provider is to generate printer-specific documents and handle responses from the fiscal printer.</span></span>

<span data-ttu-id="09adb-243">Rozszerzenie środowiska uruchomieniowego Commerce to **Runtime.Extensions.DocumentProvider.PosnetSample**.</span><span class="sxs-lookup"><span data-stu-id="09adb-243">The Commerce runtime extension is **Runtime.Extensions.DocumentProvider.PosnetSample**.</span></span> <span data-ttu-id="09adb-244">To rozszerzenie generuje zestaw poleceń specyficznych dla drukarki, które są definiowane przez specyfikację POSNET 19-3678 w formacie JavaScript Object Notation (JSON).</span><span class="sxs-lookup"><span data-stu-id="09adb-244">This extension generates a set of printer-specific commands in JavaScript Object Notation (JSON) format that are defined by POSNET specification 19-3678.</span></span>

<span data-ttu-id="09adb-245">Aby uzyskać więcej informacji o projektowaniu rozwiązań integracji fiskalnej, zobacz [Proces rejestracji fiskalnej i przykładowe integracje fiskalne dla urządzeń fiskalnych](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span><span class="sxs-lookup"><span data-stu-id="09adb-245">For more details about the design of the fiscal integration solution, see [Fiscal registration process and fiscal integration samples for fiscal devices](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span></span>

#### <a name="request-handler"></a><span data-ttu-id="09adb-246">Program obsługi żądań</span><span class="sxs-lookup"><span data-stu-id="09adb-246">Request handler</span></span>
    
<span data-ttu-id="09adb-247">Program obsługi żądań **DocumentProviderPosnetProtocol** jest punktem wejścia dla żądania generowania dokumentów z drukarki fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-247">The **DocumentProviderPosnetProtocol** request handler is the entry point for the request to generate documents from the fiscal printer.</span></span>

<span data-ttu-id="09adb-248">Program obsługi jest dziedziczony z interfejsu **INamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="09adb-248">The handler is inherited from the **INamedRequestHandler** interface.</span></span> <span data-ttu-id="09adb-249">Metoda **HandlerName** odpowiada za zwrócenie nazwa programu obsługi.</span><span class="sxs-lookup"><span data-stu-id="09adb-249">The **HandlerName** method is responsible for returning the name of the handler.</span></span> <span data-ttu-id="09adb-250">Nazwa programu obsługi powinna odpowiadać nazwie dostawcy dokumentów łącznika określonej w Retail Headquarters.</span><span class="sxs-lookup"><span data-stu-id="09adb-250">The handler name should match the connector document provider name that is specified in Retail Headquarters.</span></span>

<span data-ttu-id="09adb-251">Łącznik obsługuje następujące żądania:</span><span class="sxs-lookup"><span data-stu-id="09adb-251">The connector supports the following requests:</span></span>

- <span data-ttu-id="09adb-252">**GetFiscalDocumentDocumentProviderRequest** – to żądanie zawiera informacje dotyczące dokumentu, który ma być generowany.</span><span class="sxs-lookup"><span data-stu-id="09adb-252">**GetFiscalDocumentDocumentProviderRequest** – This request contains information about what document should be generated.</span></span> <span data-ttu-id="09adb-253">Zwraca dokument specyficzny dla drukarki, który powinien zostać zarejestrowany w drukarce fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-253">It returns a printer-specific document that should be registered in the fiscal printer.</span></span>
- <span data-ttu-id="09adb-254">**GetSupportedRegistrableEventsDocumentProviderRequest** — to zapytanie zwraca listę zdarzeń do subskrybowania.</span><span class="sxs-lookup"><span data-stu-id="09adb-254">**GetSupportedRegistrableEventsDocumentProviderRequest** – This request returns the list of events to subscribe to.</span></span> <span data-ttu-id="09adb-255">Obecnie są obsługiwane następujące zdarzenia: sprzedaż, drukowanie raportu X i drukowanie końcowego raportu sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="09adb-255">Currently, the following events are supported: sales, printing X report, and printing Z report.</span></span>

#### <a name="configuration"></a><span data-ttu-id="09adb-256">Konfiguracja</span><span class="sxs-lookup"><span data-stu-id="09adb-256">Configuration</span></span>

<span data-ttu-id="09adb-257">Plik konfiguracyjny znajduje się w folderze **Konfiguracja** projektu rozszerzenia.</span><span class="sxs-lookup"><span data-stu-id="09adb-257">The configuration file is found in the **Configuration** folder of the extension project.</span></span> <span data-ttu-id="09adb-258">Ten plik służy do obsługi konfiguracji ustawień dostawcy dokumentu z Retail Headquarters.</span><span class="sxs-lookup"><span data-stu-id="09adb-258">The purpose of the file is to enable settings for the document provider to be configured from Retail Headquarters.</span></span> <span data-ttu-id="09adb-259">Format pliku jest zgodny z wymaganiami konfiguracji integracji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-259">The file format is aligned with the requirements for fiscal integration configuration.</span></span> <span data-ttu-id="09adb-260">Dodano następujące ustawienia:</span><span class="sxs-lookup"><span data-stu-id="09adb-260">The following settings are added:</span></span>

- <span data-ttu-id="09adb-261">Mapowanie stawek VAT</span><span class="sxs-lookup"><span data-stu-id="09adb-261">VAT rates mapping</span></span>
- <span data-ttu-id="09adb-262">Mapowanie typów metod płatności</span><span class="sxs-lookup"><span data-stu-id="09adb-262">Tender type mapping</span></span>
- <span data-ttu-id="09adb-263">Typ płatności wpłaty</span><span class="sxs-lookup"><span data-stu-id="09adb-263">Deposit payment type</span></span>

### <a name="hardware-station-extension-design"></a><span data-ttu-id="09adb-264">Projekt rozszerzenia Hardware Station</span><span class="sxs-lookup"><span data-stu-id="09adb-264">Hardware station extension design</span></span>

<span data-ttu-id="09adb-265">Zastosowaniem rozszerzenia (łącznika fiskalnego) jest do komunikowanie się z drukarką fiskalną.</span><span class="sxs-lookup"><span data-stu-id="09adb-265">The purpose of the extension that is a fiscal connector is to communicate with the fiscal printer.</span></span>

<span data-ttu-id="09adb-266">Rozszerzenie Hardware Station to **HardwareStation.Extension.PosnetThermalFVFiscalPrinterSample**.</span><span class="sxs-lookup"><span data-stu-id="09adb-266">The Hardware station extension is **HardwareStation.Extension.PosnetThermalFVFiscalPrinterSample**.</span></span> <span data-ttu-id="09adb-267">To rozszerzenie przesyła polecenia, które rozszerzenia środowiska uruchomieniowego Commerce generuje na drukarce fiskalnej, przez wywołanie funkcji POSNET sterownika dostarczonego przez producenta.</span><span class="sxs-lookup"><span data-stu-id="09adb-267">This extension calls the functions of the POSNET driver to submit commands that the Commerce runtime extension generates to the fiscal printer.</span></span> <span data-ttu-id="09adb-268">Obsługuje również błędy urządzenia.</span><span class="sxs-lookup"><span data-stu-id="09adb-268">It also handles device errors.</span></span>

#### <a name="request-handler"></a><span data-ttu-id="09adb-269">Program obsługi żądań</span><span class="sxs-lookup"><span data-stu-id="09adb-269">Request handler</span></span>

<span data-ttu-id="09adb-270">Program obsługi żądań **FiscalPrinterHandler** jest punktem wejściowym dla obsługi żądania przez fiskalne urządzenie peryferyjne.</span><span class="sxs-lookup"><span data-stu-id="09adb-270">The **FiscalPrinterHandler** request handler is the entry point for handling the request to the fiscal peripheral device.</span></span>

<span data-ttu-id="09adb-271">Program obsługi jest dziedziczony z interfejsu **INamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="09adb-271">The handler is inherited from the **INamedRequestHandler** interface.</span></span> <span data-ttu-id="09adb-272">Metoda **HandlerName** odpowiada za zwrócenie nazwa programu obsługi.</span><span class="sxs-lookup"><span data-stu-id="09adb-272">The **HandlerName** method is responsible for returning the name of the handler.</span></span> <span data-ttu-id="09adb-273">Nazwa programu obsługi powinna odpowiadać nazwie łącznika fiskalnego określonej w Retail Headquarters.</span><span class="sxs-lookup"><span data-stu-id="09adb-273">The handler name should match the fiscal connector name that is specified in Retail Headquarters.</span></span>

<span data-ttu-id="09adb-274">Łącznik obsługuje następujące żądania:</span><span class="sxs-lookup"><span data-stu-id="09adb-274">The connector supports the following requests:</span></span>

- <span data-ttu-id="09adb-275">**SubmitDocumentFiscalDeviceRequest** — to żądanie wysyła dokumenty do drukarek i zwraca odpowiedzi z drukarki fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-275">**SubmitDocumentFiscalDeviceRequest** – This request sends documents to printers and returns the response from the fiscal printer.</span></span>
- <span data-ttu-id="09adb-276">**IsReadyFiscalDeviceRequest** — to żądanie służy do sprawdzania stanu urządzenia.</span><span class="sxs-lookup"><span data-stu-id="09adb-276">**IsReadyFiscalDeviceRequest** – This request is used for a health check of the device.</span></span>
- <span data-ttu-id="09adb-277">**InitializeFiscalDeviceRequest** — to żądanie jest używane do inicjowania drukarki.</span><span class="sxs-lookup"><span data-stu-id="09adb-277">**InitializeFiscalDeviceRequest** – This request is used for printer initialization.</span></span>

#### <a name="configuration"></a><span data-ttu-id="09adb-278">Konfiguracja</span><span class="sxs-lookup"><span data-stu-id="09adb-278">Configuration</span></span>

<span data-ttu-id="09adb-279">Plik konfiguracyjny znajduje się w folderze **Konfiguracja** projektu rozszerzenia.</span><span class="sxs-lookup"><span data-stu-id="09adb-279">The configuration file is located in the **Configuration** folder of the extension project.</span></span> <span data-ttu-id="09adb-280">Ten plik służy do obsługi konfiguracji ustawień łącznika z Retail Headquarters.</span><span class="sxs-lookup"><span data-stu-id="09adb-280">The purpose of the file is to enable settings for the connector to be configured from Retail Headquarters.</span></span> <span data-ttu-id="09adb-281">Format pliku jest zgodny z wymaganiami konfiguracji integracji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="09adb-281">The file format is aligned with the requirements for fiscal integration configuration.</span></span> <span data-ttu-id="09adb-282">Dodano następujące ustawienia:</span><span class="sxs-lookup"><span data-stu-id="09adb-282">The following settings are added:</span></span>

- <span data-ttu-id="09adb-283">**Ciąg połączenia** — ten ciąg opisuje szczegóły połączenia do urządzenia w formacie obsługiwanym przez sterownik urządzenia.</span><span class="sxs-lookup"><span data-stu-id="09adb-283">**Connection string** – This string describes the details of the connection to the device in a format that is supported by the driver.</span></span> <span data-ttu-id="09adb-284">Aby uzyskać szczegółowe informacje, zobacz dokumentację sterownika POSNET.</span><span class="sxs-lookup"><span data-stu-id="09adb-284">For details, see the POSNET driver documentation.</span></span>
- <span data-ttu-id="09adb-285">**Data i godzina synchronizacji** — to ustawienie określa, czy należy zsynchronizować datę i godzinę drukarki ze stacją połączoną Hardware Station</span><span class="sxs-lookup"><span data-stu-id="09adb-285">**Date and time synchronization** – This setting specifies whether the date and time of the printer must be synced with the connected Hardware station.</span></span>
- <span data-ttu-id="09adb-286">**Limit czasu urządzenia** — ilość czasu, w milisekundach, przez który sterownik czeka na odpowiedź z urządzenia.</span><span class="sxs-lookup"><span data-stu-id="09adb-286">**Device timeout** – The amount of time, in milliseconds, that the driver will wait for a response from the device.</span></span> <span data-ttu-id="09adb-287">Aby uzyskać szczegółowe informacje, zobacz dokumentację sterownika POSNET.</span><span class="sxs-lookup"><span data-stu-id="09adb-287">For details, see the POSNET driver documentation.</span></span>
