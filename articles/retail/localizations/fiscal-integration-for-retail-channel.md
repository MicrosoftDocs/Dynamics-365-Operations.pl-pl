---
title: Omówienie integracji fiskalnej dla kanałów modułu Retail
description: Ten temat zawiera omówienie funkcji integracji fiskalnej dostępnych w programie Dynamics 365 Retail.
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: Retail
ms.author: v-kikozl
ms.search.validFrom: 2019-1-16
ms.dyn365.ops.version: 10
ms.openlocfilehash: 647ef586b64699a891bd3b6702ac93bc5ee8292e
ms.sourcegitcommit: f87de0f949b5d60993b19e0f61297f02d42b5bef
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/24/2019
ms.locfileid: "2025414"
---
# <a name="overview-of-fiscal-integration-for-retail-channels"></a><span data-ttu-id="cf7b0-103">Omówienie integracji fiskalnej dla kanałów modułu Retail</span><span class="sxs-lookup"><span data-stu-id="cf7b0-103">Overview of fiscal integration for Retail channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="cf7b0-104">Wprowadzenie</span><span class="sxs-lookup"><span data-stu-id="cf7b0-104">Introduction</span></span>

<span data-ttu-id="cf7b0-105">Ten temat zawiera omówienie funkcji integracji fiskalnej dostępnych w programie Dynamics 365 Retail.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-105">This topic is an overview of the fiscal integration capabilities that are available in Dynamics 365 Retail.</span></span> <span data-ttu-id="cf7b0-106">Integracja fiskalna obejmuje integrację z różnymi urządzeniami i usługami fiskalnych umożliwiających rejestrację fiskalną sprzedaży detalicznej zgodnie z lokalnymi przepisami podatkowymi, które mają na celu zapobieganie oszustwom podatkowym w sprzedaży detalicznej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-106">Fiscal integration includes integration with various fiscal devices and services that enable fiscal registration of retail sales in accordance with local fiscal laws that are aimed at preventing tax fraud in the retail industry.</span></span> <span data-ttu-id="cf7b0-107">Oto kilka typowych scenariuszy wykorzystania funkcji integracji fiskalnej:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-107">Here are some typical scenarios that can be covered by using fiscal integration:</span></span>

- <span data-ttu-id="cf7b0-108">Rejestrowanie sprzedaży detalicznej na urządzeniu fiskalnym w punkcie sprzedaży Retail (POS), np. na drukarce fiskalnej, i drukowanie paragonu fiskalnego dla klienta.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-108">Register a retail sale on a fiscal device that is connected to Retail point of sale (POS), such as a fiscal printer, and print a fiscal receipt for the customer.</span></span>
- <span data-ttu-id="cf7b0-109">Bezpieczne przesyłanie informacji związanych ze sprzedażą i zwrotami, które są wykonywane w programie Retail POS, do zewnętrznej usługi sieci web, która jest prowadzona przez urząd skarbowy.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-109">Securely submit information that is related to sales and returns that are completed in Retail POS to an external web-service that is operated by the tax authority.</span></span>
- <span data-ttu-id="cf7b0-110">Pomoc w zapewnieniu niezmienności danych transakcji sprzedaży za pomocą podpisów cyfrowych.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-110">Help guarantee inalterability of sales transaction data through digital signatures.</span></span>

<span data-ttu-id="cf7b0-111">Funkcji integracji fiskalnej w Retail jest podstawą zapewniającą wspólne rozwiązanie dla dalszego rozwoju i dostosowywania integracji między Retail POS a urządzeniami i usługami fiskalnymi.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-111">The fiscal integration functionality is a framework that provides a common solution for further development and customization of the integration between Retail POS and fiscal devices and services.</span></span> <span data-ttu-id="cf7b0-112">Funkcje obejmuje również przykładowe integracje fiskalne obsługujące podstawowe scenariusze sieci sprzedaży dla określonych krajów lub regionów i współpracujące z określonymi urządzeniami lub usługami fiskalnymi.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-112">The functionality also includes fiscal integration samples that support basic retail scenarios for specific countries or regions, and that work with specific fiscal devices or services.</span></span> <span data-ttu-id="cf7b0-113">Przykładowa integracja fiskalna składa się z kilku rozszerzeń składników modułu Retail i jest częścią zestawu SDK modułu Retail.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-113">A fiscal integration sample consists of several extensions of Retail components and is included in the software development kit (SDK).</span></span> <span data-ttu-id="cf7b0-114">Aby uzyskać więcej informacji o integracji próbek, zobacz [Omówienie integracji fiskalnej dla próbek w Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-114">For more information about the fiscal integration samples, see [Fiscal integration samples in the Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span></span> <span data-ttu-id="cf7b0-115">Aby uzyskać informacje dotyczące instalowania i używania zestawu SDK modułu Retail, zobacz [Omówienie zestawu SDK modułu Retail](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-115">For information about how to install and use the Retail SDK, see [Retail SDK overview](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span></span>

<span data-ttu-id="cf7b0-116">Do obsługi innych scenariusze, które nie są obsługiwane przez przykładową integrację fiskalną, do integracji programu Retail POS z innymi urządzeniami lub usługami fiskalnymi lub do spełnienia wymagań innych krajów lub regionów, należy albo rozszerzyć istniejącą przykładową integrację fiskalną lub utworzyć nową przykładową integrację na podstawie istniejącego przykładu.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-116">To support other scenarios that aren't supported by a fiscal integration sample, to integrate Retail POS with other fiscal devices or services, or to cover requirements of other countries or regions, you must either extend an existing fiscal integration sample or create a new sample by using an existing sample as an example.</span></span>

## <a name="fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices"></a><span data-ttu-id="cf7b0-117">Proces rejestracji fiskalnej i przykładowe integracje fiskalne dla urządzeń fiskalnych</span><span class="sxs-lookup"><span data-stu-id="cf7b0-117">Fiscal registration process and fiscal integration samples for fiscal devices</span></span>

<span data-ttu-id="cf7b0-118">Proces rejestracji fiskalnej w programie Retail POS może obejmować jeden lub klika kroków.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-118">A fiscal registration process in Retail POS can consist of one or more steps.</span></span> <span data-ttu-id="cf7b0-119">Każdy krok obejmuje rejestrację fiskalną konkretnych transakcji lub zdarzeń sprzedaży detalicznej na jednym urządzeniu fiskalnym lub w jednej usłudze fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-119">Each step involves fiscal registration of specific retail transactions or events in one fiscal device or service.</span></span> <span data-ttu-id="cf7b0-120">Następujące składniki rozwiązania uczestniczą w rejestracji fiskalnej w urządzeniu fiskalnym, które jest podłączone do aplikacji Hardware Station:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-120">The following solution components participate in the fiscal registration in a fiscal device that is connected to a Hardware station:</span></span>

- <span data-ttu-id="cf7b0-121">**Rozszerzenie środowiska uruchomieniowego Commerce Runtime (CRT)** — ten składnik szereguje dane transakcji/zdarzeń w formacie, który służy również do interakcji z urządzeniem fiskalnym, analizuje odpowiedzi z urządzenia fiskalnego i przechowywane odpowiedzi w bazie danych kanału.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-121">**Commerce runtime (CRT) extension** – This component serializes retail transaction/event data in the format that is also used for interaction with the fiscal device, parses responses from the fiscal device, and stores the responses in the channel database.</span></span> <span data-ttu-id="cf7b0-122">Rozszerzenia definiuje również określone transakcji i zdarzenia, które muszą zostać zarejestrowane.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-122">The extension also defines the specific transactions and events that must be registered.</span></span> <span data-ttu-id="cf7b0-123">Ten składnik jest często nazywany *dostawcą dokumentu fiskalnego*.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-123">This component is often referred to as a *fiscal document provider*.</span></span>
- <span data-ttu-id="cf7b0-124">**Rozszerzenie aplikacji Hardware Station** — ten składnik inicjuje komunikację z urządzeniem fiskalnym, wysyła żądania i bezpośrednie polecenia dla urządzenia fiskalnego na podstawie danych transakcji/zdarzenia sprzedaży detalicznej wyodrębnionych z dokumentu fiskalnego, i odbiera odpowiedzi z urządzenia fiskalnego.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-124">**Hardware station extension** – This component initializes the communication with the fiscal device, sends requests and direct commands to the fiscal device based on the retail transaction/event data that is extracted from the fiscal document, and receives responses from the fiscal device.</span></span> <span data-ttu-id="cf7b0-125">Ten składnik jest często nazywany *łącznikiem fiskalnym*.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-125">This component is often referred to as a *fiscal connector*.</span></span>

<span data-ttu-id="cf7b0-126">Przykładowa integracji fiskalna dla urządzenia fiskalnego zawiera rozszerzenia CRT i Hardware Station odpowiednio dla dostawcy dokumentu fiskalnego i łącznika fiskalnego.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-126">A fiscal integration sample for a fiscal device contains the CRT and Hardware station extensions for a fiscal document provider and a fiscal connector, respectively.</span></span> <span data-ttu-id="cf7b0-127">Zawiera również następujące konfiguracje komponentów:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-127">It also contains the following component configurations:</span></span>

- <span data-ttu-id="cf7b0-128">**Konfiguracja dostawcy dokumentu fiskalnego** – ta konfiguracja definiuje metodę wyjścia i format dokumentu fiskalnego.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-128">**Fiscal document provider configuration** – This configuration defines an output method and a format for fiscal documents.</span></span> <span data-ttu-id="cf7b0-129">Zawiera także mapowania danych dla podatków i metod płatności, aby zapewnić zgodność danych z programu Retail POS z wartością, która jest wstępnie zdefiniowana w oprogramowaniu układowym urządzenia fiskalnego.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-129">It also contains a data mapping for taxes and payment methods, to make data from Retail POS compatible with the values that are predefined in the fiscal device firmware.</span></span>
- <span data-ttu-id="cf7b0-130">**Konfiguracja łącznika fiskalnego** — ta konfiguracja określa fizyczną komunikację z określonym urządzeniem fiskalnym.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-130">**Fiscal connector configuration** – This configuration defines the physical communication with the specific fiscal device.</span></span>

<span data-ttu-id="cf7b0-131">Proces rejestracji fiskalnej dla określonej rejestracji POS jest definiowany przez odpowiednie ustawienie w profilu funkcji POS.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-131">A fiscal registration process for a specific POS register is defined by a corresponding setting in the POS functionality profile.</span></span> <span data-ttu-id="cf7b0-132">Aby uzyskać więcej szczegółów na temat sposobu konfigurowania procesu rejestracji fiskalnego, przesyłania konfiguracji dostawcy dokumentu fiskalnego i łącznika fiskalnego oraz zmieniania ich parametrów, zobacz [Konfigurowanie procesu rejestracji fiskalnej](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-132">For more details about how to configure a fiscal registration process, upload fiscal document provider and fiscal connector configurations, and change their parameters, see [Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

<span data-ttu-id="cf7b0-133">Poniższy przykład pokazuje przepływ realizacji typowej rejestracji fiskalnej dla urządzenia fiskalnego.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-133">The following example shows a typical fiscal registration execution flow for a fiscal device.</span></span> <span data-ttu-id="cf7b0-134">Przepływ rozpoczyna się od zdarzenia w POS (np. finalizacji transakcji sprzedaży) i implementuje następującą sekwencję kroków:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-134">The flow starts with an event in the POS (for example, finalization of a sales transaction) and implements the following sequence of steps:</span></span>

1. <span data-ttu-id="cf7b0-135">POS żąda dokumentu fiskalnego z CRT.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-135">The POS requests a fiscal document from CRT.</span></span>
2. <span data-ttu-id="cf7b0-136">CRT określa, czy bieżące zdarzenie wymaga rejestracji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-136">CRT determines whether the current event requires fiscal registration.</span></span>
3. <span data-ttu-id="cf7b0-137">Na podstawie konfiguracji procesu rejestracji fiskalnej CRT identyfikuje łącznik fiskalny i odpowiedniego dostawcę dokumentu fiskalnego używanego do użycia w rejestracji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-137">Based on the fiscal registration process settings, CRT identifies a fiscal connector and corresponding fiscal document provider to use for the fiscal registration.</span></span>
4. <span data-ttu-id="cf7b0-138">CRT uruchamia dostawcę dokumentu fiskalnego, który generuje dokument fiskalny (na przykład dokument XML), reprezentujący transakcję lub zdarzenie sprzedaży detalicznej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-138">CRT runs the fiscal document provider that generates a fiscal document (for example, an XML document) that represents the retail transaction or event.</span></span>
5. <span data-ttu-id="cf7b0-139">POS wysyła dokument fiskalny przygotowywany przez CRT do Hardware Station.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-139">The POS sends the fiscal document that CRT prepares to a Hardware station.</span></span>
6. <span data-ttu-id="cf7b0-140">Hardware Station uruchamia łącznik fiskalny, który przetwarza dokument fiskalny i przesyła go do urządzenia fiskalnego lub usługi fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-140">The Hardware station runs the fiscal connector that processes the fiscal document and communicates it to the fiscal device or service.</span></span>
7. <span data-ttu-id="cf7b0-141">POS analizuje odpowiedź z urządzenia fiskalnego lub usługi fiskalnego w celu określenia, czy rejestracja fiskalna zakończyła się pomyślnie.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-141">The POS analyzes the response from the fiscal device or service to determine whether the fiscal registration was successful.</span></span>
8. <span data-ttu-id="cf7b0-142">CRT zapisuje odpowiedź w bazie danych kanału.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-142">CRT saves the response to the channel database.</span></span>

<span data-ttu-id="cf7b0-143">![Schemat rozwiązania](media/emea-fiscal-integration-solution.png "Schemat rozwiązania")</span><span class="sxs-lookup"><span data-stu-id="cf7b0-143">![Solution schema](media/emea-fiscal-integration-solution.png "Solution schema")</span></span>

## <a name="error-handling"></a><span data-ttu-id="cf7b0-144">Obsługa błędów</span><span class="sxs-lookup"><span data-stu-id="cf7b0-144">Error handling</span></span>

<span data-ttu-id="cf7b0-145">Schemat integracji fiskalnej zapewnia następujące opcje obsługi błędów podczas rejestracji fiskalnej:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-145">The fiscal integration framework provides the following options to handle failures during fiscal registration:</span></span>

- <span data-ttu-id="cf7b0-146">**Ponów próbę** — operator może użyć tej opcji do szybkiego naprawienia awarii i ponownego uruchomienia rejestracji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-146">**Retry** – Operators can use this option when the failure can be resolved quickly, and the fiscal registration can be rerun.</span></span> <span data-ttu-id="cf7b0-147">Na przykład ta opcja może być używana, kiedy urządzenie fiskalne nie jest podłączone, w drukarce fiskalnej nie ma papieru lub papier się w niej zakleszczy.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-147">For example, this option can be used when the fiscal device isn't connected, the fiscal printer is out of paper, or there is a paper jam in the fiscal printer.</span></span>
- <span data-ttu-id="cf7b0-148">**Anuluj** — ta opcja pozwala operatorowi odłożyć w czasie rejestrację fiskalną bieżącej transakcji lub zdarzenia w przypadku niepowodzenia.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-148">**Cancel** – This option lets operators postpone the fiscal registration of the current transaction or event if it fails.</span></span> <span data-ttu-id="cf7b0-149">Po odroczeniu rejestracji operator może kontynuować pracę w POS i może zakończyć każdą inną operację, dla której rejestracja fiskalna nie jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-149">After the registration is postponed, the operator can continue to work on the POS and can complete any operation that the fiscal registration isn't required for.</span></span> <span data-ttu-id="cf7b0-150">Gdy wystąpi dowolne zdarzeniem, które wymaga rejestracji fiskalnej w POS (np. otwarcie nowej transakcji), automatycznie wyświetli się okno dialogowe z informacją, że poprzednia transakcja nie została prawidłowo zarejestrowana, i dostępnymi opcjami obsługi błędu.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-150">When any event that requires the fiscal registration occurs in the POS (for example, a new transaction is opened), the error handling dialog box automatically appears to notify the operator that the previous transaction wasn't correctly registered and to provide the error handling options.</span></span>
- <span data-ttu-id="cf7b0-151">**Pomiń** — operator może użyć tej opcji, gdy rejestrację fiskalną można pominąć w określonych warunkach i można kontynuować wykonywanie zwykłych operacji w POS.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-151">**Skip** – Operators can use this option when the fiscal registration can be omitted under specific conditions and regular operations can be continued on the POS.</span></span> <span data-ttu-id="cf7b0-152">Na przykład ta opcja może zostać użyta gdy transakcja sprzedaży, dla której rejestracja fiskalna nie powiodła się, może zostać zarejestrowana w specjalnym arkuszu papierowym.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-152">For example, this option can be used when a sales transaction that the fiscal registration failed for can be registered in a special paper journal.</span></span>
- <span data-ttu-id="cf7b0-153">**Oznacz jako zarejestrowaną** — operator może użyć tej opcji, gdy transakcja faktycznie została zarejestrowana za pomocą urządzenia fiskalnego (na przykład paragon fiskalny został wydrukowany), ale wystąpił błąd podczas zapisywania odpowiedzi fiskalnej w bazie danych kanału.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-153">**Mark as registered** – Operators can use this option when the transaction was actually registered in the fiscal device (for example, a fiscal receipt was printed), but a failure occurred when the fiscal response was being saved to the channel database.</span></span>

> [!NOTE]
> <span data-ttu-id="cf7b0-154">Opcje **Pomiń** i **Oznacz jako zarejestrowaną** muszą być aktywowane w procesie rejestracji fiskalnej obrachunkowej, zanim zostaną użyte.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-154">The **Skip** and **Mark as registered** options must be activated in the fiscal registration process before they are used.</span></span> <span data-ttu-id="cf7b0-155">Ponadto operatorzy muszą mieć odpowiednie uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-155">In addition, corresponding permissions must be granted to operators.</span></span>

<span data-ttu-id="cf7b0-156">Opcje **Pomiń** i **Oznacz jako zarejestrowaną** pozwalają na rejestrowanie określonych informacji przez kody informacyjne dotyczących awarii, np. przyczyny awarii lub uzasadnienia pominięcia rejestracji fiskalnej lub oznaczenia transakcji jako zarejestrowanej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-156">The **Skip** and **Mark as registered** options enable info codes to capture some specific information about the failure, such as the reason for the failure or a justification for skipping the fiscal registration or marking the transaction as registered.</span></span> <span data-ttu-id="cf7b0-157">Aby uzyskać więcej informacji o sposobie konfigurowania parametrów obsługi błędów, zobacz [Konfigurowanie obsługi błędów](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-157">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="optional-fiscal-registration"></a><span data-ttu-id="cf7b0-158">Opcjonalna rejestracja fiskalna</span><span class="sxs-lookup"><span data-stu-id="cf7b0-158">Optional fiscal registration</span></span>

<span data-ttu-id="cf7b0-159">Rejestracja fiskalna może być obowiązkowa dla niektórych operacji i opcjonalna dla innych scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-159">Fiscal registration might be mandatory for some operations but optional for others.</span></span> <span data-ttu-id="cf7b0-160">Na przykład rejestracja fiskalna zwykłej sprzedaży i zwrotów może być obowiązkowa, ale rejestracja fiskalna operacji związanych z wpłatami odbiorcy może być opcjonalna.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-160">For example, the fiscal registration of regular sales and returns might be mandatory, but the fiscal registration of operations that are related to customer deposits might be optional.</span></span> <span data-ttu-id="cf7b0-161">W tym przypadku brak rejestracji fiskalnej sprzedaży może blokować sprzedaż w przyszłości, ale niedokonanie rejestracji fiskalnej wpłat odbiorcy nie będzie blokowało sprzedaży w przyszłości.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-161">In this case, failure to complete the fiscal registration of a sale should block further sales, but failure to complete the fiscal registration of a customer deposit should not block further sales.</span></span> <span data-ttu-id="cf7b0-162">Aby odróżnić operacje obowiązkowe od opcjonalnych, zalecamy ich obsługę przez osobnych dostawców dokumentów oraz ustalenie osobnych kroków w rejestracji fiskalnej dla tych dostawców.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-162">To distinguish mandatory and optional operations, we recommend that you handle them through different document providers, and that you set up separate steps in the fiscal registration process for those providers.</span></span> <span data-ttu-id="cf7b0-163">Parametr **Kontynuuj przy błędzie** powinien być włączony dla wszystkich kroków związanych z opcjonalną rejestracją fiskalną.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-163">The **Continue on error** parameter should be enabled for any step that is related to optional fiscal registration.</span></span> <span data-ttu-id="cf7b0-164">Aby uzyskać więcej informacji o sposobie konfigurowania parametrów obsługi błędów, zobacz [Konfigurowanie obsługi błędów](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-164">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="manually-running-fiscal-registration"></a><span data-ttu-id="cf7b0-165">Ręczne uruchomienie rejestracji fiskalnej</span><span class="sxs-lookup"><span data-stu-id="cf7b0-165">Manually running fiscal registration</span></span>

<span data-ttu-id="cf7b0-166">Jeśli rejestracja fiskalna transakcji lub zdarzenia zostały odroczone po awarii (np. operator wybrał opcję **Anuluj** w polu dialogowym obsługi błędu), można ręcznie ponownie uruchomić rejestrację fiskalną przez wywołanie odpowiedniej operacji.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-166">If the fiscal registration of a transaction or event has been postponed after a failure (for example, if the operator selected **Cancel** in the error handling dialog box), you can manually rerun the fiscal registration by invoking a corresponding operation.</span></span> <span data-ttu-id="cf7b0-167">Aby dowiedzieć się więcej, zobacz [Włączanie ręcznego wykonywania odroczonej rejestracji fiskalnej](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-167">For more details, see [Enable manual execution of postponed fiscal registration](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span></span>

### <a name="fiscal-registration-health-check"></a><span data-ttu-id="cf7b0-168">Sprawdzanie kondycji rejestracji fiskalnej</span><span class="sxs-lookup"><span data-stu-id="cf7b0-168">Fiscal registration health check</span></span>

<span data-ttu-id="cf7b0-169">Procedury sprawdzania kondycji rejestracji fiskalnej weryfikują dostępność urządzenia fiskalnego lub usługi po wystąpieniu określonego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-169">The health check procedure for fiscal registrations verifies the availability of the fiscal device or service when specific events occur.</span></span> <span data-ttu-id="cf7b0-170">Jeśli nie można obecnie dokończyć rejestracji fiskalnej, operator zostanie powiadomiony z wyprzedzeniem.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-170">If the fiscal registration can't currently be completed, the operator is notified in advance.</span></span>

<span data-ttu-id="cf7b0-171">Punkty sprzedaży uruchamiają procedurę sprawdzania kondycji, gdy wystąpią następujące zdarzenia:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-171">The POS runs the health check when the following events occur:</span></span>

- <span data-ttu-id="cf7b0-172">Nowa transakcja jest otwarta.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-172">A new transaction is opened.</span></span>
- <span data-ttu-id="cf7b0-173">Wstrzymana transakcja została wznowiona.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-173">A suspended transaction is recalled.</span></span>
- <span data-ttu-id="cf7b0-174">Transakcja sprzedaży lub zwrotu jest zakończona.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-174">A sales or return transaction is finalized.</span></span>

<span data-ttu-id="cf7b0-175">Jeśli sprawdzanie kondycji nie powiedzie się, przy punkcie sprzedaży zostanie wyświetlone okno dialogowe sprawdzania kondycji.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-175">If the health check fails, the POS shows the health check dialog box.</span></span> <span data-ttu-id="cf7b0-176">To okno dialogowe zawiera następujące przyciski:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-176">This dialog box provides the following buttons:</span></span>

- <span data-ttu-id="cf7b0-177">**OK** — kliknięcie tego przycisku umożliwia operatorowi zignorowanie błędu sprawdzania kondycji i kontynuowanie przetwarzania operacji.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-177">**OK** – This button lets the operator ignore a health check error and continue to process the operation.</span></span> <span data-ttu-id="cf7b0-178">Operator może nacisnąć ten przycisk tylko wtedy, gdy ma włączone uprawnienie **Zezwalaj na pominięcie błędu sprawdzania kondycji**.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-178">Operators can select this button only if the **Allow skip health check error** permission is enabled for them.</span></span>
- <span data-ttu-id="cf7b0-179">**Anuluj** — Jeśli operator wybierze ten przycisk, punkt sprzedaży anuluje ostatnią akcję (na przykład towar nie zostanie dodany do nowej transakcji).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-179">**Cancel** – If the operator selects this button, the POS cancels the last action (for example, an item isn't added to a new transaction).</span></span>

> [!NOTE]
> <span data-ttu-id="cf7b0-180">Sprawdzanie kondycji jest uruchamiane tylko wtedy, gdy bieżąca operacja wymaga rejestracji fiskalnej, a parametr **Kontynuuj przy błędzie** jest wyłączony dla bieżącego etapu procesu rejestracji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-180">The health check is run only if the current operation requires fiscal registration, and if  the **Continue on error** parameter is disabled for the current step of the fiscal registration process.</span></span> <span data-ttu-id="cf7b0-181">Aby uzyskać więcej informacji, zobacz [Określanie ustawienia ustawień obsługi błędów](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-181">For more details, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

## <a name="storing-fiscal-response-in-fiscal-transaction"></a><span data-ttu-id="cf7b0-182">Zapisywanie odpowiedzi fiskalnej w transakcji fiskalnej</span><span class="sxs-lookup"><span data-stu-id="cf7b0-182">Storing fiscal response in fiscal transaction</span></span>

<span data-ttu-id="cf7b0-183">Po pomyślnym zakończeniu rejestracji fiskalnej transakcji lub zdarzenia transakcja fiskalna jest tworzona w bazie danych kanału z łączem do oryginalnej transakcji lub oryginalnego zdarzenia.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-183">When fiscal registration of a transaction or event is successful, a fiscal transaction is created in the channel database and linked to the original transaction or event.</span></span> <span data-ttu-id="cf7b0-184">Podobnie w przypadku wybrania opcji **Pomiń** lub **Oznaczanie jako zarejestrowaną** dla nieudanej rejestracji fiskalnej ta informacja jest zapisywana w transakcji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-184">Similarly, if the **Skip** or **Mark as registered** option is selected for a failed fiscal registration, this information is stored in a fiscal transaction.</span></span> <span data-ttu-id="cf7b0-185">Transakcja fiskalna zawiera odpowiedź fiskalną z urządzenia fiskalnego lub usługi fiskalnej</span><span class="sxs-lookup"><span data-stu-id="cf7b0-185">A fiscal transaction holds the fiscal response of the fiscal device or service.</span></span> <span data-ttu-id="cf7b0-186">Jeśli proces rejestracji fiskalnej składa się z kilku kroków, transakcja fiskalna jest tworzona dla każdego kroku procesu, który spowodował powodzenie lub niepowodzenie rejestracji.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-186">If the fiscal registration process consists of several steps, a fiscal transaction is created for each step of the process that resulted in a successful or failed registration.</span></span>

<span data-ttu-id="cf7b0-187">Transakcje fiskalne są przenoszone do Retail Headquarters z pomocą *zadania P* wraz z transakcjami sieci sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-187">Fiscal transactions are transferred to Retail Headquarters by the *P-job*, together with retail transactions.</span></span> <span data-ttu-id="cf7b0-188">Na skróconej karcie **Transakcje fiskalne** na stronie **Transakcje sklepu detalicznego** można wyświetlić transakcje fiskalne, które są połączone z transakcjami sieci sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-188">On the **Fiscal transactions** FastTab of the **Retail store transactions** page, you can view the fiscal transactions that are linked to retail transactions.</span></span>

<span data-ttu-id="cf7b0-189">Transakcja fiskalna przechowuje następujące informacje:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-189">A fiscal transaction stores the following details:</span></span>

- <span data-ttu-id="cf7b0-190">Szczegóły procesu rejestracji fiskalnej (proces, grupa łącznika, łącznik itd.)</span><span class="sxs-lookup"><span data-stu-id="cf7b0-190">Fiscal registration process details (process, connector group, connector, and so on).</span></span> <span data-ttu-id="cf7b0-191">Przechowywane są także numer seryjny urządzenia fiskalnego w polu **Numer rejestru**, jeśli te informacje są uwzględniane w odpowiedzi fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-191">It also stores the serial number of the fiscal device in the **Register number** field, if this information is included in the fiscal response.</span></span>
- <span data-ttu-id="cf7b0-192">Stan rejestracji fiskalnej: **Zakończona** dla pomyślnej rejestracji **Pominięty** jeśli operator wybrał opcję **Pomiń** dla rejestracji nieudanej lub **Oznaczona jako zarejestrowane**, jeśli operator wybrał opcję **Oznacz jako zarejestrowaną**.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-192">The status of the fiscal registration: **Completed** for successful registration, **Skipped** if the operator selected the **Skip** option for a failed registration, or **Marked as registered** if the operator selected the **Mark as registered** option.</span></span>
- <span data-ttu-id="cf7b0-193">Transakcje kodu informacji powiązane z wybraną transakcją fiskalną.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-193">Info code transactions that are related to a selected fiscal transaction.</span></span> <span data-ttu-id="cf7b0-194">Aby wyświetlić transakcje kodu informacji na skróconej karcie **Transakcje fiskalne**, wybierz transakcję fiskalną ze stanem **Pominięta** lub **Oznaczona jako zarejestrowana**, a następnie wybierz **Transakcje kodu informacji**.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-194">To view the info code transactions, on the **Fiscal transactions** FastTab, select a fiscal transaction that has a status of **Skipped** or **Marked as registered**, and then select **Info code transactions**.</span></span>

## <a name="fiscal-texts-for-discounts"></a><span data-ttu-id="cf7b0-195">Teksty fiskalne dla rabatów</span><span class="sxs-lookup"><span data-stu-id="cf7b0-195">Fiscal texts for discounts</span></span>

<span data-ttu-id="cf7b0-196">Niektóre kraje i regiony mają specjalne wymagania dotyczące dodatkowych tekstów, które muszą być wydrukowane na paragonach fiskalnych przy stosowaniu różnych typów rabatów.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-196">Some countries or regions have special requirements about additional texts that must be printed on fiscal receipts when different kinds of discounts are applied.</span></span> <span data-ttu-id="cf7b0-197">Funkcja integracji fiskalnej umożliwia określanie specjalnego tekstu dla rabat, który zostanie wydrukowany po wierszu rabatu na paragonie fiskalnym.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-197">The fiscal integration functionality lets you set up a special text for a discount that is printed after a discount line on a fiscal receipt.</span></span> <span data-ttu-id="cf7b0-198">Dla rabatów ręcznych można skonfigurować tekst fiskalny dla kodu informacji, który został określony jako kod informacji **Rabatu produktu** w profilu funkcji POS.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-198">For manual discounts, you can configure a fiscal text for the info code that is specified as the **Product discount** info code in the POS functionality profile.</span></span> <span data-ttu-id="cf7b0-199">Aby uzyskać więcej informacji o sposobie konfigurowania rabatów fiskalnych, zobacz [Konfigurowanie tekstów fiskalnych dla rabatów](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-199">For more details about how to set up fiscal texts for discounts, see [Set up fiscal texts for discounts](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span></span>

## <a name="printing-fiscal-x-and-fiscal-z-reports"></a><span data-ttu-id="cf7b0-200">Drukowanie raportów fiskalnych X i końcowych raportów sprzedaży</span><span class="sxs-lookup"><span data-stu-id="cf7b0-200">Printing fiscal X and fiscal Z reports</span></span>

<span data-ttu-id="cf7b0-201">Funkcja integracji fiskalnej obsługuje generowanie zestawień na koniec dnia, które są specyficzne dla zintegrowanego urządzenia fiskalnego lub usługi fiskalnej:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-201">Fiscal integration functionality supports generation of end-of-day statements that are specific to the integrated fiscal device or service:</span></span>

- <span data-ttu-id="cf7b0-202">Nowe przyciski uruchamiające odpowiednie operacje powinny zostać dodane do układu ekranu POS.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-202">New buttons that run corresponding operations should be added to the POS screen layout.</span></span> <span data-ttu-id="cf7b0-203">Aby uzyskać więcej informacji, zobacz [Konfigurowanie raportów X / końcowych raportów sprzedaży w POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span><span class="sxs-lookup"><span data-stu-id="cf7b0-203">For more details, see [Set up fiscal X/Z reports from the POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span></span>
- <span data-ttu-id="cf7b0-204">W przykładowej integracji fiskalnej te operacje powinny być dopasowane do odpowiednich operacji fiskalnych urządzenia fiskalnego.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-204">In the fiscal integration sample, these operations should be matched to the corresponding operations of the fiscal device.</span></span>

## <a name="fiscal-integration-samples-in-the-retail-sdk"></a><span data-ttu-id="cf7b0-205">Przykładowa integracja fiskalna w zestawie SDK modułu Retail</span><span class="sxs-lookup"><span data-stu-id="cf7b0-205">Fiscal integration samples in the Retail SDK</span></span>

<span data-ttu-id="cf7b0-206">Następujące przykładowe integracje fiskalne są obecnie dostępne w zestawie SDK modułu Retail:</span><span class="sxs-lookup"><span data-stu-id="cf7b0-206">The following fiscal integration samples are currently available in the Retail SDK:</span></span>

- [<span data-ttu-id="cf7b0-207">Przykładowa integracja drukarki fiskalnej dla Włoch</span><span class="sxs-lookup"><span data-stu-id="cf7b0-207">Fiscal printer integration sample for Italy</span></span>](emea-ita-fpi-sample.md)
- [<span data-ttu-id="cf7b0-208">Przykładowa integracja drukarki fiskalnej (Polska)</span><span class="sxs-lookup"><span data-stu-id="cf7b0-208">Fiscal printer integration sample for Poland</span></span>](emea-pol-fpi-sample.md)
- [<span data-ttu-id="cf7b0-209">Przykład integracji usługi rejestracji fiskalnej (Austria)</span><span class="sxs-lookup"><span data-stu-id="cf7b0-209">Fiscal registration service integration sample for Austria</span></span>](emea-aut-fi-sample.md)
- [<span data-ttu-id="cf7b0-210">Przykład integracji usługi rejestracji fiskalnej (Czechy)</span><span class="sxs-lookup"><span data-stu-id="cf7b0-210">Fiscal registration service integration sample for Czech Republic</span></span>](emea-cze-fi-sample.md)

<span data-ttu-id="cf7b0-211">Następujące funkcje integracji fiskalnej są także dostępne w zestawie SDK modułu Retail, ale obecnie nie używają schematu integracji fiskalnej.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-211">The following fiscal integration functionality is also available in the Retail SDK but doesn't currently take advantage of the fiscal integration framework.</span></span> <span data-ttu-id="cf7b0-212">Migracja tej funkcji do schematu integracji fiskalnej jest planowana w późniejszych aktualizacjach.</span><span class="sxs-lookup"><span data-stu-id="cf7b0-212">Migration of this functionality to the fiscal integration framework is planned for later updates.</span></span>

- [<span data-ttu-id="cf7b0-213">Podpis cyfrowy dla Francji</span><span class="sxs-lookup"><span data-stu-id="cf7b0-213">Digital signature for France</span></span>](emea-fra-cash-registers.md)
- [<span data-ttu-id="cf7b0-214">Podpis cyfrowy dla Norwegii</span><span class="sxs-lookup"><span data-stu-id="cf7b0-214">Digital signature for Norway</span></span>](emea-nor-cash-registers.md)
- [<span data-ttu-id="cf7b0-215">Przykładowa integracja jednostki kontrolnej dla Szwecji</span><span class="sxs-lookup"><span data-stu-id="cf7b0-215">Control unit integration sample for Sweden</span></span>](./retail-sdk-control-unit-sample.md)
