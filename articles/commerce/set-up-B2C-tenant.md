---
title: Konfigurowanie dzierżawy B2C w usłudze Commerce
description: W tym temacie opisano sposób konfigurowania dzierżawcy Azure Active Directory (Azure AD) dzierżawców biznesowych (B2C) dla uwierzytelniania witryny użytkownika w programie Dynamics 365 Commerce.
author: BrianShook
ms.date: 03/17/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: retail
ms.author: brshoo
ms.search.validFrom: 2020-02-13
ms.dyn365.ops.version: ''
ms.openlocfilehash: 84b3a3630d3809c05f87242784207c3c4af160ce
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/11/2021
ms.locfileid: "6018587"
---
# <a name="set-up-a-b2c-tenant-in-commerce"></a><span data-ttu-id="95055-103">Konfigurowanie dzierżawy B2C w usłudze Commerce</span><span class="sxs-lookup"><span data-stu-id="95055-103">Set up a B2C tenant in Commerce</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="95055-104">W tym temacie opisano sposób konfigurowania dzierżawcy Azure Active Directory (Azure AD) dzierżawców biznesowych (B2C) dla uwierzytelniania witryny użytkownika w programie Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-104">This topic describes how to set up your Azure Active Directory (Azure AD) business-to-consumer (B2C) tenants for user site authentication in Dynamics 365 Commerce.</span></span>

<span data-ttu-id="95055-105">Dynamics 365 Commerce używa Azure AD B2C do obsługi przenoszonych poświadczeń i przepływów uwierzytelniania użytkowników.</span><span class="sxs-lookup"><span data-stu-id="95055-105">Dynamics 365 Commerce uses Azure AD B2C to support user credential and authentication flows.</span></span> <span data-ttu-id="95055-106">Użytkownik może zarejestrować się, zalogować się i zresetować swoje hasło za pośrednictwem tych przepływów.</span><span class="sxs-lookup"><span data-stu-id="95055-106">A user can sign up, sign in, and reset their password through these flows.</span></span> <span data-ttu-id="95055-107">Azure AD B2C przechowuje poufne informacje o uwierzytelnianiu użytkownika, takie jak nazwa użytkownika i hasło.</span><span class="sxs-lookup"><span data-stu-id="95055-107">Azure AD B2C stores sensitive user authentication information, such as username and password.</span></span> <span data-ttu-id="95055-108">Rekord użytkownika w dzierżawie B2C będzie przechowywał zarówno rekord konta lokalnego B2C, jak i rekord dostawcy tożsamości socjalnej B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-108">The user record in the B2C tenant will store either a B2C local account record or a B2C social identity provider record.</span></span> <span data-ttu-id="95055-109">Te rekordy B2C zostaną połączone z rekordem odbiorcy w środowisku Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-109">These B2C records will link back to the customer record in the Commerce environment.</span></span>

> [!WARNING] 
> <span data-ttu-id="95055-110">Azure AD B2C wycofa stare (starsze) przepływy użytkowników do 1 sierpnia 2021.</span><span class="sxs-lookup"><span data-stu-id="95055-110">Azure AD B2C will retire old (legacy) user flows by August 1, 2021.</span></span> <span data-ttu-id="95055-111">Dlatego należy zaplanować migrowanie przepływów użytkownika do nowej zalecanej wersji.</span><span class="sxs-lookup"><span data-stu-id="95055-111">Therefore, you should plan to migrate your user flows to the new recommended version.</span></span> <span data-ttu-id="95055-112">Nowa wersja zapewnia parzystość funkcji i nowe funkcje.</span><span class="sxs-lookup"><span data-stu-id="95055-112">The new version provides feature parity and new features.</span></span> <span data-ttu-id="95055-113">Biblioteka modułów dla wersji Commerce 10.0.15 lub wyższa powinna być używana z zalecanymi przepływami użytkowników B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-113">The module library for Commerce version 10.0.15 or higher should be used with the recommended B2C user flows.</span></span> <span data-ttu-id="95055-114">Aby uzyskać więcej informacji, zobacz sekcję [Przepływy użytkowników w Azure Active Directory B2C](/azure/active-directory-b2c/user-flow-overview).</span><span class="sxs-lookup"><span data-stu-id="95055-114">For more information, see [User flows in Azure Active Directory B2C](/azure/active-directory-b2c/user-flow-overview).</span></span>
 
 > [!NOTE]
 > <span data-ttu-id="95055-115">Środowiska oceniania handlu są wstępnie załadowane do dzierżawy Azure AD B2C w celach demonstracyjnych.</span><span class="sxs-lookup"><span data-stu-id="95055-115">Commerce evaluation environments come with a pre-loaded Azure AD B2C tenant for demonstration purposes.</span></span> <span data-ttu-id="95055-116">Ładowanie własnej dzierżawy Azure AD B2C przy użyciu poniższych kroków nie jest wymagane w środowiskach oceniania.</span><span class="sxs-lookup"><span data-stu-id="95055-116">Loading your own Azure AD B2C tenant using the steps below is not required for evaluation environments.</span></span>

## <a name="create-or-link-to-an-existing-aad-b2c-tenant-in-the-azure-portal"></a><span data-ttu-id="95055-117">Utwórz lub Połącz istniejącą dzierżawę B2C w usłudze AAD w portalu Azure</span><span class="sxs-lookup"><span data-stu-id="95055-117">Create or link to an existing AAD B2C tenant in the Azure portal</span></span>

1. <span data-ttu-id="95055-118">Zaloguj się do witryny [Azure Portal](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="95055-118">Sign in to the [Azure portal](https://portal.azure.com/).</span></span>
1. <span data-ttu-id="95055-119">W menu portalu Azure wybierz polecenie **Utwórz zasób**.</span><span class="sxs-lookup"><span data-stu-id="95055-119">From the Azure portal menu, select **Create a resource**.</span></span> <span data-ttu-id="95055-120">Należy pamiętać o użyciu subskrypcji i katalogu, który będzie połączony ze środowiskiem Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-120">Be sure to use the subscription and directory that will be connected with your Commerce environment.</span></span>

    ![Utwórz zasób w portalu Azure](./media/B2CImage_1.png)

1. <span data-ttu-id="95055-122">Przejdź do **Tożsamość \> Azure Active Directory B2C**.</span><span class="sxs-lookup"><span data-stu-id="95055-122">Go to **Identity \> Azure Active Directory B2C**.</span></span>
1. <span data-ttu-id="95055-123">Na stronie **Utwórz nowego B2C dzierżawę lub Połącz z istniejącą stroną dzierżawy**, Skorzystaj z jednej z poniższych opcji, która najlepiej pasuje do potrzeb firmy:</span><span class="sxs-lookup"><span data-stu-id="95055-123">Once on the **Create New B2C Tenant or Link to existing Tenant** page, use one of the options below that best suits your company's needs:</span></span>

    - <span data-ttu-id="95055-124">**Utwórz nową dzierżawę B2C Azure AD**: Ta opcja służy do utworzenia nowej dzierżawy B2C w usłudze AAD.</span><span class="sxs-lookup"><span data-stu-id="95055-124">**Create a new Azure AD B2C Tenant**: Use this option to create a new AAD B2C tenant.</span></span>
        1. <span data-ttu-id="95055-125">Wybierz **Stwórz nową dzierżawę B2C Azure AD**.</span><span class="sxs-lookup"><span data-stu-id="95055-125">Select **Create a new Azure AD B2C Tenant**.</span></span>
        1. <span data-ttu-id="95055-126">W obszarze **Nazwa organizacji** wprowadź nazwę organizacji.</span><span class="sxs-lookup"><span data-stu-id="95055-126">Under **Organization name**, enter the organization name.</span></span>
        1. <span data-ttu-id="95055-127">W obszarze **początkowa nazwa domeny** wprowadź początkową nazwę domeny.</span><span class="sxs-lookup"><span data-stu-id="95055-127">Under **Initial domain name**, enter the initial domain name.</span></span>
        1. <span data-ttu-id="95055-128">W przypadku **kraju lub regionu** wybierz kraj lub region.</span><span class="sxs-lookup"><span data-stu-id="95055-128">For **Country or region**, select the country or region.</span></span>
        1. <span data-ttu-id="95055-129">Wybierz przycisk **Utwórz**, aby utworzyć dzierżawę.</span><span class="sxs-lookup"><span data-stu-id="95055-129">Select **Create** to create the tenant.</span></span>

     ![Tworzenie nowej dzierżawy Azure AD](./media/B2CImage_2.png)

     - <span data-ttu-id="95055-131">**Połącz istniejącą dzierżawę B2C Azure AD z moją subskrypcją systemu Azure**: Tę opcję należy użyć, jeśli istnieje już dzierżawa B2C Azure AD, do której ma zostać utworzone łącze.</span><span class="sxs-lookup"><span data-stu-id="95055-131">**Link an existing Azure AD B2C Tenant to my Azure subscription**: Use this option if you already have an Azure AD B2C tenant you want to link to.</span></span>
        1. <span data-ttu-id="95055-132">Wybierz **łącze do istniejącej dzierżawy B2C Azure AD do mojej subskrypcji systemu Azure**.</span><span class="sxs-lookup"><span data-stu-id="95055-132">Select **Link an existing Azure AD B2C Tenant to my Azure subscription**.</span></span>
        1. <span data-ttu-id="95055-133">W **Dzierżawa B2C Azure AD** wybierz odpowiednią dzierżawę B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-133">For **Azure AD B2C Tenant**, select the appropriate B2C tenant.</span></span> <span data-ttu-id="95055-134">Jeśli w polu wyboru zostanie wyświetlona wiadomość „nie znaleziono dzierżawców B2C”, nie masz istniejącej uprawnionej dzierżawy B2C i będzie konieczne utworzenie nowej.</span><span class="sxs-lookup"><span data-stu-id="95055-134">If the message "No eligible B2C Tenants found" appears in the selection box, you do not have an existing eligible B2C tenant and will need to create a new one.</span></span>
        1. <span data-ttu-id="95055-135">W **Grupie zasobów** wybierz opcję **Utwórz nową**.</span><span class="sxs-lookup"><span data-stu-id="95055-135">For **Resource group**, select **Create new**.</span></span> <span data-ttu-id="95055-136">Wprowadź **nazwę** grupy zasobów, która będzie zawierać dzierżawcę, wybierz **lokalizację grupy zasobów**, a następnie wybierz pozycję **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="95055-136">Enter a **Name** for the resource group that will contain the tenant, select the **Resource group location**, and then select **Create**.</span></span>

    ![Wybierz łącze do istniejącej dzierżawy B2C Azure AD do subskrypcji systemu Azure](./media/B2CImage_3.png)

1. <span data-ttu-id="95055-138">Po utworzeniu nowego katalogu B2C Azure AD (może to chwilę potrwać) na pulpicie nawigacyjnym pojawi się łącze do nowego katalogu.</span><span class="sxs-lookup"><span data-stu-id="95055-138">Once the new Azure AD B2C directory is created (this may take a few moments), a link to the new directory will appear on the dashboard.</span></span> <span data-ttu-id="95055-139">To łącze spowoduje przekierowanie do strony „Witamy w B2C usługi Azure Active Directory”.</span><span class="sxs-lookup"><span data-stu-id="95055-139">This link will direct you to the "Welcome to Azure Active Directory B2C" page.</span></span>

    ![Połącz z nowym katalogiem usługi AAD](./media/B2CImage_4.png)

> [!NOTE]
> <span data-ttu-id="95055-141">Jeśli masz wiele subskrypcji na koncie systemu Azure lub skonfigurowano dzierżawcę B2C bez łączenia z aktywną subskrypcją, transparent do **rozwiązywania problemów** poinformuje dzierżawcę o połączeniu z subskrypcją.</span><span class="sxs-lookup"><span data-stu-id="95055-141">If you have multiple subscriptions within your Azure account or have set up the B2C tenant without linking to an active subscription, a **Troubleshoot** banner will direct you to link the tenant to a subscription.</span></span> <span data-ttu-id="95055-142">Wybierz komunikat rozwiązywania problemów i postępuj zgodnie z instrukcjami, aby rozwiązać problem z subskrypcją.</span><span class="sxs-lookup"><span data-stu-id="95055-142">Select the troubleshooting message and follow the instructions to resolve the subscription issue.</span></span>

<span data-ttu-id="95055-143">Poniższy obraz przedstawia przykład transparentu B2C Azure AD **Rozwiązywanie problemów**.</span><span class="sxs-lookup"><span data-stu-id="95055-143">The following image shows an example of an Azure AD B2C **Troubleshoot** banner.</span></span>

![Ostrzeżenie pokazujące katalog, który nie ma aktywnej subskrypcji](./media/B2CImage_5.png)

## <a name="create-the-b2c-application"></a><span data-ttu-id="95055-145">Tworzenie aplikacji B2C</span><span class="sxs-lookup"><span data-stu-id="95055-145">Create the B2C application</span></span>

<span data-ttu-id="95055-146">Po utworzeniu dzierżawy B2C użytkownik utworzy aplikację B2C w nowej dzierżawie Azure AD B2C w celu interakcji z Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-146">Once the B2C tenant has been created, you will create a B2C application within your new Azure AD B2C tenant to interact with Commerce.</span></span>

<span data-ttu-id="95055-147">Aby utworzyć aplikację B2C, należy wykonać następujące czynności.</span><span class="sxs-lookup"><span data-stu-id="95055-147">To create the B2C application, follow these steps.</span></span>

1. <span data-ttu-id="95055-148">W portalu Azure przejdź do **Rejestracja aplikacji** i wybierz opcję **Nowa rejestracja**.</span><span class="sxs-lookup"><span data-stu-id="95055-148">In the Azure portal, select **App registrations**, and then select **New registration**.</span></span>
1. <span data-ttu-id="95055-149">W obszarze **Nazwa** wprowadź nazwę aplikacji Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-149">Under **Name**, enter the name to give this Azure AD B2C application.</span></span>
1. <span data-ttu-id="95055-150">W obszarze **Obsługiwane typy kont** wybierz **Konta w dowolnym dostawcy tożsamości lub katalogu organizacyjnym (do uwierzytelniania użytkowników za pomocą przepływów użytkownika)**.</span><span class="sxs-lookup"><span data-stu-id="95055-150">Under **Supported account types**, select **Accounts in any identity provider or organizational directory (for authenticating users with user flows)**.</span></span>
1. <span data-ttu-id="95055-151">Dla **Przekierowywania URI** wprowadź dedykowane adresy URL odpowiedzi jako typ sieci **Web**.</span><span class="sxs-lookup"><span data-stu-id="95055-151">For **Redirect URI**, enter your dedicated reply URLs as type **Web**.</span></span> <span data-ttu-id="95055-152">Patrz [Adresy URL odpowiedzi](#reply-urls) poniżej w celu znalezienia informacji na temat adresów URL oraz jak je formatować.</span><span class="sxs-lookup"><span data-stu-id="95055-152">For information on reply URLs and how to format them, see [Reply URLs](#reply-urls) below.</span></span>
1. <span data-ttu-id="95055-153">Aby uzyskać **Uprawnienia**, wybierz opcję **Udziel zgody administratora na urpawnienia openid i offline_access**.</span><span class="sxs-lookup"><span data-stu-id="95055-153">For **Permissions**, select **Grant admin consent to openid and offline_access permissions**.</span></span>
1. <span data-ttu-id="95055-154">Wybierz opcję **Zarejestruj**.</span><span class="sxs-lookup"><span data-stu-id="95055-154">Select **Register**.</span></span>
1. <span data-ttu-id="95055-155">Wybierz nowo utworzoną aplikację i przejdź do menu **uwierzytelniania**.</span><span class="sxs-lookup"><span data-stu-id="95055-155">Select the newly-created application and navigate to the **Authentication** menu.</span></span> <span data-ttu-id="95055-156">W razie potrzeby możesz dodać dodatkowe **przekierowywanie adresów URL** (teraz lub później).</span><span class="sxs-lookup"><span data-stu-id="95055-156">Here you can add additional **Redirect URIs** if needed (now or later).</span></span> <span data-ttu-id="95055-157">W razie potrzeby przejdź do następnego kroku.</span><span class="sxs-lookup"><span data-stu-id="95055-157">Continue to the next step if not currently needed.</span></span>
1. <span data-ttu-id="95055-158">W obszarze **Niejawna dotacja** wybierz **tokeny dostępu** i **tokeny identyfikatorów**, aby włączyć je dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="95055-158">Under **Implicit grant**, select both **Access tokens** and **ID tokens** to enable them for the application.</span></span> <span data-ttu-id="95055-159">Wybierz opcję **Zapisz**.</span><span class="sxs-lookup"><span data-stu-id="95055-159">Select **Save**.</span></span>
1. <span data-ttu-id="95055-160">Przejdź do menu **Przegląd** portalu Azure i skopiuj **Identyfikator aplikacji (klienta)**.</span><span class="sxs-lookup"><span data-stu-id="95055-160">Go to the **Overview** menu of the Azure portal and copy the **Application (client) ID**.</span></span> <span data-ttu-id="95055-161">Należy zwrócić uwagę na ten identyfikator dla późniejszych kroków konfiguracji (później jako identyfikator **GUID klienta**).</span><span class="sxs-lookup"><span data-stu-id="95055-161">Note this ID for later setup steps (referenced later as the **Client GUID**).</span></span>

<span data-ttu-id="95055-162">Aby uzyskać dodatkowe informacje dotyczące rejestracji aplikacji w usługach Azure AD B2C, zobacz [Nowe możliwości rejestracji aplikacji w Azure Active Directory B2C](/azure/active-directory-b2c/app-registrations-training-guide)</span><span class="sxs-lookup"><span data-stu-id="95055-162">For additional reference on App Registrations in Azure AD B2C, please see [The new App registrations experience for Azure Active Directory B2C](/azure/active-directory-b2c/app-registrations-training-guide)</span></span>

### <a name="reply-urls"></a><span data-ttu-id="95055-163">Adresy URL odpowiedzi</span><span class="sxs-lookup"><span data-stu-id="95055-163">Reply URLs</span></span>

<span data-ttu-id="95055-164">Adresy URL odpowiedzi są ważne, ponieważ udostępniają one listę dozwolonych domen zwracanych, gdy witryna odwołuje się do funkcji B2C w usłudze Azure AD w celu uwierzytelnienia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="95055-164">Reply URLs are important as they provide an allow list of the return domains when your site calls Azure AD B2C to authenticate a user.</span></span> <span data-ttu-id="95055-165">Zezwala to na powrót uwierzytelnionego użytkownika z powrotem do domeny, z której się zalogował (domena witryny).</span><span class="sxs-lookup"><span data-stu-id="95055-165">This permits the return of the authenticated user back to the domain from which they are signing into (your site domain).</span></span> 

<span data-ttu-id="95055-166">W polu **adres URL odpowiedzi** na ekranie **B2C Azure AD — Aplikacje \> Nowa aplikacja** należy dodać osobne wiersze dla domeny witryny i (po zainicjowaniu środowiska) wygenerowany w systemie handlowym adres URL.</span><span class="sxs-lookup"><span data-stu-id="95055-166">In the **Reply URL** box on the **Azure AD B2c - Applications \> New application** screen, you need to add separate lines for both your site domain and (once your environment is provisioned) the Commerce-generated URL.</span></span> <span data-ttu-id="95055-167">Te adresy URL muszą zawsze mieć prawidłowy format adresu URL i muszą być tylko podstawowymi adresami URL (nie można kończyć ukośnikami ani ścieżkami).</span><span class="sxs-lookup"><span data-stu-id="95055-167">These URLs must always use a valid URL format and must be base URLs only (no trailing forward slashes or paths).</span></span> <span data-ttu-id="95055-168">Następnie należy dołączyć ciąg ``/_msdyn365/authresp`` do podstawowych adresów URL, tak jak w poniższych przykładach.</span><span class="sxs-lookup"><span data-stu-id="95055-168">The string ``/_msdyn365/authresp`` then needs to be appended to the base URLs, as in the following examples.</span></span>

- <span data-ttu-id="95055-169">``https://www.fabrikam.com/_msdyn365/authresp`` (domena powinna być całkowicie zgodna z domeną e-commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-169">``https://www.fabrikam.com/_msdyn365/authresp`` (The domain should match the e-commerce domain completely.</span></span> <span data-ttu-id="95055-170">Jeśli korzystasz z wielu domen, musisz dodać ten adres URL dla każdej domeny.)</span><span class="sxs-lookup"><span data-stu-id="95055-170">If you have multiple domains, you need to add this URL for each domain.)</span></span>
- ``https://fabrikam-prod.commerce.dynamics.com/_msdyn365/authresp``

## <a name="create-user-flow-policies"></a><span data-ttu-id="95055-171">Tworzenie zasad przepływów użytkownika</span><span class="sxs-lookup"><span data-stu-id="95055-171">Create user flow policies</span></span>

<span data-ttu-id="95055-172">Przepływy użytkowników to zasady, które B2C Azure AD stosuje w celu zapewnienia bezpiecznego logowania, zapisywania się, edytowania profilu i zapomnienia hasła użytkownika.</span><span class="sxs-lookup"><span data-stu-id="95055-172">User flows are the policies Azure AD B2C uses to provide secure sign in, sign up, edit profile, and forget password user experiences.</span></span> <span data-ttu-id="95055-173">Dynamics 365 Commerce używa tych przepływów do wykonywania akcji związanych z zasadami dotyczącymi interakcji z dzierżawcą B2C Azure AD.</span><span class="sxs-lookup"><span data-stu-id="95055-173">Dynamics 365 Commerce uses these flows to perform the policy actions to interact with the Azure AD B2C tenant.</span></span> <span data-ttu-id="95055-174">Gdy użytkownik współpracuje z tymi zasadami, są one przekierowywane do dzierżawy B2C Azure AD w celu wykonania akcji.</span><span class="sxs-lookup"><span data-stu-id="95055-174">When a user interacts with these policies, they are redirected to the Azure AD B2C tenant to perform the actions.</span></span>

<span data-ttu-id="95055-175">W B2C Azure AD dostępne są trzy podstawowe typy przepływu użytkownika:</span><span class="sxs-lookup"><span data-stu-id="95055-175">Azure AD B2C provides three basic user flow types:</span></span>
- <span data-ttu-id="95055-176">Rejestracja i logowanie</span><span class="sxs-lookup"><span data-stu-id="95055-176">Sign up and sign in</span></span>
- <span data-ttu-id="95055-177">Edytowanie profilu</span><span class="sxs-lookup"><span data-stu-id="95055-177">Profile editing</span></span>
- <span data-ttu-id="95055-178">Resetowanie hasła</span><span class="sxs-lookup"><span data-stu-id="95055-178">Password reset</span></span>

<span data-ttu-id="95055-179">Można wybrać Używanie domyślnego przepływu użytkownika dostarczonego przez Azure AD, który będzie wyświetlał stronę hostowaną przez B2C AAD.</span><span class="sxs-lookup"><span data-stu-id="95055-179">You can choose to use the default user flows provided by Azure AD, which will display a page hosted by AAD B2C.</span></span> <span data-ttu-id="95055-180">Alternatywnie można utworzyć stronę HTML umożliwiającą sterowanie wyglądem i działaniem tych funkcji przepływu pracy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="95055-180">Alternately, you can create an HTML page to control the look and feel of these user flow experiences.</span></span> 

<span data-ttu-id="95055-181">Aby dostosować strony zasad użytkowników ze stronami wybudowanymi w Dynamics 365 Commerce, należy zapoznać się z tematami [Konfigurowanie niestandardowych stron logowania użytkowników](custom-pages-user-logins.md).</span><span class="sxs-lookup"><span data-stu-id="95055-181">To customize the user policy pages with pages built in Dynamics 365 Commerce, see [Set up custom pages for user logins](custom-pages-user-logins.md).</span></span> <span data-ttu-id="95055-182">Aby uzyskać dodatkowe informacje, należy zapoznać się z tematem [Dostosowywanie interfejsu środowiska użytkownika w B2C Azure Active Directory](/azure/active-directory-b2c/tutorial-customize-ui).</span><span class="sxs-lookup"><span data-stu-id="95055-182">For additional information, see [Customize the interface of user experiences in Azure Active Directory B2C](/azure/active-directory-b2c/tutorial-customize-ui).</span></span>

### <a name="create-a-sign-up-and-sign-in-user-flow-policy"></a><span data-ttu-id="95055-183">Utwórz zasadę przepływu użytkownika rejestracji i logowania</span><span class="sxs-lookup"><span data-stu-id="95055-183">Create a sign up and sign in user flow policy</span></span>

<span data-ttu-id="95055-184">Aby utworzyć zasady przepływu użytkownika dla rejestracji i logowania, wykonaj następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-184">To create a sign up and sign in user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="95055-185">W portalu Azure wybierz pozycję **przepływy użytkowników (zasady)** w lewym okienku nawigacji.</span><span class="sxs-lookup"><span data-stu-id="95055-185">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="95055-186">Na stronie **B2C Azure AD — przepływy użytkownika (zasady)** wybierz opcję **nowy przepływ użytkownika**.</span><span class="sxs-lookup"><span data-stu-id="95055-186">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="95055-187">Wybierzwybierz zasadę **Rejestracja i logowanie**, a wybierz werjsę **Rekomendowane**.</span><span class="sxs-lookup"><span data-stu-id="95055-187">Select the **Sign up and sign in** policy, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="95055-188">W polu **Nazwa** wprowadź nazwę zasady.</span><span class="sxs-lookup"><span data-stu-id="95055-188">Under **Name**, enter a policy name.</span></span> <span data-ttu-id="95055-189">Ta nazwa będzie wyświetlana następnie z prefiksem przypisanym przez portal (na przykład „B2C_1_”).</span><span class="sxs-lookup"><span data-stu-id="95055-189">This name will display afterwards with a prefix the portal assigns (for example, "B2C_1_").</span></span>
1. <span data-ttu-id="95055-190">W obszarze **dostawcy tożsamości** zaznacz odpowiednie pole wyboru.</span><span class="sxs-lookup"><span data-stu-id="95055-190">Under **Identity providers**, select the appropriate check box.</span></span>
1. <span data-ttu-id="95055-191">W obszarze **uwierzytelnianie wieloczynnikowe** wybierz odpowiedni wybór dla firmy.</span><span class="sxs-lookup"><span data-stu-id="95055-191">Under **Multifactor Authentication**, select the appropriate choice for your company.</span></span> 
1. <span data-ttu-id="95055-192">W obszarze **atrybuty użytkownika i oświadczenia** wybierz opcje, aby w razie potrzeby zebrać atrybuty lub roszczenia zwrotów.</span><span class="sxs-lookup"><span data-stu-id="95055-192">Under **User attributes and claims**, select options to collect attributes or return claims as appropriate.</span></span> <span data-ttu-id="95055-193">W rozwiązaniu Commerce są wymagane następujące opcje domyślne:</span><span class="sxs-lookup"><span data-stu-id="95055-193">Commerce requires the following default options:</span></span>

    | <span data-ttu-id="95055-194">**Zbierz atrybuty**</span><span class="sxs-lookup"><span data-stu-id="95055-194">**Collect  attribute**</span></span> | <span data-ttu-id="95055-195">**Roszczenie zwrotu**</span><span class="sxs-lookup"><span data-stu-id="95055-195">**Return  claim**</span></span> |
    | ---------------------- | ----------------- |
    | <span data-ttu-id="95055-196">Adres e-mail</span><span class="sxs-lookup"><span data-stu-id="95055-196">Email Address</span></span>          | <span data-ttu-id="95055-197">Adresy e-mail</span><span class="sxs-lookup"><span data-stu-id="95055-197">Email Addresses</span></span>   |
    | <span data-ttu-id="95055-198">Imię</span><span class="sxs-lookup"><span data-stu-id="95055-198">Given Name</span></span>             | <span data-ttu-id="95055-199">Imię</span><span class="sxs-lookup"><span data-stu-id="95055-199">Given Name</span></span>        |
    |                        | <span data-ttu-id="95055-200">Dostawca tożsamości</span><span class="sxs-lookup"><span data-stu-id="95055-200">Identity Provider</span></span> |
    | <span data-ttu-id="95055-201">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="95055-201">Surname</span></span>                | <span data-ttu-id="95055-202">Nazwisko</span><span class="sxs-lookup"><span data-stu-id="95055-202">Surname</span></span>           |
    |                        | <span data-ttu-id="95055-203">Identyfikator obiektu użytkownika</span><span class="sxs-lookup"><span data-stu-id="95055-203">User’s Object ID</span></span>  |

1. <span data-ttu-id="95055-204">Wybierz opcję **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="95055-204">Select **Create**.</span></span>

<span data-ttu-id="95055-205">Poniższy obraz przedstawia przykład B2C Azure AD rejestracji i logowania w przepływie użytkownika.</span><span class="sxs-lookup"><span data-stu-id="95055-205">The following image is an example of the Azure AD B2C sign up and sign in user flow.</span></span>

![Ustawienia zasad rejestracji i logowania](./media/B2CImage_11.png)

<span data-ttu-id="95055-207">Poniższy rysunek przedstawia opcję **Uruchom przepływ** użytkownika w B2C Azure AD rejestracja i logowanie w przepływie pracy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="95055-207">The following image shows the **Run user flow** option in the Azure AD B2C sign up and sign in user flow.</span></span>

![Uruchom opcję przepływu użytkownika w przepływie zasad](./media/B2CImage_23.png)
   
### <a name="create-a-profile-editing-user-flow-policy"></a><span data-ttu-id="95055-209">Tworzenie zasady przepływu użytkowników dla edycji profilu</span><span class="sxs-lookup"><span data-stu-id="95055-209">Create a profile editing user flow policy</span></span>

<span data-ttu-id="95055-210">Aby utworzyć zasady przepływu użytkownika dla edycji profilu, wykonaj następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-210">To create a profile editing user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="95055-211">W portalu Azure wybierz pozycję **przepływy użytkowników (zasady)** w lewym okienku nawigacji.</span><span class="sxs-lookup"><span data-stu-id="95055-211">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="95055-212">Na stronie **B2C Azure AD — przepływy użytkownika (zasady)** wybierz opcję **nowy przepływ użytkownika**.</span><span class="sxs-lookup"><span data-stu-id="95055-212">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="95055-213">Wybierz opcję **Edytowanie profilu**, a następnie wybierz wersję **Rekomendowane**.</span><span class="sxs-lookup"><span data-stu-id="95055-213">Select **Profile editing**, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="95055-214">W polu **Nazwa** wprowadź przepływ użytkownika edycji profilu.</span><span class="sxs-lookup"><span data-stu-id="95055-214">Under **Name**, enter the profile editing user flow.</span></span> <span data-ttu-id="95055-215">Ta nazwa będzie wyświetlana następnie z prefiksem przypisanym przez portal (na przykład „B2C_1_”).</span><span class="sxs-lookup"><span data-stu-id="95055-215">This name will display afterwards with a prefix the portal assigns (for example, "B2C_1_").</span></span>
1. <span data-ttu-id="95055-216">W obszarze **dostawcy tożsamości** wybierz opcję **Zaloguj się za pomocą e-mail**.</span><span class="sxs-lookup"><span data-stu-id="95055-216">Under **Identity providers**, select **Email SignIn**.</span></span>
1. <span data-ttu-id="95055-217">W obszarze **Atrybuty użytkownika** zaznacz jedno z następujących pól wyboru:</span><span class="sxs-lookup"><span data-stu-id="95055-217">Under **User attributes**, select the following check boxes:</span></span>
    - <span data-ttu-id="95055-218">**Adresy e-mail** (tylko **Roszczenie zwrotu**)</span><span class="sxs-lookup"><span data-stu-id="95055-218">**Email Addresses** (**Return claim** only)</span></span>
    - <span data-ttu-id="95055-219">**Imię** (**Zbierz atrybuty** i **roszczenie zwrotne**)</span><span class="sxs-lookup"><span data-stu-id="95055-219">**Given Name** (**Collect attribute** and **Return claim**)</span></span>
    - <span data-ttu-id="95055-220">**Dostawca tożsamości** (tylko **roszczenie zwrotne**)</span><span class="sxs-lookup"><span data-stu-id="95055-220">**Identity Provider** (**Return claim** only)</span></span>
    - <span data-ttu-id="95055-221">**Nazwisko** (**Zbierz atrybuty** i **roszczenie zwrotne**)</span><span class="sxs-lookup"><span data-stu-id="95055-221">**Surname** (**Collect attribute** and **Return claim**)</span></span>
    - <span data-ttu-id="95055-222">**Identyfikator obiektu użytkownika** (tylko **roszczenie zwrotne**)</span><span class="sxs-lookup"><span data-stu-id="95055-222">**User's Object ID** (**Return claim** only)</span></span>
1. <span data-ttu-id="95055-223">Wybierz opcję **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="95055-223">Select **Create**.</span></span>

<span data-ttu-id="95055-224">Poniższy obraz przedstawia przykład przepływu użytkownika edytującego profil w B2C Azure AD.</span><span class="sxs-lookup"><span data-stu-id="95055-224">The following image shows an example of the Azure AD B2C profile editing user flow.</span></span>

![Tworzenie przepływu użytkowników dla edycji profilu](./media/B2CImage_12.png)

### <a name="create-a-password-reset-user-flow-policy"></a><span data-ttu-id="95055-226">Tworzenie zasady przepływu użytkowników dla resetowania hasła</span><span class="sxs-lookup"><span data-stu-id="95055-226">Create a password reset user flow policy</span></span>

<span data-ttu-id="95055-227">Aby utworzyć zasady przepływu użytkownika dla resetowania hasła, wykonaj następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-227">To create a password reset user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="95055-228">W portalu Azure wybierz pozycję **przepływy użytkowników (zasady)** w lewym okienku nawigacji.</span><span class="sxs-lookup"><span data-stu-id="95055-228">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="95055-229">Na stronie **B2C Azure AD — przepływy użytkownika (zasady)** wybierz opcję **nowy przepływ użytkownika**.</span><span class="sxs-lookup"><span data-stu-id="95055-229">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="95055-230">Wybierz opcję **resetowanie hasła**, a następnie wybierz wersję **Rekomendowane**.</span><span class="sxs-lookup"><span data-stu-id="95055-230">Select **Password Reset**, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="95055-231">W polu **Nazwa** wprowadź nazwę przepływu użytkownika resetowania hasła.</span><span class="sxs-lookup"><span data-stu-id="95055-231">Under **Name**, enter a name for the password reset user flow.</span></span>
1. <span data-ttu-id="95055-232">W sekcji **dostawcy tożsamości** wybierz opcję **Resetuj hasło, używając adresu e-mail**.</span><span class="sxs-lookup"><span data-stu-id="95055-232">Under **Identity providers**, select **Reset password using email address**.</span></span>
1. <span data-ttu-id="95055-233">Wybierz opcję **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="95055-233">Select **Create**.</span></span>
1. <span data-ttu-id="95055-234">W obszarze **Przetwarzanie aplikacji** zaznacz jedno z następujących pól wyboru:</span><span class="sxs-lookup"><span data-stu-id="95055-234">Under **Application claims**, select the following check boxes:</span></span>
    - <span data-ttu-id="95055-235">**Adresy e-mail**</span><span class="sxs-lookup"><span data-stu-id="95055-235">**Email addresses**</span></span>
    - <span data-ttu-id="95055-236">**Imię**</span><span class="sxs-lookup"><span data-stu-id="95055-236">**Given Name**</span></span>
    - <span data-ttu-id="95055-237">**Nazwisko**</span><span class="sxs-lookup"><span data-stu-id="95055-237">**Surname**</span></span>
    - <span data-ttu-id="95055-238">**Identyfikator obiektu użytkownika**</span><span class="sxs-lookup"><span data-stu-id="95055-238">**User's Object ID**</span></span>
1. <span data-ttu-id="95055-239">Wybierz opcję **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="95055-239">Select **Create**.</span></span>

<span data-ttu-id="95055-240">Poniższy obraz pokazuje, gdzie ustawić **hasło resetowania przy użyciu adresu pocztowego** w przepływie użytkownika resetowania hasła B2C Azure AD.</span><span class="sxs-lookup"><span data-stu-id="95055-240">The following image shows where to set **Reset Password using mail address** in the Azure AD B2C password reset user flow.</span></span>

![Ustawienie „Resetuj hasło przy użyciu adresu pocztowego” w zasadach resetowania hasła](./media/B2CImage_13.png)

## <a name="add-social-identity-providers-optional"></a><span data-ttu-id="95055-242">Dodaj dostawców tożsamości społecznościowych (opcjonalnie)</span><span class="sxs-lookup"><span data-stu-id="95055-242">Add social identity providers (Optional)</span></span>

<span data-ttu-id="95055-243">Dostawcy tożsamości społecznościowych umożliwiają użytkownikom uwierzytelnianie przy użyciu ich kont społecznościowych.</span><span class="sxs-lookup"><span data-stu-id="95055-243">Social identity providers allow users to use their social accounts for authentication.</span></span> <span data-ttu-id="95055-244">Dodawanie uwierzytelniania dostawcy tożsamości społecznościowej jest opcjonalne w programie Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-244">Adding social identity provider authentication is optional in Dynamics 365 Commerce.</span></span> 

<span data-ttu-id="95055-245">Jeśli uwierzytelnianie dostawcy tożsamości społecznościowej nie zostanie dodane, domyślne profile B2C Azure AD będą głównymi profilami bazy danych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="95055-245">If social identity provider authentication is not added, the default Azure AD B2C profiles will be the main profiles for your user base.</span></span> <span data-ttu-id="95055-246">Użytkownicy będą mogli wybrać własną nazwę użytkownika (preferowany adres e-mail) i określić hasło.</span><span class="sxs-lookup"><span data-stu-id="95055-246">Users will select their own username (their preferred email address) and set a password.</span></span> <span data-ttu-id="95055-247">B2C Azure AD będą uwierzytelniać użytkowników bezpośrednio.</span><span class="sxs-lookup"><span data-stu-id="95055-247">Azure AD B2C will authenticate users directly.</span></span> 

<span data-ttu-id="95055-248">Jeśli zostanie dodane uwierzytelnianie dostawcy tożsamości społecznej, a użytkownik wybierze jednego z oferowanych dostawców tożsamości społecznych, jednostka nadal zostanie utworzona w dzierżawie B2C Azure AD.</span><span class="sxs-lookup"><span data-stu-id="95055-248">If social identity provider authentication is added and a user chooses one of the social identity providers offered, an entity is still created in the Azure AD B2C tenant.</span></span> <span data-ttu-id="95055-249">B2C Azure AD będzie wówczas uwierzytelniać poświadczenia użytkownika za pomocą dostawcy tożsamości społecznościowej.</span><span class="sxs-lookup"><span data-stu-id="95055-249">Azure AD B2C will then authenticate the user's credentials with the social identity provider.</span></span>

> [!NOTE]
> <span data-ttu-id="95055-250">W trakcie logowania dostawca tożsamości tworzy rekord w dzierżawie B2C, ale w innym formacie niż konta lokalne, ponieważ będzie wywoływać odwołanie do zewnętrznego dostawcy tożsamości społecznościowej w celu uwierzytelnienia.</span><span class="sxs-lookup"><span data-stu-id="95055-250">The identity provider sign in creates a record in the B2C tenant, but in a different format than local accounts since it will call the external social identity provider reference for authentication.</span></span> <span data-ttu-id="95055-251">Użytkownik może używać tego samego adresu e-mail dla dostawców tożsamości społecznych, co oznacza, że nazwa użytkownika poczty e-mail używana do uwierzytelniania może nie być unikatowa dla dzierżawcy.</span><span class="sxs-lookup"><span data-stu-id="95055-251">The user can use the same email address across social identity providers, meaning that the email username used for authentication may not be unique to the tenant.</span></span> <span data-ttu-id="95055-252">B2C Azure AD wymusza, aby użytkownicy mieli unikatowy adres e-mail tylko na lokalnych kontach B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-252">Azure AD B2C will only enforce that users have a unique email address on local B2C accounts.</span></span>

<span data-ttu-id="95055-253">Zanim będzie można dodać dostawcę tożsamości społecznościowej do uwierzytelniania, należy przejść do portalu dostawcy tożsamości i skonfigurować aplikację dostawcy tożsamości zgodnie z instrukcją w dokumentacji B2C Azure AD.</span><span class="sxs-lookup"><span data-stu-id="95055-253">Before you can add a social identity provider for authentication, you must go to the identity provider's portal and set up an identity provider application as instructed in the Azure AD B2C documentation.</span></span> <span data-ttu-id="95055-254">Poniżej znajduje się lista łączy do dokumentacji.</span><span class="sxs-lookup"><span data-stu-id="95055-254">A list of links to the documentation is provided below.</span></span>

- [<span data-ttu-id="95055-255">Amazon</span><span class="sxs-lookup"><span data-stu-id="95055-255">Amazon</span></span>](/azure/active-directory-b2c/active-directory-b2c-setup-amzn-app)
- [<span data-ttu-id="95055-256">Azure AD (Jeden dzierżawca)</span><span class="sxs-lookup"><span data-stu-id="95055-256">Azure AD (Single Tenant)</span></span>](/azure/active-directory-b2c/active-directory-b2c-setup-oidc-azure-active-directory)
- [<span data-ttu-id="95055-257">Konto Microsoft</span><span class="sxs-lookup"><span data-stu-id="95055-257">Microsoft Account</span></span>](/azure/active-directory-b2c/active-directory-b2c-setup-msa-app)
- [<span data-ttu-id="95055-258">Facebook</span><span class="sxs-lookup"><span data-stu-id="95055-258">Facebook</span></span>](/azure/active-directory-b2c/active-directory-b2c-setup-fb-app)
- [<span data-ttu-id="95055-259">GitHub</span><span class="sxs-lookup"><span data-stu-id="95055-259">GitHub</span></span>](/azure/active-directory-b2c/active-directory-b2c-setup-github-app)
- [<span data-ttu-id="95055-260">Google</span><span class="sxs-lookup"><span data-stu-id="95055-260">Google</span></span>](/azure/active-directory-b2c/active-directory-b2c-setup-goog-app)
- [<span data-ttu-id="95055-261">LinkedIn</span><span class="sxs-lookup"><span data-stu-id="95055-261">LinkedIn</span></span>](/azure/active-directory-b2c/active-directory-b2c-setup-li-app)
- [<span data-ttu-id="95055-262">OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="95055-262">OpenID Connect</span></span>](/azure/active-directory-b2c/active-directory-b2c-setup-oidc-idp)
- [<span data-ttu-id="95055-263">Twitter</span><span class="sxs-lookup"><span data-stu-id="95055-263">Twitter</span></span>](/azure/active-directory-b2c/active-directory-b2c-setup-twitter-app)

### <a name="add-and-set-up-a-social-identity-provider"></a><span data-ttu-id="95055-264">Dodaj i skonfiguruj dostawcę tożsamości społecznościowej</span><span class="sxs-lookup"><span data-stu-id="95055-264">Add and set up a social identity provider</span></span>

<span data-ttu-id="95055-265">Aby dodać i skonfigurować dostawcę tożsamości społecznościowej, należy wykonać następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-265">To add and set up a social identity provider, follow these steps.</span></span>  

1. <span data-ttu-id="95055-266">W portalu Azure przejdź do **dostawców tożsamości**.</span><span class="sxs-lookup"><span data-stu-id="95055-266">In the Azure portal, navigate to **Identity Providers**.</span></span>
1. <span data-ttu-id="95055-267">Wybierz opcję **Dodaj**.</span><span class="sxs-lookup"><span data-stu-id="95055-267">Select **Add**.</span></span> <span data-ttu-id="95055-268">Pojawi się ekran **Dodaj dostawcę tożsamości**.</span><span class="sxs-lookup"><span data-stu-id="95055-268">The **Add identity provider** screen appears.</span></span>
1. <span data-ttu-id="95055-269">W polu **Nazwa** wprowadź nazwę, która ma być wyświetlana użytkownikom na ekranie logowania.</span><span class="sxs-lookup"><span data-stu-id="95055-269">Under **Name**, enter the name to be displayed to users on your sign in screen.</span></span>
1. <span data-ttu-id="95055-270">W obszarze **Typ dostawcy tożsamości** wybierz dostawcę tożsamości z listy.</span><span class="sxs-lookup"><span data-stu-id="95055-270">Under **Identity provider type**, select an identity provider from the list.</span></span>
1. <span data-ttu-id="95055-271">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="95055-271">Select **OK**.</span></span>
1. <span data-ttu-id="95055-272">Wybierz opcję **Skonfiguruj tego dostawcę tożsamości**, aby uzyskać dostęp do ekranu **Konfigurowanie dostawcy tożsamości społecznych**.</span><span class="sxs-lookup"><span data-stu-id="95055-272">Select **Set up this identity provider** to access the **Set up the social identity provider** screen.</span></span>
1. <span data-ttu-id="95055-273">W obszarze **Identyfikator klienta** wprowadź identyfikator klienta, który został otrzymany z konfiguracji aplikacji dostawcy tożsamości.</span><span class="sxs-lookup"><span data-stu-id="95055-273">Under **Client ID**, enter the client ID as obtained from the identity provider application setup.</span></span>
1. <span data-ttu-id="95055-274">W obszarze **Nazwa tajna klienta** wprowadź nazwę tajną klienta, która została otrzymana z konfiguracji aplikacji dostawcy tożsamości.</span><span class="sxs-lookup"><span data-stu-id="95055-274">Under **Client secret**, enter the client secret as obtained from the identity provider application setup.</span></span>
1. <span data-ttu-id="95055-275">Dołącz przepływ użytkownika dla logowania w zasadach rejestracji:</span><span class="sxs-lookup"><span data-stu-id="95055-275">Attach user flow for sign in sign up policies:</span></span>
1. <span data-ttu-id="95055-276">Przejdź do **B2C Azure AD — przepływy tożsamości \> {zasady logowania rejestracji użytkowników} \> Dostawcy tożsamości**.</span><span class="sxs-lookup"><span data-stu-id="95055-276">Go to **Azure AD B2C – User flows (policies) \> {your sign-in sign-up policy} \> Identity providers**.</span></span>
1. <span data-ttu-id="95055-277">Aby dołączyć zasadę przepływu użytkowników logowania/rejestracji, wybierz każdego dostawcę tożsamości skonfigurowanego dla swojego konta.</span><span class="sxs-lookup"><span data-stu-id="95055-277">To attach the sign in/sign up user flow policy, select each identity provider you have set up for your account.</span></span> <span data-ttu-id="95055-278">Aby je przetestować, wybierz opcję **Uruchom przepływ użytkownika** dla każdego dostawcy tożsamości.</span><span class="sxs-lookup"><span data-stu-id="95055-278">To test these, select **Run user flow** for each identity provider.</span></span> <span data-ttu-id="95055-279">Na nowej karcie zostanie wyświetlona strona logowania z wyświetlonym polem wyboru nowego dostawcy tożsamości.</span><span class="sxs-lookup"><span data-stu-id="95055-279">A new tab will display the sign-in page displaying the new identity provider selection box.</span></span>

<span data-ttu-id="95055-280">Na poniższym obrazie pokazano przykłady **dodawania dostawcy tożsamości** i **konfigurowania ekranów dostawcy tożsamości społecznościowych** w B2C Azure AD.</span><span class="sxs-lookup"><span data-stu-id="95055-280">The following image shows examples of the **Add identity provider** and **Set up the social identity provider** screens in Azure AD B2C.</span></span>

![Dodawanie dostawcy tożsamości społecznościowej do aplikacji](./media/B2CImage_14.png)

<span data-ttu-id="95055-282">Poniższy rysunek przedstawia przykład wyboru dostawców tożsamości na stronie **dostawców tożsamości** B2C Azure AD.</span><span class="sxs-lookup"><span data-stu-id="95055-282">The following image shows an example of how to select identity providers on the Azure AD B2C **Identity Providers** page.</span></span>

![Wybierz każdego dostawcę tożsamości społecznościowych, który ma być włączony dla zasady](./media/B2CImage_16.png)

<span data-ttu-id="95055-284">Poniższy obraz przedstawia przykład domyślnego ekranu logowania z wyświetlonym przyciskiem logowania dostawcy tożsamości społecznościowej.</span><span class="sxs-lookup"><span data-stu-id="95055-284">The following image shows an example of a default sign-in screen with a social identity provider sign-in button displayed.</span></span>

> [!NOTE]
> <span data-ttu-id="95055-285">Jeśli w usługach commerce wbudowywały strony niestandardowe, trzeba dodać przyciski dostawców tożsamości społecznościowych, korzystając z funkcji możliwości rozszerzania biblioteki modułów Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-285">If using the custom pages built in Commerce for your user flows, the buttons for social identity providers will need to be added using the extensibility features of the Commerce module library.</span></span> <span data-ttu-id="95055-286">Ponadto podczas konfigurowania aplikacji z określonym dostawcą tożsamości społecznościowych w niektórych przypadkach adres URL lub ciągi konfiguracji mogą być wielkość liter.</span><span class="sxs-lookup"><span data-stu-id="95055-286">Additionally, when setting up your applications with a specific social identity provider, in some cases URL or configuration strings may be case sensitive.</span></span> <span data-ttu-id="95055-287">Zapoznaj się z instrukcjami połączenia z dostawcą tożsamości społecznościowych, aby uzyskać więcej informacji.</span><span class="sxs-lookup"><span data-stu-id="95055-287">Refer to your social identity provider's connection instructions for more information.</span></span>
 
![Przykładowy domyślny ekran logowania z wyświetlonym przyciskiem logowania dostawcy tożsamości społecznościowej](./media/B2CImage_17.png)

## <a name="update-commerce-headquarters-with-the-new-azure-ad-b2c-information"></a><span data-ttu-id="95055-289">Aktualizuj program Commerce Headquarters, używając nowych informacji o B2C Azure AD</span><span class="sxs-lookup"><span data-stu-id="95055-289">Update Commerce headquarters with the new Azure AD B2C information</span></span>

<span data-ttu-id="95055-290">Po wykonaniu powyższej procedury B2C Azure AD, aplikacja B2C Azure AD musi być zarejestrowana w środowisku Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-290">Once the Azure AD B2C provisioning steps above are completed, the Azure AD B2C application must be registered in your Dynamics 365 Commerce environment.</span></span>

<span data-ttu-id="95055-291">Aby zaktualizować centralę za pomocą nowych informacji B2C Azure AD, wykonaj następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-291">To update headquarters with the new Azure AD B2C information, follow these steps.</span></span>

1. <span data-ttu-id="95055-292">W module Commerce przejdź do **udostępnionych parametrów modułu Commerce** i wybierz pozycję **dostawcy tożsamości** w lewym menu.</span><span class="sxs-lookup"><span data-stu-id="95055-292">In Commerce, go to **Commerce Shared Parameters** and select **Identity Providers** in the left menu.</span></span>
1. <span data-ttu-id="95055-293">W obszarze **dostawcy tożsamości** wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="95055-293">Under **Identity Providers**, do the following:</span></span>
    1. <span data-ttu-id="95055-294">W polu **wystawca** wprowadź adres URL wystawcy dostawcy tożsamości.</span><span class="sxs-lookup"><span data-stu-id="95055-294">In the **Issuer** box, enter the identity provider issuer URL.</span></span> <span data-ttu-id="95055-295">Aby znaleźć adres URL wystawcy, przeczytaj [Uzyskaj adres URL wystawcy](#obtain-issuer-url) poniżej.</span><span class="sxs-lookup"><span data-stu-id="95055-295">To find your issuer URL, see [Obtain issuer URL](#obtain-issuer-url) below.</span></span>
    1. <span data-ttu-id="95055-296">W polu **nazwa** wprowadź nazwę rekordu wystawcy.</span><span class="sxs-lookup"><span data-stu-id="95055-296">In the **Name** box, enter a name for your issuer record.</span></span>
    1. <span data-ttu-id="95055-297">W polu **typ** wprowadź **B2C Azure AD (id_token)**.</span><span class="sxs-lookup"><span data-stu-id="95055-297">In the **Type** box, enter **Azure AD B2C (id_token)**.</span></span>
1. <span data-ttu-id="95055-298">W obszarze **jednostki uzależnione**, z zaznaczonym powyższym elementem dostawcy tożsamości B2C, wykonaj następujące czynności:</span><span class="sxs-lookup"><span data-stu-id="95055-298">Under **Relying Parties**, with the above B2C identity provider item selected, do the following:</span></span>
    1. <span data-ttu-id="95055-299">W polu **ClientID** wprowadź swój identyfikator aplikacji B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-299">In the **ClientID** box, enter your B2C application ID.</span></span> <span data-ttu-id="95055-300">Tę nazwę można znaleźć w polu **identyfikator aplikacji** na stronie właściwości aplikacji B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-300">You can find this in the **Application ID** box of your B2C application's properties page.</span></span>
    1. <span data-ttu-id="95055-301">W polu **typ** wprowadź wartość **publiczne**.</span><span class="sxs-lookup"><span data-stu-id="95055-301">In the **Type** box, enter **Public**.</span></span>
    1. <span data-ttu-id="95055-302">W polu **typ użytkownika** wprowadź wartość **Odbiorca**.</span><span class="sxs-lookup"><span data-stu-id="95055-302">In the **User Type** box, enter **Customer**.</span></span>
1. <span data-ttu-id="95055-303">Na okienku akcji wybierz opcję **Zapisz**.</span><span class="sxs-lookup"><span data-stu-id="95055-303">On the action pane, select **Save**.</span></span>
1. <span data-ttu-id="95055-304">W polu Wyszukiwanie w module Commerce należy wyszukać **harmonogram dystrybucji**</span><span class="sxs-lookup"><span data-stu-id="95055-304">In the Commerce search box, search for **Distribution schedule**</span></span>
1. <span data-ttu-id="95055-305">W menu nawigacji w lewym panelu na stronie **harmonogramy dystrybucji** wybierz zadanie **Konfiguracja globalna 1110**.</span><span class="sxs-lookup"><span data-stu-id="95055-305">In the left navigation menu of the **Distribution schedules** page, select job **1110 Global configuration**.</span></span>
1. <span data-ttu-id="95055-306">W okienku akcji wybierz opcję **Uruchom teraz**.</span><span class="sxs-lookup"><span data-stu-id="95055-306">On the action pane, select **Run Now**.</span></span>

### <a name="obtain-issuer-url"></a><span data-ttu-id="95055-307">Uzyskaj adres URL wystawcy</span><span class="sxs-lookup"><span data-stu-id="95055-307">Obtain issuer URL</span></span>

<span data-ttu-id="95055-308">Aby uzyskać adres URL wystawcy dostawcy tożsamości, wykonaj następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-308">To obtain your identity provider issuer URL, follow these steps.</span></span>
1. <span data-ttu-id="95055-309">Na stronie Azure AD B2C portalu Azure przejdź do przepływu użytkownika **Rejestracja i logowanie**.</span><span class="sxs-lookup"><span data-stu-id="95055-309">On the Azure AD B2C page of the Azure portal, navigate to your **Sign up and sign in** user flow.</span></span>
1. <span data-ttu-id="95055-310">Wybierz **układy stron** w menu nawigacji po lewej stronie, w obszarze **Nazwa układu** wybierz pozycję **Zunifikowane konto** lub strona logowania, a następnie wybierz polecenie **Uruchom przepływ użytkownika**.</span><span class="sxs-lookup"><span data-stu-id="95055-310">Select **Page layouts** in the left navigation menu, under **Layout name** select **Unified sign up or sign in page**, and then select **Run user flow**.</span></span>
1. <span data-ttu-id="95055-311">Upewnij się, że aplikacja jest ustawiona zgodnie z zamierzaną aplikacją Azure AD B2C utworzoną powyżej, a następnie wybierz łącze w nagłówku **Uruchom przepływ użytkownika**, który zawiera ``.../.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``.</span><span class="sxs-lookup"><span data-stu-id="95055-311">Make sure your application is set to your intended Azure AD B2C application created above, and then select the link under the **Run user flow** header that includes ``.../.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``.</span></span>
1. <span data-ttu-id="95055-312">Strona metadanych jest wyświetlana na karcie przeglądarki. Kopiuj adres URL wystawcy dostawcy tożsamości (wartość **dla „emitenta”**).</span><span class="sxs-lookup"><span data-stu-id="95055-312">A metadata page is displayed in your browser tab. Copy the identity provider issuer URL (the value for **"issuer"**).</span></span>
   - <span data-ttu-id="95055-313">Przykład: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``</span><span class="sxs-lookup"><span data-stu-id="95055-313">Example: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span></span>
 
<span data-ttu-id="95055-314">**LUB**: Aby ręcznie utworzyć ten sam adres URL metadanych, należy wykonać następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-314">**OR**: To construct the same metadata URL manually, do the following steps.</span></span>

1. <span data-ttu-id="95055-315">Utwórz adres URL metadanych w poniższym formacie przy użyciu dzierżawy i zasad B2C: ``https://<B2CTENANTNAME>.b2clogin.com/<B2CTENANTNAME>.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``</span><span class="sxs-lookup"><span data-stu-id="95055-315">Create a metadata address URL in the following format using your B2C tenant and policy: ``https://<B2CTENANTNAME>.b2clogin.com/<B2CTENANTNAME>.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``</span></span>
    - <span data-ttu-id="95055-316">Przykład: ``https://d365plc.b2clogin.com/d365plc.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=B2C_1_signinup``</span><span class="sxs-lookup"><span data-stu-id="95055-316">Example: ``https://d365plc.b2clogin.com/d365plc.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=B2C_1_signinup``.</span></span>
1. <span data-ttu-id="95055-317">Wprowadź adres URL metadanych na pasku adresu przeglądarki.</span><span class="sxs-lookup"><span data-stu-id="95055-317">Enter the metadata address URL into a browser address bar.</span></span>
1. <span data-ttu-id="95055-318">W metadanych Skopiuj adres URL wystawcy dostawcy tożsamości (wartość dla **„wystawca”**).</span><span class="sxs-lookup"><span data-stu-id="95055-318">In the metadata, copy the identity provider issuer URL (the value for **"issuer"**).</span></span>
    - <span data-ttu-id="95055-319">Przykład: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``</span><span class="sxs-lookup"><span data-stu-id="95055-319">Example: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span></span>

## <a name="configure-your-b2c-tenant-in-commerce-site-builder"></a><span data-ttu-id="95055-320">Konfigurowanie dzierżawy B2C w module kreatora witryny Commerce</span><span class="sxs-lookup"><span data-stu-id="95055-320">Configure your B2C tenant in Commerce site builder</span></span>

<span data-ttu-id="95055-321">Po zakończeniu konfigurowania dzierżawy B2C Azure AD należy skonfigurować dzierżawę B2C w module kreatora witryny Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-321">Once setup of your Azure AD B2C tenant is completed, you must configure the B2C tenant in Commerce site builder.</span></span> <span data-ttu-id="95055-322">Kroki konfiguracyjne obejmują zbieranie informacji o aplikacji B2C z portalu Azure, wprowadzenie do konstruktora witryn informacji o aplikacji B2C, a następnie skojarzenie aplikacji B2C z witryną i kanałem.</span><span class="sxs-lookup"><span data-stu-id="95055-322">Configuration steps include collecting B2C application information from the Azure portal, entering that B2C application information into site builder, and then associating the B2C application with your site and channel.</span></span>

### <a name="collect-the-required-application-information"></a><span data-ttu-id="95055-323">Zbierz wymagane informacje o aplikacji</span><span class="sxs-lookup"><span data-stu-id="95055-323">Collect the required application information</span></span>

<span data-ttu-id="95055-324">Aby zebrać wymagane informacje o aplikacji, wykonaj następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-324">To collect the required application information, follow these steps.</span></span>

1. <span data-ttu-id="95055-325">W portalu Azure przejdź do **Strony głównej \> B2C Azure AD — aplikacje**.</span><span class="sxs-lookup"><span data-stu-id="95055-325">In the Azure portal, go to **Home \> Azure AD B2C - Applications**.</span></span>
1. <span data-ttu-id="95055-326">Wybierz aplikację, a następnie w lewym okienku nawigacji wybierz **właściwości**, aby uzyskać szczegółowe informacje o aplikacji.</span><span class="sxs-lookup"><span data-stu-id="95055-326">Select your application, and then in the left navigation pane select **Properties** to obtain the application details.</span></span>
1. <span data-ttu-id="95055-327">W polu **identyfikator aplikacji** Zbierz identyfikator aplikacji B2C utworzonej w dzierżawie B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-327">From the **Application ID** box, collect the application ID of the B2C application created in your B2C tenant.</span></span> <span data-ttu-id="95055-328">Zostanie to później wprowadzone jako **identyfikator GUID klienta** w module Konstruktor witryn.</span><span class="sxs-lookup"><span data-stu-id="95055-328">This will later be entered as the **Client GUID** in site builder.</span></span>
1. <span data-ttu-id="95055-329">W obszarze **adres URL odpowiedzi** Zbierz adres URL odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="95055-329">Under **Reply URL**, collect the reply URL.</span></span>
1. <span data-ttu-id="95055-330">Przejdź do **Strona główna \> B2C Azure AD — przepływy użytkownika (zasady)**, a następnie Zbierz nazwy poszczególnych zasad przepływu użytkowników.</span><span class="sxs-lookup"><span data-stu-id="95055-330">Go to **Home \> Azure AD B2C – User flows (policies)**, and then collect the names of each user flow policy.</span></span>

<span data-ttu-id="95055-331">Poniższy rysunek przedstawia przykład strony **B2C Azure AD — aplikacje**.</span><span class="sxs-lookup"><span data-stu-id="95055-331">The following image shows an example of the **Azure AD B2C - Applications** page.</span></span>

![Przejdź do aplikacji B2C w dzierżawie](./media/B2CImage_19.png)

<span data-ttu-id="95055-333">Poniższy rysunek przedstawia przykład strony aplikacji **Właściwości** w B2C Azure AD.</span><span class="sxs-lookup"><span data-stu-id="95055-333">The following image shows an example of an application **Properties** page in Azure AD B2C.</span></span> 

![Kopiuj identyfikator aplikacji z właściwości aplikacji B2C](./media/B2CImage_21.png)

<span data-ttu-id="95055-335">Poniższy obraz przedstawia przykład zasad przepływu użytkowników na stronie **B2C Azure AD — przepływy użytkownika (zasady)**.</span><span class="sxs-lookup"><span data-stu-id="95055-335">The following image shows an example of user flow policies on the **Azure AD B2C – User flows (policies)** page.</span></span>

![Zbierz nazwy poszczególnych przepływów zasad B2C](./media/B2CImage_22.png)

### <a name="enter-your-aad-b2c-tenant-application-information-into-commerce"></a><span data-ttu-id="95055-337">Umożliwia wprowadzenie informacji dotyczących aplikacji dzierżawczej usługi AAD B2C do modułu Commerce</span><span class="sxs-lookup"><span data-stu-id="95055-337">Enter your AAD B2C tenant application information into Commerce</span></span>

<span data-ttu-id="95055-338">Przed skojarzeniem dzierżawy B2C Azure AD z witrynami należy wprowadzić szczegóły dzierżawy B2C w module konstruktora witryn Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-338">You must enter details of the Azure AD B2C tenant into Commerce site builder before associating the B2C tenant with your site(s).</span></span>

<span data-ttu-id="95055-339">Aby dodać informacje dotyczące aplikacji dzierżawczej usługi B2C AAD do systemu Commerce, wykonaj następujące kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-339">To add your AAD B2C tenant application information to Commerce, follow these steps.</span></span>

1. <span data-ttu-id="95055-340">Zaloguj się jako administrator do modułu konstruktora witryn Commerce dla swojego środowiska.</span><span class="sxs-lookup"><span data-stu-id="95055-340">Sign in as an administrator to Commerce site builder for your environment.</span></span>
1. <span data-ttu-id="95055-341">W lewym okienku nawigacji wybierz pozycję **Ustawienia dzierżawcy**, aby ją rozwinąć.</span><span class="sxs-lookup"><span data-stu-id="95055-341">In the left navigation pane, select **Tenant Settings**  to expand it.</span></span>
1. <span data-ttu-id="95055-342">W obszarze **Ustawienia dzierżawy** wybierz pozycję **Ustawienia B2C**.</span><span class="sxs-lookup"><span data-stu-id="95055-342">Under **Tenant Settings**, select **B2C Settings**.</span></span> 
1. <span data-ttu-id="95055-343">W oknie głównym obok **Aplikacje B2C** wybierz opcję **Zarządzaj**.</span><span class="sxs-lookup"><span data-stu-id="95055-343">In the main window next **B2C Applications**, select **Manage**.</span></span> <span data-ttu-id="95055-344">(Jeśli Twoja dzierżawa jest wyświetlana na liście aplikacji B2C, została ona już dodana przez administratora systemu.</span><span class="sxs-lookup"><span data-stu-id="95055-344">(If your tenant appears in the B2C Applications list, then it was already added by an administrator.</span></span> <span data-ttu-id="95055-345">Sprawdź, czy elementy w kroku 6 są zgodne z aplikacją B2C.)</span><span class="sxs-lookup"><span data-stu-id="95055-345">Verify that the items in step 6 below match your B2C Application.)</span></span>
1. <span data-ttu-id="95055-346">Wybierz **Dodaj aplikację B2C**.</span><span class="sxs-lookup"><span data-stu-id="95055-346">Select **Add B2C Application**.</span></span>
1. <span data-ttu-id="95055-347">Wprowadź w wyświetlonym formularzu następujące wymagane elementy, używając wartości ze swojej dzierżawy B2C i aplikacji.</span><span class="sxs-lookup"><span data-stu-id="95055-347">Enter the following required items in the form displayed, using values from your B2C tenant and application.</span></span> <span data-ttu-id="95055-348">Pola, które nie są wymagane (bez gwiazdki), mogą pozostać puste.</span><span class="sxs-lookup"><span data-stu-id="95055-348">Fields that are not required (those without an asterisk) may be left blank.</span></span>

    - <span data-ttu-id="95055-349">**Nazwa aplikacji**: Nazwa aplikacji B2C, na przykład „Fabrikam B2C”.</span><span class="sxs-lookup"><span data-stu-id="95055-349">**Application Name**: The name for your B2C Application, for example "Fabrikam B2C".</span></span>
    - <span data-ttu-id="95055-350">**Nazwa dzierżawy**: nazwa dzierżawy funkcji B2C (na przykład „fabrikam”, jeśli domena jest wyświetlana jako „fabrikam.onmicrosoft.com” dla dzierżawcy B2C).</span><span class="sxs-lookup"><span data-stu-id="95055-350">**Tenant Name**: The name of your B2C tenant (for example, use "fabrikam" if the domain appears as "fabrikam.onmicrosoft.com" for the B2C tenant).</span></span> 
    - <span data-ttu-id="95055-351">**Identyfikator zasady zapominania hasła**: identyfikator zasady przepływu użytkownika zapominania hasła, na przykład „B2C_1_PasswordReset”.</span><span class="sxs-lookup"><span data-stu-id="95055-351">**Forget Password Policy ID**: The forget password user flow policy ID, for example "B2C_1_PasswordReset".</span></span>
    - <span data-ttu-id="95055-352">**Identyfikator zasad logowania rejestracji**: Identyfikator zasad tworzenia konta i logowania użytkownika, na przykład „B2C_1_signup_signin”.</span><span class="sxs-lookup"><span data-stu-id="95055-352">**Signup Signin Policy ID**: The sign up and sign in user flow policy ID, for example "B2C_1_signup_signin".</span></span>
    - <span data-ttu-id="95055-353">**Identyfikator GUID klienta**: Identyfikator aplikacji B2C, na przykład „22290eb2-c52e-42e9-8b35-a2b0a3bcb9e6”.</span><span class="sxs-lookup"><span data-stu-id="95055-353">**Client GUID**: The B2C application ID, for example "22290eb2-c52e-42e9-8b35-a2b0a3bcb9e6".</span></span>
    - <span data-ttu-id="95055-354">**Identyfikator zasad edycji profilu**: Identyfikator zasad przepływu użytkownika edycji profilu, na przykład „B2C_1A_ProfileEdit”.</span><span class="sxs-lookup"><span data-stu-id="95055-354">**Edit Profile Policy ID**: The profile editing user flow policy ID, for example "B2C_1A_ProfileEdit".</span></span>

1. <span data-ttu-id="95055-355">Kliknij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="95055-355">Select **OK**.</span></span> <span data-ttu-id="95055-356">Na liście powinna być widoczna nazwa aplikacji B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-356">You should now see the name of your B2C application appear in the list.</span></span>
1. <span data-ttu-id="95055-357">Wybierz **Zapisz**, żeby zapisać zmiany.</span><span class="sxs-lookup"><span data-stu-id="95055-357">Select **Save** to save your changes.</span></span>

### <a name="associate-the-b2c-application-to-your-site-and-channel"></a><span data-ttu-id="95055-358">Skojarz aplikację B2C z witryną i kanałem</span><span class="sxs-lookup"><span data-stu-id="95055-358">Associate the B2C application to your site and channel</span></span>

> [!WARNING]
> <span data-ttu-id="95055-359">Jeśli witryna jest już skojarzona z aplikacją B2C, zmiana w innej aplikacji B2C spowoduje usunięcie bieżących odwołań ustanowionych dla użytkowników już zarejestrowanych w tym środowisku.</span><span class="sxs-lookup"><span data-stu-id="95055-359">If your site is already associated with a B2C application, changing to a different B2C application will remove the current references established for users already signed up in this environment.</span></span> <span data-ttu-id="95055-360">W przypadku zmiany wszelkie poświadczenia skojarzone z aktualnie przypisaną aplikacją B2C nie będą dostępne dla użytkowników.</span><span class="sxs-lookup"><span data-stu-id="95055-360">If changed, any credentials associated with the currently-assigned B2C application will not be available to users.</span></span> 
> 
> <span data-ttu-id="95055-361">Aplikację B2C należy aktualizować tylko wtedy, gdy jest ustawiany kanał aplikacji B2C po raz pierwszy lub jeśli użytkownik chce, aby użytkownicy mogli ponownie rejestrować się z nowymi poświadczeniami w tym kanale z nową aplikacją B2C.</span><span class="sxs-lookup"><span data-stu-id="95055-361">Only update the B2C application if you are setting up the channel's B2C application for the first time or if you intend to have users re-sign up with new credentials to this channel with the new B2C application.</span></span> <span data-ttu-id="95055-362">Należy zachować ostrożność podczas kojarzenia kanałów z aplikacjami B2C i jasno określać nazwy aplikacji.</span><span class="sxs-lookup"><span data-stu-id="95055-362">Take caution when associating channels to B2C applications, and name applications clearly.</span></span> <span data-ttu-id="95055-363">Jeśli kanał nie jest skojarzony z aplikacją B2C w poniższych krokach, użytkownicy logujący się do tego kanału witryny będą wprowadzani do aplikacji B2C, która jest wyświetlana **domyślnie** na liście aplikacji B2C **Ustawienia dzierżawcy \> Ustawienia B2C**.</span><span class="sxs-lookup"><span data-stu-id="95055-363">If a channel is not associated to a B2C application in the steps below, users signing into that channel for your site will be entered into the B2C application showing as **default** in the **Tenant Settings \> B2C Settings** list of B2C applications.</span></span>

<span data-ttu-id="95055-364">Aby skojarzyć aplikację B2C z witryną i kanałem, wykonaj poniższe kroki.</span><span class="sxs-lookup"><span data-stu-id="95055-364">To associate the B2C application to your site and channel, follow these steps.</span></span>

1. <span data-ttu-id="95055-365">Przejdź do swojej witryny w module konstruktora witryn Commerce.</span><span class="sxs-lookup"><span data-stu-id="95055-365">Navigate to your site in Commerce site builder.</span></span>
1. <span data-ttu-id="95055-366">W lewym okienku nawigacji wybierz pozycję **Ustawienia witryny**, aby ją rozwinąć.</span><span class="sxs-lookup"><span data-stu-id="95055-366">In the left navigation pane, select **Site Settings** to expand it.</span></span>
1. <span data-ttu-id="95055-367">W obszarze **Ustawienia witryny** wybierz opcję **kanały**.</span><span class="sxs-lookup"><span data-stu-id="95055-367">Below **Site Settings**, select **Channels**.</span></span>
1. <span data-ttu-id="95055-368">W oknie głównym w obszarze **kanały** wybierz kanał.</span><span class="sxs-lookup"><span data-stu-id="95055-368">In the main window under **Channels**, select your channel.</span></span>
1. <span data-ttu-id="95055-369">W okienku właściwości kanału z prawej strony wybierz nazwę aplikacji B2C z menu rozwijanego **wybierz aplikację B2C**.</span><span class="sxs-lookup"><span data-stu-id="95055-369">In the channel properties pane on the right, select your B2C application name from the **Select B2C Application** drop down menu.</span></span>
1. <span data-ttu-id="95055-370">Wybierz opcję **Zamknij**, a następnie wybierz opcję **Zapisz i opublikuj**.</span><span class="sxs-lookup"><span data-stu-id="95055-370">Select **Close**, and then select **Save and Publish**.</span></span>

## <a name="additional-b2c-information"></a><span data-ttu-id="95055-371">Informacje dodatkowe o B2C</span><span class="sxs-lookup"><span data-stu-id="95055-371">Additional B2C information</span></span>

### <a name="customer-migration"></a><span data-ttu-id="95055-372">Migracja odbiorcy</span><span class="sxs-lookup"><span data-stu-id="95055-372">Customer migration</span></span>

<span data-ttu-id="95055-373">Jeśli rozważasz Migrowanie rekordów klientów z poprzedniej platformy dostawców tożsamości, skontaktuj się z zespołem Dynamics 365 Commerce, aby przejrzeć potrzeby dotyczące migracji odbiorców.</span><span class="sxs-lookup"><span data-stu-id="95055-373">If you are considering migrating customer records from a previous identity provider platform, please work with the Dynamics 365 Commerce team to review your customer migration needs.</span></span>

<span data-ttu-id="95055-374">Aby uzyskać dodatkową dokumentację B2C Azure AD dotyczącą migracji klientów, należy zapoznać się z tematem [Migrowanie użytkowników do B2C Azure Active Directory](/azure/active-directory-b2c/active-directory-b2c-user-migration).</span><span class="sxs-lookup"><span data-stu-id="95055-374">For additional Azure AD B2C documentation on customer migration, see [Migrate users to Azure Active Directory B2C](/azure/active-directory-b2c/active-directory-b2c-user-migration).</span></span>

### <a name="custom-policies"></a><span data-ttu-id="95055-375">Zasady niestandardowe</span><span class="sxs-lookup"><span data-stu-id="95055-375">Custom policies</span></span>

<span data-ttu-id="95055-376">Aby uzyskać dodatkowe informacje dotyczące dostosowywania interakcji B2C Azure AD i przepływów zasad ponad to, co jest oferowane przez zasady standardowe B2C, zapoznać się z [zasadami niestandardowymi w B2C Azure Active Directory](/azure/active-directory-b2c/active-directory-b2c-overview-custom).</span><span class="sxs-lookup"><span data-stu-id="95055-376">For additional information regarding customizing Azure AD B2C interactions and policy flows beyond what is offered by B2C standard policies, see [Custom policies in Azure Active Directory B2C](/azure/active-directory-b2c/active-directory-b2c-overview-custom).</span></span> 

### <a name="secondary-admin"></a><span data-ttu-id="95055-377">Administrator pomocniczy</span><span class="sxs-lookup"><span data-stu-id="95055-377">Secondary admin</span></span>

<span data-ttu-id="95055-378">W sekcji **użytkownicy** dzierżawy B2C można dodać opcjonalne pomocnicze konto administratora.</span><span class="sxs-lookup"><span data-stu-id="95055-378">An optional, secondary administrator account can be added in the **Users** section of your B2C tenant.</span></span> <span data-ttu-id="95055-379">Może to być konto bezpośrednie lub konto ogólne.</span><span class="sxs-lookup"><span data-stu-id="95055-379">This can be a direct account or a general account.</span></span> <span data-ttu-id="95055-380">Jeśli trzeba udostępnić konto w zasobach zespołu, można również utworzyć wspólne konto.</span><span class="sxs-lookup"><span data-stu-id="95055-380">If you need to share an account across team resources, a common account can also be created.</span></span> <span data-ttu-id="95055-381">Ze względu na wagę danych przechowywanych w B2C Azure AD, wspólne konto powinno być ściśle monitorowane zgodnie z zasadami zabezpieczeń firmy.</span><span class="sxs-lookup"><span data-stu-id="95055-381">Due to the sensitivity of the data stored in Azure AD B2C, a common account should be monitored closely per your company's security practices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="95055-382">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="95055-382">Additional resources</span></span>

[<span data-ttu-id="95055-383">Konfigurowanie nazwy domeny</span><span class="sxs-lookup"><span data-stu-id="95055-383">Configure your domain name</span></span>](configure-your-domain-name.md)

[<span data-ttu-id="95055-384">Wdrażanie nowej dzierżawy handlu elektronicznego</span><span class="sxs-lookup"><span data-stu-id="95055-384">Deploy a new e-commerce tenant</span></span>](deploy-ecommerce-site.md)

[<span data-ttu-id="95055-385">Tworzenie witryny handlu elektronicznego</span><span class="sxs-lookup"><span data-stu-id="95055-385">Create an e-commerce site</span></span>](create-ecommerce-site.md)

[<span data-ttu-id="95055-386">Kojarzenie witryny Dynamics 365 Commerce z kanałem online</span><span class="sxs-lookup"><span data-stu-id="95055-386">Associate a Dynamics 365 Commerce site with an online channel</span></span>](associate-site-online-store.md)

[<span data-ttu-id="95055-387">Zarządzanie plikami robots.txt</span><span class="sxs-lookup"><span data-stu-id="95055-387">Manage robots.txt files</span></span>](manage-robots-txt-files.md)

[<span data-ttu-id="95055-388">Zbiorowe przekazanie przekierowań adresów URL</span><span class="sxs-lookup"><span data-stu-id="95055-388">Upload URL redirects in bulk</span></span>](upload-bulk-redirects.md)

[<span data-ttu-id="95055-389">Konfigurowanie stron niestandardowych do logowań użytkowników</span><span class="sxs-lookup"><span data-stu-id="95055-389">Set up custom pages for user logins</span></span>](custom-pages-user-logins.md)

[<span data-ttu-id="95055-390">Konfigurowanie wielu dzierżawców B2C w środowisku Commerce</span><span class="sxs-lookup"><span data-stu-id="95055-390">Configure multiple B2C tenants in a Commerce environment</span></span>](configure-multi-B2C-tenants.md)

[<span data-ttu-id="95055-391">Dodawanie obsługi dla sieci dostarczania zawartości (CDN)</span><span class="sxs-lookup"><span data-stu-id="95055-391">Add support for a content delivery network (CDN)</span></span>](add-cdn-support.md)

[<span data-ttu-id="95055-392">Włączanie wykrywania sklepu na podstawie lokalizacji</span><span class="sxs-lookup"><span data-stu-id="95055-392">Enable location-based store detection</span></span>](enable-store-detection.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]