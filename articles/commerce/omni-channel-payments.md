---
title: Omówienie płatności wielokanałowych
description: W tym temacie są omówione płatności wielokanałowe w programie Dynamics 365 Commerce.
author: rubendel
manager: AnnBe
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 80eaf36fb382e0ebe0a66383ea17ab76faa07dfa
ms.sourcegitcommit: 084eda1d5503be83e97e2e428e67ef5393535fab
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 09/17/2020
ms.locfileid: "3819820"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="abac7-103">Omówienie płatności wielokanałowych</span><span class="sxs-lookup"><span data-stu-id="abac7-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="abac7-104">W tym temacie są omówione płatności wielokanałowe w programie Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="abac7-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="abac7-105">Zawiera pełną listę obsługiwanych scenariuszy, informacje o funkcjonalności, konfiguracji i rozwiązywaniu problemów oraz opisy typowych problemów.</span><span class="sxs-lookup"><span data-stu-id="abac7-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="abac7-106">Kluczowe terminy</span><span class="sxs-lookup"><span data-stu-id="abac7-106">Key terms</span></span>

| <span data-ttu-id="abac7-107">Okres</span><span class="sxs-lookup"><span data-stu-id="abac7-107">Term</span></span> | <span data-ttu-id="abac7-108">Opis</span><span class="sxs-lookup"><span data-stu-id="abac7-108">Description</span></span> |
|---|---|
| <span data-ttu-id="abac7-109">Token </span><span class="sxs-lookup"><span data-stu-id="abac7-109">Token</span></span> | <span data-ttu-id="abac7-110">Ciąg danych określany przez procesora płatności jako odwołanie.</span><span class="sxs-lookup"><span data-stu-id="abac7-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="abac7-111">Tokeny mogą reprezentować numery kart płatniczych, autoryzacje płatności i wcześniejsze przechwycenia płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="abac7-112">Tokeny są ważne, ponieważ ułatwiają odizolowanie poufnych danych od systemu punktu sprzedaży (POS).</span><span class="sxs-lookup"><span data-stu-id="abac7-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="abac7-113">Czasami są one również nazywane *odwołaniami*.</span><span class="sxs-lookup"><span data-stu-id="abac7-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="abac7-114">Token karty</span><span class="sxs-lookup"><span data-stu-id="abac7-114">Card token</span></span> | <span data-ttu-id="abac7-115">Token dostarczany przez procesora płatności do przechowywania w systemie POS.</span><span class="sxs-lookup"><span data-stu-id="abac7-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="abac7-116">Token karty może być używany tylko przez akceptanta, który go otrzymał.</span><span class="sxs-lookup"><span data-stu-id="abac7-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="abac7-117">Tokeny karty czasami są również nazywane *odwołaniami karty*.</span><span class="sxs-lookup"><span data-stu-id="abac7-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="abac7-118">Token autoryzacji (auth)</span><span class="sxs-lookup"><span data-stu-id="abac7-118">Authorization (auth) token</span></span> | <span data-ttu-id="abac7-119">Unikatowy identyfikator, który stanowi część odpowiedzi wysyłanej w procesie płatności do systemu punktu sprzedaży po złożeniu żądania autoryzacji przez system punktu sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="abac7-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="abac7-120">Tokenu autoryzacji można użyć później, jeśli procesor jest wywoływany w celu wykonania akcji, takich jak wycofanie lub unieważnienie autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="abac7-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="abac7-121">Jest on jednak najczęściej używany do przechwytywania środków finansowych po zrealizowaniu zamówienia lub sfinalizowaniu transakcji.</span><span class="sxs-lookup"><span data-stu-id="abac7-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="abac7-122">Tokeny autoryzacji czasami są również nazywane *odwołaniami autoryzacji*.</span><span class="sxs-lookup"><span data-stu-id="abac7-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="abac7-123">Przechwyć token</span><span class="sxs-lookup"><span data-stu-id="abac7-123">Capture token</span></span> | <span data-ttu-id="abac7-124">Odwołanie, które procesor płatności dostarcza do systemu punktu sprzedaży, gdy płatność zostanie sfinalizowana lub przechwycona.</span><span class="sxs-lookup"><span data-stu-id="abac7-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="abac7-125">Tokenu przechwytywania można następnie użyć jako odwołania przechwytywania płatności w kolejnych operacjach, takich jak żądania zwrotu.</span><span class="sxs-lookup"><span data-stu-id="abac7-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="abac7-126">Bez karty</span><span class="sxs-lookup"><span data-stu-id="abac7-126">Card not present</span></span> | <span data-ttu-id="abac7-127">Termin odnoszący się do transakcji płatności, w przypadku których nie jest prezentowana karta fizyczna.</span><span class="sxs-lookup"><span data-stu-id="abac7-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="abac7-128">Takie transakcje mogą być na przykład realizowane w scenariuszach handlu elektronicznego lub biura obsługi.</span><span class="sxs-lookup"><span data-stu-id="abac7-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="abac7-129">W przypadku tych transakcji informacje związane z płatnością są wprowadzane ręcznie w witrynie handlu elektronicznego, w przepływie obsługi lub w terminalu punktu sprzedaży albo płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="abac7-130">Z kartą</span><span class="sxs-lookup"><span data-stu-id="abac7-130">Card present</span></span> | <span data-ttu-id="abac7-131">Termin odnoszący się do transakcji płatności, w przypadku których karta fizyczna jest prezentowana i wkładana do terminalu płatności podłączonego do systemu punktu sprzedaży Microsoft Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="abac7-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="abac7-132">Przegląd</span><span class="sxs-lookup"><span data-stu-id="abac7-132">Overview</span></span>

<span data-ttu-id="abac7-133">Generalnie termin *płatności wielokanałowe* opisuje możliwość tworzenia zamówienia w jednym kanale i realizacji go w innym kanale.</span><span class="sxs-lookup"><span data-stu-id="abac7-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="abac7-134">Kluczem do obsługi płatności wielokonałowych jest zachowanie szczegółów płatności wraz z pozostałymi szczegółami zamówienia, a następnie użycie tych szczegółów dotyczących płatności, gdy zamówienie jest przywoływane lub przetwarzane w innym kanale.</span><span class="sxs-lookup"><span data-stu-id="abac7-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="abac7-135">Klasycznym przykładem jest scenariusz „Kup w trybie online, odbierz w sklepie”.</span><span class="sxs-lookup"><span data-stu-id="abac7-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="abac7-136">W tym scenariuszu szczegóły dotyczące płatności są dodawane po utworzeniu zamówienia w trybie online.</span><span class="sxs-lookup"><span data-stu-id="abac7-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="abac7-137">Następnie są one odczytywane w punkcie sprzedaży, aby obciążyć kartę płatności odbiorcy w momencie odbioru.</span><span class="sxs-lookup"><span data-stu-id="abac7-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="abac7-138">Wszystkie scenariusze opisane w tym temacie można zaimplementować przy użyciu standardowego zestawu SDK Płatności dostarczanego z modułem Commerce.</span><span class="sxs-lookup"><span data-stu-id="abac7-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="abac7-139">[Łącznik płatności usługi Dynamics 365 dla Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) stanowi gotową do użycia implementacją wszystkich opisanych w tym temacie scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="abac7-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="abac7-140">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="abac7-140">Prerequisites</span></span>

<span data-ttu-id="abac7-141">Każdy scenariusz opisany w tym temacie wymaga łącznika płatności, który obsługuje płatności wielokanałowe.</span><span class="sxs-lookup"><span data-stu-id="abac7-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="abac7-142">Można również użyć gotowego łącznika Adyen, ponieważ obsługuje on scenariusze udostępniane za pośrednictwem zestawu SDK Płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="abac7-143">Aby uzyskać więcej informacji na temat implementowania łączników płatności oraz ogólnie o zestawie SDK modułu Retail, odwiedź [stronę główną Podstawowe funkcje handlowe](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span><span class="sxs-lookup"><span data-stu-id="abac7-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="abac7-144">Obsługiwane wersje</span><span class="sxs-lookup"><span data-stu-id="abac7-144">Supported versions</span></span>

<span data-ttu-id="abac7-145">Funkcje płatności wielokanałowych opisane w tym temacie zostały wydane jako część programu Microsoft Dynamics 365 for Retail w wersji 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="abac7-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="abac7-146">Łączniki „Z kartą” i „Bez karty”</span><span class="sxs-lookup"><span data-stu-id="abac7-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="abac7-147">Zestaw SDK Płatności jest oparty na dwóch zestawach interfejsów programowania aplikacji (API) dla płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="abac7-148">Pierwszy zestaw interfejsów API nosi nazwę **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="abac7-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="abac7-149">Jest on używany do implementowania łączników płatności „bez karty”, które mogą być używane w biurach obsługi i na platformie handlu elektronicznego Microsoft Dynamics.</span><span class="sxs-lookup"><span data-stu-id="abac7-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="abac7-150">Aby uzyskać więcej informacji o interfejsie **iPaymentProcessor**, przeczytaj oficjalny dokument [Implementowanie łącznika płatności i urządzenia płatniczego](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf), w którym są omówione płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="abac7-151">Drugi zestaw interfejsów API nosi nazwę **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="abac7-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="abac7-152">Obsługuje on implementację integracji płatności typu „z kartą”, które korzystają z terminalu płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="abac7-153">Aby uzyskać więcej informacji o interfejsie **iNamedRequestHandler**, zobacz temat [Tworzenie integracji płatności dla terminala płatniczego](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span><span class="sxs-lookup"><span data-stu-id="abac7-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="abac7-154">Instalacja i konfiguracja</span><span class="sxs-lookup"><span data-stu-id="abac7-154">Setup and configuration</span></span>

<span data-ttu-id="abac7-155">Wymagane są następujące składniki i kroki konfiguracji:</span><span class="sxs-lookup"><span data-stu-id="abac7-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="abac7-156">**Integracja eCommerce:** integracja z modułem Commerce jest wymagana do obsługi scenariuszy, w których zamówienie pochodzi z witryny handlowej online.</span><span class="sxs-lookup"><span data-stu-id="abac7-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="abac7-157">Aby uzyskać więcej informacji na temat zestawu SDK handlu elektronicznego modułu Retail, zobacz temat [Zestaw SDK platformy handlu elektronicznego](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span><span class="sxs-lookup"><span data-stu-id="abac7-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="abac7-158">W środowisku demonstracyjnym referencyjna witryna handlowa obsługuje scenariusze płatności wielokanałowych.</span><span class="sxs-lookup"><span data-stu-id="abac7-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="abac7-159">**Konfiguracja płatności online:** konfiguracja kanału online musi zawierać łącznik płatności, który został zaktualizowany w celu obsługi płatności wielokanałowych.</span><span class="sxs-lookup"><span data-stu-id="abac7-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="abac7-160">Alternatywnie można użyć gotowego łącznika płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="abac7-161">Aby uzyskać informacje o konfigurowaniu łącznika płatności Adyen dla sklepów internetowych, zobacz temat [Łącznik płatności Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span><span class="sxs-lookup"><span data-stu-id="abac7-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="abac7-162">Oprócz kroków konfiguracji handlu elektronicznego, które opisano w tym temacie, w ustawieniach łącznika Adyen wartość parametru **Zezwalaj na zapisywanie informacji o płatności w handlu elektronicznym** musi zostać zmieniona na **true**.</span><span class="sxs-lookup"><span data-stu-id="abac7-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="abac7-163">**Konfiguracja płatności wielokanałowych:** na zapleczu przejdź do opcji **Sprzedaż detaliczna i komercyjna \> Ustawienia Headquarters \> Parametry \> Wspólne parametry sieci sprzedaży komercyjnej**.</span><span class="sxs-lookup"><span data-stu-id="abac7-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="abac7-164">Następnie na karcie **Płatności wielokanałowe** zmień ustawienie opcji **Użyj płatności wielokanałowych** na **Tak**.</span><span class="sxs-lookup"><span data-stu-id="abac7-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="abac7-165">W Commerce w wersji 10.0.12 lub nowszej to ustawienie znajduje się w obszarze roboczym **Zarządzanie funkcjami**.</span><span class="sxs-lookup"><span data-stu-id="abac7-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="abac7-166">Wybierz funkcję **Płatności wielokanałowe** i kliknij przycisk **Włącz teraz**.</span><span class="sxs-lookup"><span data-stu-id="abac7-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="abac7-167">**Usługi płatności:** biuro obsługi używa domyślnego łącznika płatności na stronie **Usługi płatności**, aby przetwarzać płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="abac7-168">Aby obsługiwać scenariusze takie jak „Kup w biurze obsługi, odbierz w sklepie”, tym domyślnym łącznikiem płatności musi być łącznik płatności Adyen lub łącznik płatności spełniający wymagania dotyczące implementacji płatności wielokanałowych.</span><span class="sxs-lookup"><span data-stu-id="abac7-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="abac7-169">**Usługa EFT:** płatności za pomocą terminalu płatności muszą być skonfigurowane na skróconej karcie **Usługi EFT** profilu sprzętu.</span><span class="sxs-lookup"><span data-stu-id="abac7-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="abac7-170">Łącznik Adyen obsługuje gotowe do użytku scenariusze płatności wielokanałowych.</span><span class="sxs-lookup"><span data-stu-id="abac7-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="abac7-171">Możliwe jest również użycie innych łączników płatności obsługujących interfejs **iNamedRequestHandler**, jeśli obsługują płatności wielokanałowe.</span><span class="sxs-lookup"><span data-stu-id="abac7-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="abac7-172">**Dostępność łącznika płatności**: w momencie odczytywania zamówienia wiersze środka płatniczego odczytywane razem z zamówieniem zawierają nazwę łącznika płatności, który został użyty do utworzenia autoryzacji skojarzonych z tym zamówieniem.</span><span class="sxs-lookup"><span data-stu-id="abac7-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="abac7-173">Po zrealizowaniu zamówienia zestaw SDK Płatności próbuje użyć tego samego łącznika, który został użyty do utworzenia oryginalnej autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="abac7-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="abac7-174">Dlatego łącznik płatności o tej samej właściwości akceptanta musi być dostępny do przechwycenia.</span><span class="sxs-lookup"><span data-stu-id="abac7-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="abac7-175">**Typy kart:** aby scenariusze wielokanałowe działały prawidłowo, każdy kanał musi mieć takie same ustawienia dotyczące typów metod płatności, które mogą być używane wielokanałowo.</span><span class="sxs-lookup"><span data-stu-id="abac7-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="abac7-176">Ta konfiguracja obejmuje identyfikatory metod płatności i identyfikatory typów kart.</span><span class="sxs-lookup"><span data-stu-id="abac7-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="abac7-177">Jeśli na przykład dla typu metody płatności **Karty** w ustawieniach sklepu internetowego jest przypisany identyfikator **2**, powinien on mieć ten sam identyfikator w ustawieniach sklepu detalicznego.</span><span class="sxs-lookup"><span data-stu-id="abac7-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="abac7-178">Ten sam wymóg dotyczy identyfikatorów typu karty.</span><span class="sxs-lookup"><span data-stu-id="abac7-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="abac7-179">Jeśli w sklepie internetowym karcie **VISA** przypisano numer karty **12**, ten sam identyfikator musi być skonfigurowany w sklepie detalicznym.</span><span class="sxs-lookup"><span data-stu-id="abac7-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="abac7-180">Retail Modern POS dla Windows lub Android z wbudowaną stacją sprzętową   -lub-</span><span class="sxs-lookup"><span data-stu-id="abac7-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="abac7-181">Nowoczesny POS na iOS lub Cloud POS z podłączoną wspólną stacją sprzętową.</span><span class="sxs-lookup"><span data-stu-id="abac7-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="abac7-182">Podstawowa zasada obsługi płatności wielokanałowych</span><span class="sxs-lookup"><span data-stu-id="abac7-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="abac7-183">Łączniki płatności i procesory płatności używają tokenów lub odwołań, aby odwoływać się do interakcji związanych z płatnościami kartą.</span><span class="sxs-lookup"><span data-stu-id="abac7-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="abac7-184">Na przykład w przypadku żądania autoryzacji płatności dostarczane jest odwołanie tej autoryzacji.</span><span class="sxs-lookup"><span data-stu-id="abac7-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="abac7-185">To odwołanie autoryzacji może zostać użyte później, gdy środki są przechwytywane w czasie realizacji.</span><span class="sxs-lookup"><span data-stu-id="abac7-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="abac7-186">Autoryzacja ta jest unikatowa dla akceptanta, łącznika płatności i procesora.</span><span class="sxs-lookup"><span data-stu-id="abac7-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="abac7-187">Jeśli zamówienie, które zostało utworzone w trybie online, jest odbierane w sklepie, należy odczytać te same szczegóły płatności tego zamówienia i ich użyć.</span><span class="sxs-lookup"><span data-stu-id="abac7-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="abac7-188">Jeśli oryginalne szczegóły są dostarczane jako część żądania przechwycenia płatności na podstawie oryginalnej autoryzacji, procesor płatności będzie mógł obsłużyć żądanie i przechwycić płatność.</span><span class="sxs-lookup"><span data-stu-id="abac7-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="abac7-189">Aby odwołanie zamówienia online było poprawne, musi być dostępny łącznik płatności „bez karty”, który obsługuje ten sam procesor.</span><span class="sxs-lookup"><span data-stu-id="abac7-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="abac7-190">W ten sposób system punktu sprzedaży może mieć jeden procesor dla płatności „z kartą”, ale może również mieć dostęp do innych łączników płatności, dzięki czemu może realizować zamówienia utworzone w innych kanałach za pomocą różnych procesorów płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="abac7-191">Obsługiwane scenariusze</span><span class="sxs-lookup"><span data-stu-id="abac7-191">Supported scenarios</span></span>

<span data-ttu-id="abac7-192">Obsługiwane są następujące scenariusze płatności wielokanałowych:</span><span class="sxs-lookup"><span data-stu-id="abac7-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="abac7-193">Kup w trybie online, odbierz w sklepie</span><span class="sxs-lookup"><span data-stu-id="abac7-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="abac7-194">Kup w biurze obsługi, odbierz w sklepie</span><span class="sxs-lookup"><span data-stu-id="abac7-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="abac7-195">Kup w sklepie A, odbierz w sklepie B</span><span class="sxs-lookup"><span data-stu-id="abac7-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="abac7-196">Kup w sklepie A, wyślij na adres odbiorcy</span><span class="sxs-lookup"><span data-stu-id="abac7-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="abac7-197">Płatności dokonywane w biurach rozmów telefonicznych, które są mapowane na „normalną” funkcję płatności, muszą zostać oznaczone jako **Przedpłata** = **Tak**, aby zostały odzwierciedlone w kwocie należnej podczas odwoływania zamówienia w punkcie sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="abac7-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="abac7-198">Płatności bez przedpłaty typu „Normalne” nie są rozpoznawane w momencie wycofania zamówienia w punkcie sprzedaży.</span><span class="sxs-lookup"><span data-stu-id="abac7-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="abac7-199">Są także obsługiwane odmiany tych scenariuszy.</span><span class="sxs-lookup"><span data-stu-id="abac7-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="abac7-200">Na przykład zamówienie online może zawierać zarówno wiersze, które zostaną wysłane do odbiorcy, jak i wiersze, które zostaną odebrane w sklepie.</span><span class="sxs-lookup"><span data-stu-id="abac7-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="abac7-201">Wszystkie opcje realizacji zamówień są obsługiwane przez płatności wielokanałowe.</span><span class="sxs-lookup"><span data-stu-id="abac7-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="abac7-202">W poniższych sekcjach opisano kroki poszczególnych scenariuszy i przedstawiono sposób uruchamiania tych scenariuszy przy użyciu danych demonstracyjnych.</span><span class="sxs-lookup"><span data-stu-id="abac7-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="abac7-203">Kup w trybie online, odbierz w sklepie</span><span class="sxs-lookup"><span data-stu-id="abac7-203">Buy online, pick up in store</span></span>

<span data-ttu-id="abac7-204">Przed rozpoczęciem upewnij się, że są spełnione następujące wymagania wstępne:</span><span class="sxs-lookup"><span data-stu-id="abac7-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="abac7-205">Istnieje referencyjna witryna handlowa, w której jest skonfigurowany łącznik Adyen.</span><span class="sxs-lookup"><span data-stu-id="abac7-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="abac7-206">Wartością opcji **Płatności wielokanałowe** na stronie **Wspólne parametry sieci sprzedaży komercyjnej** jest **True**.</span><span class="sxs-lookup"><span data-stu-id="abac7-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="abac7-207">W nowszych wersjach ten settng jest przenoszony do obszaru roboczego **Zarządzanie funkcjami**, gdzie można wybrać funkcję **Płatności wielokanałowej** i kliknąć przycisk **Włącz teraz**.</span><span class="sxs-lookup"><span data-stu-id="abac7-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="abac7-208">Łącznik płatności Adyen został skonfigurowany dla rejestru punktu sprzedaży Houston.</span><span class="sxs-lookup"><span data-stu-id="abac7-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="abac7-209">Retail Modern POS dla Windows lub Android z wbudowaną stacją sprzętową   -lub-</span><span class="sxs-lookup"><span data-stu-id="abac7-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="abac7-210">Nowoczesny POS na iOS lub Cloud POS z podłączoną wspólną stacją sprzętową.</span><span class="sxs-lookup"><span data-stu-id="abac7-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="abac7-211">Wykonaj scenariusz, postępując w następujący sposób:</span><span class="sxs-lookup"><span data-stu-id="abac7-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="abac7-212">W referencyjnej witrynie handlowej utwórz zamówienie do odbioru w sklepie.</span><span class="sxs-lookup"><span data-stu-id="abac7-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="abac7-213">Pamiętaj, aby wybrać sklep **Houston**.</span><span class="sxs-lookup"><span data-stu-id="abac7-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="abac7-214">Przejdź przez etapy realizacji transakcji i zapłać, podając numer testowej karty kredytowej.</span><span class="sxs-lookup"><span data-stu-id="abac7-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="abac7-215">Numery testowych kart kredytowych są podane na stronie [Numery testowych kart Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span><span class="sxs-lookup"><span data-stu-id="abac7-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="abac7-216">W module Commerce użyj zadania wsadowego **Synchronizuj zamówienia** oraz harmonogramu dystrybucji **P-001**, aby utworzyć zamówienia na zapleczu.</span><span class="sxs-lookup"><span data-stu-id="abac7-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="abac7-217">W punkcie sprzedaży, na stronie powitalnej, wybierz operację **Zamówienia do odbioru**, aby wyświetlić zamówienia do odbioru w sklepie.</span><span class="sxs-lookup"><span data-stu-id="abac7-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="abac7-218">Wybierz jeden lub więcej wierszy z zamówienia utworzonego w referencyjnej witrynie handlowej, a następnie wybierz opcję **Odbiór.**</span><span class="sxs-lookup"><span data-stu-id="abac7-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="abac7-219">Zamówienie zostanie pobrane z zaplecza.</span><span class="sxs-lookup"><span data-stu-id="abac7-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="abac7-220">Jeśli szczegóły wiersza zamówienia są odczytywane z zaplecza i zostanie wykryta płatność kartą, która może być użyta w płatności wielokanałowej, zostanie wyświetlona informacja o dostępności metody płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="abac7-221">Wybierz opcję **Użyj dostępnej metody płatności**, aby dokończyć transakcję, korzystając z szczegółów karty wprowadzonych w referencyjnej witrynie handlowej.</span><span class="sxs-lookup"><span data-stu-id="abac7-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="abac7-222">Wiersze zamówienia są ładowane na stronie transakcji, a saldo należne wynosi 0 (zero).</span><span class="sxs-lookup"><span data-stu-id="abac7-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="abac7-223">Wybierz kartę **Płatności**, aby wyświetlić wiersz metody płatności, który pochodzi z zamówienia online.</span><span class="sxs-lookup"><span data-stu-id="abac7-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="abac7-224">Wybierz dowolną metodę płatności, aby ukończyć transakcję.</span><span class="sxs-lookup"><span data-stu-id="abac7-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="abac7-225">Kup w biurze obsługi, odbierz w sklepie</span><span class="sxs-lookup"><span data-stu-id="abac7-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="abac7-226">W module Commerce, na stronie **Obsługa klienta** wpisz **Karen Berg** na pasku wyszukiwania, a następnie kliknij przycisk **Wyszukaj**.</span><span class="sxs-lookup"><span data-stu-id="abac7-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="abac7-227">Wybierz opcję **Karen Berg** w wynikach wyszukiwania.</span><span class="sxs-lookup"><span data-stu-id="abac7-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="abac7-228">Po załadowaniu Karen na stronie **Obsługa klienta** wybierz opcję **Nowe zamówienie sprzedaży**.</span><span class="sxs-lookup"><span data-stu-id="abac7-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="abac7-229">Na stronie nowego zamówienia sprzedaży wybierz opcję **Nagłówek**, aby wyświetlić nagłówek zamówienia.</span><span class="sxs-lookup"><span data-stu-id="abac7-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="abac7-230">Na stronie **Nagłówek** zamówienia wybierz oddział **Centralny** i magazyn **Houston**.</span><span class="sxs-lookup"><span data-stu-id="abac7-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="abac7-231">Na karcie **Dostawa** zmień wartość w polu **Metoda dostawy** na **60**, która oznacza odbiór przez odbiorcę.</span><span class="sxs-lookup"><span data-stu-id="abac7-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="abac7-232">Wybierz opcję **Wiersze**, a następnie dodaj jeden lub więcej wierszy do zamówienia.</span><span class="sxs-lookup"><span data-stu-id="abac7-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="abac7-233">Wybierz opcję **Gotowe**, aby wprowadzić przepływ ukończenia zamówienia.</span><span class="sxs-lookup"><span data-stu-id="abac7-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="abac7-234">Przewiń w dół do sekcji płatności, naciśnij przycisk pozycję **Dodaj**, a następnie wybierz wiersz, dla którego ustawiono typ metody płatności **Karty**.</span><span class="sxs-lookup"><span data-stu-id="abac7-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="abac7-235">Wybierz znak plus (**+**), aby dodać płatność kartą.</span><span class="sxs-lookup"><span data-stu-id="abac7-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="abac7-236">Wprowadź numer testowej karty kredytowej odczytany na stronie [Numery testowych kart Adyen](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), a następnie naciśnij przycisk **OK**.</span><span class="sxs-lookup"><span data-stu-id="abac7-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="abac7-237">Jeśli marka karty wprowadzonego numeru karty różni się od marki wybranej w momencie inicjowania płatności, płatność też zostanie zaakceptowana.</span><span class="sxs-lookup"><span data-stu-id="abac7-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="abac7-238">Zostanie ona jednak zaksięgowana na kontach zmapowanych do marki karty wybranej w kroku 10.</span><span class="sxs-lookup"><span data-stu-id="abac7-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="abac7-239">Ponownie naciśnij przycisk **OK**, aby zamknąć okno dialogowe **Płatności za zamówienie**.</span><span class="sxs-lookup"><span data-stu-id="abac7-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="abac7-240">Na stronie **Podsumowanie zamówienia sprzedaży** naciśnij przycisk **Prześlij.**</span><span class="sxs-lookup"><span data-stu-id="abac7-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="abac7-241">W punkcie sprzedaży, na stronie powitalnej, wybierz operację **Zamówienia do odbioru**, aby wyświetlić zamówienia do odbioru w sklepie.</span><span class="sxs-lookup"><span data-stu-id="abac7-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="abac7-242">Wybierz jeden lub więcej wierszy z zamówienia utworzonego w referencyjnej witrynie handlowej, a następnie wybierz opcję **Odbiór.**</span><span class="sxs-lookup"><span data-stu-id="abac7-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="abac7-243">Zamówienie zostanie pobrane z zaplecza.</span><span class="sxs-lookup"><span data-stu-id="abac7-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="abac7-244">Jeśli szczegóły wiersza zamówienia są odczytywane z zaplecza i zostanie wykryta płatność kartą, która może być użyta w płatności wielokanałowej, zostanie wyświetlona informacja o dostępności metody płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="abac7-245">Wybierz opcję **Użyj dostępnej metody płatności**, aby dokończyć transakcję, korzystając z szczegółów karty wprowadzonych w referencyjnej witrynie handlowej.</span><span class="sxs-lookup"><span data-stu-id="abac7-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="abac7-246">Wiersze zamówienia są ładowane na stronie transakcji, a saldo należne wynosi 0 (zero).</span><span class="sxs-lookup"><span data-stu-id="abac7-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="abac7-247">Wybierz kartę **Płatności**, aby wyświetlić wiersz metody płatności, który pochodzi z zamówienia online.</span><span class="sxs-lookup"><span data-stu-id="abac7-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="abac7-248">Wybierz dowolną metodę płatności, aby ukończyć transakcję.</span><span class="sxs-lookup"><span data-stu-id="abac7-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="abac7-249">Kup w sklepie A, odbierz w sklepie B</span><span class="sxs-lookup"><span data-stu-id="abac7-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="abac7-250">Uruchom punkt sprzedaży sklepu Houston.</span><span class="sxs-lookup"><span data-stu-id="abac7-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="abac7-251">Na stronie **Transakcja** dodaj Karen Berg do transakcji, wprowadzając wartość **2001** za pomocą klawiatury numerycznej.</span><span class="sxs-lookup"><span data-stu-id="abac7-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="abac7-252">Dodaj jeden lub więcej wierszy do transakcji.</span><span class="sxs-lookup"><span data-stu-id="abac7-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="abac7-253">Naciśnij przycisk **Zamówienia**, aby wyświetlić opcje zamówienia.</span><span class="sxs-lookup"><span data-stu-id="abac7-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="abac7-254">Wybierz opcję **Pobierz wszystko**, a następnie, po wyświetleniu monitu, wybierz opcję **Zamówienieodbiorcy**.</span><span class="sxs-lookup"><span data-stu-id="abac7-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="abac7-255">Na pasku wyszukiwania wpisz **Seattle**, a następnie wybierz sklep **Seattle** jako miejsce odbioru.</span><span class="sxs-lookup"><span data-stu-id="abac7-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="abac7-256">Kliknij przycisk **OK**, aby zaakceptować bieżącą datę jako datę odbioru.</span><span class="sxs-lookup"><span data-stu-id="abac7-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="abac7-257">Wybierz opcję **Płatność kartą**, aby zainicjować płatność.</span><span class="sxs-lookup"><span data-stu-id="abac7-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="abac7-258">Dokonaj płatności kartą na kwotę należną za depozyt.</span><span class="sxs-lookup"><span data-stu-id="abac7-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="abac7-259">Dokonaj płatności depozytu na terminalu płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="abac7-260">Po zapłaceniu depozytu wybierz opcję, aby użyć tej samej karty do realizacji i poczekaj, aż zamówienie zostanie zrealizowane.</span><span class="sxs-lookup"><span data-stu-id="abac7-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="abac7-261">Uruchom punkt sprzedaży sklepu Seattle.</span><span class="sxs-lookup"><span data-stu-id="abac7-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="abac7-262">W punkcie sprzedaży, na stronie powitalnej, wybierz operację **Zamówienia do odbioru**, aby wyświetlić zamówienia do odbioru w sklepie.</span><span class="sxs-lookup"><span data-stu-id="abac7-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="abac7-263">Wybierz jeden lub więcej wierszy z zamówienia utworzonego w referencyjnej witrynie handlowej, a następnie wybierz opcję **Odbiór.**</span><span class="sxs-lookup"><span data-stu-id="abac7-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="abac7-264">Zamówienie zostanie pobrane z zaplecza.</span><span class="sxs-lookup"><span data-stu-id="abac7-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="abac7-265">Jeśli szczegóły wiersza zamówienia są odczytywane z zaplecza i zostanie wykryta płatność kartą, która może być użyta w płatności wielokanałowej, zostanie wyświetlona informacja o dostępności metody płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="abac7-266">Wybierz opcję **Użyj dostępnej metody płatności**, aby dokończyć transakcję, korzystając z szczegółów karty wprowadzonych w referencyjnej witrynie handlowej.</span><span class="sxs-lookup"><span data-stu-id="abac7-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="abac7-267">Wiersze zamówienia są ładowane na stronie transakcji, a saldo należne wynosi 0 (zero).</span><span class="sxs-lookup"><span data-stu-id="abac7-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="abac7-268">Wybierz kartę **Płatności**, aby wyświetlić wiersz metody płatności, który pochodzi z zamówienia online.</span><span class="sxs-lookup"><span data-stu-id="abac7-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="abac7-269">Wybierz dowolną metodę płatności, aby ukończyć transakcję.</span><span class="sxs-lookup"><span data-stu-id="abac7-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="abac7-270">Kup w sklepie A, wyślij na adres odbiorcy</span><span class="sxs-lookup"><span data-stu-id="abac7-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="abac7-271">Uruchom punkt sprzedaży sklepu Houston.</span><span class="sxs-lookup"><span data-stu-id="abac7-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="abac7-272">Na stronie **Transakcja** dodaj Karen Berg do transakcji, wprowadzając wartość **2001** za pomocą klawiatury numerycznej.</span><span class="sxs-lookup"><span data-stu-id="abac7-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="abac7-273">Dodaj jeden lub więcej wierszy do transakcji.</span><span class="sxs-lookup"><span data-stu-id="abac7-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="abac7-274">Naciśnij przycisk **Zamówienia**, aby wyświetlić opcje zamówienia.</span><span class="sxs-lookup"><span data-stu-id="abac7-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="abac7-275">Wybierz opcję **Wyślij wszystko**, a następnie, po wyświetleniu monitu, wybierz opcję **Zamówienie odbiorcy**.</span><span class="sxs-lookup"><span data-stu-id="abac7-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="abac7-276">Na stronie Metoda wysyłki wybierz opcję **Standardowa noc**, a następnie kliknij przycisk **OK**, aby zaakceptować datę dzisiejszą jako datę wysyłki.</span><span class="sxs-lookup"><span data-stu-id="abac7-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="abac7-277">Kliknij przycisk **OK**, aby zaakceptować bieżącą datę jako datę odbioru.</span><span class="sxs-lookup"><span data-stu-id="abac7-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="abac7-278">Wybierz opcję **Płatność kartą**, aby zainicjować płatność.</span><span class="sxs-lookup"><span data-stu-id="abac7-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="abac7-279">Dokonaj płatności kartą na kwotę należną za depozyt.</span><span class="sxs-lookup"><span data-stu-id="abac7-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="abac7-280">Dokonaj płatności depozytu na terminalu płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="abac7-281">Po zapłaceniu depozytu wybierz opcję, aby użyć tej samej karty do realizacji i poczekaj, aż zamówienie zostanie zrealizowane.</span><span class="sxs-lookup"><span data-stu-id="abac7-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="abac7-282">Po pobraniu, spakowaniu i zafakturowaniu zamówienia w zapleczu szczegóły płatności podane w punkcie sprzedaży zostaną użyte do przechwycenia środków za towary wysyłane do odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="abac7-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="abac7-283">Szczegóły scenariusza</span><span class="sxs-lookup"><span data-stu-id="abac7-283">Scenario details</span></span>

<span data-ttu-id="abac7-284">Oprócz opisanych podstawowych scenariuszy, w zestawie SDK Płatności wprowadzono kilka ulepszeń, które umożliwiają obsługę płatności wielokanałowych.</span><span class="sxs-lookup"><span data-stu-id="abac7-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="abac7-285">Punkt sprzedaży</span><span class="sxs-lookup"><span data-stu-id="abac7-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="abac7-286">Pojedyncze przeciągnięcie dla zamówień odbiorcy</span><span class="sxs-lookup"><span data-stu-id="abac7-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="abac7-287">Zanim została zaimplementowana funkcja płatności wielokanałowych po utworzeniu w punkcie sprzedaży zamówień odbiorcy zawierających depozyt odbiorcy musieli przeciągać kartę dwa razy: jeden raz, aby wpłacić depozyt, i jeden raz, aby autoryzować kartę podczas późniejszej realizacji zamówienia.</span><span class="sxs-lookup"><span data-stu-id="abac7-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="abac7-288">Gdy jest włączona funkcja autoryzacji wielokanałowej, odbiorcy muszą przeciągnąć kartę tylko jeden raz, aby wpłacić depozyt i autoryzować kwotę należną za towary, które zostaną zrealizowane później.</span><span class="sxs-lookup"><span data-stu-id="abac7-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="abac7-289">W momencie realizacji są przechwytywane autoryzowane środki.</span><span class="sxs-lookup"><span data-stu-id="abac7-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="abac7-290">Przed zaimplementowaniem funkcji autoryzacji wielokanałowej był tworzony tylko cykliczny token karty do późniejszej realizacji zamówienia.</span><span class="sxs-lookup"><span data-stu-id="abac7-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="abac7-291">W związku z tym środki za niezrealizowane zamówienie nie były autoryzowane i ponieważ nie były zablokowane w tym określonym celu ich późniejsze przechwycenie było mniej prawdopodobne.</span><span class="sxs-lookup"><span data-stu-id="abac7-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="abac7-292">Pojedyncze przeciągnięcie nie jest obsługiwane w module Retail w wersji 8.1.3.</span><span class="sxs-lookup"><span data-stu-id="abac7-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="abac7-293">Przepływ zamówień odbiorcy w wersji 8.1.3 jest taki sam, jak przed zaimplementowaniem funkcji autoryzacji wielokanałowej.</span><span class="sxs-lookup"><span data-stu-id="abac7-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="abac7-294">Karty, które nie mogą wystawiać cyklicznych tokenów karty</span><span class="sxs-lookup"><span data-stu-id="abac7-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="abac7-295">Niektórych kart nie można używać do płatności wielokanałowych, ponieważ nie obsługują wystawiania cyklicznych tokenów karty.</span><span class="sxs-lookup"><span data-stu-id="abac7-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="abac7-296">Jeśli w momencie tworzenia zamówienia w punkcie sprzedaży depozyt jest wpłacany kartą nieobsługującą cyklicznych tokenów karty, autoryzacja karty odbywa się zgodnie z dawnym przepływem,</span><span class="sxs-lookup"><span data-stu-id="abac7-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="abac7-297">W związku z tym odbiorca chcący dokonać płatności, która zostanie użyta później po realizacji zamówienia, musi przedstawić drugą kartę.</span><span class="sxs-lookup"><span data-stu-id="abac7-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="abac7-298">Jeśli druga karta nie obsługuje cyklicznych tokenów karty, autoryzacja zostanie odrzucona i zostanie wyświetlony komunikat, aby kasjer poprosił o inną kartę.</span><span class="sxs-lookup"><span data-stu-id="abac7-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="abac7-299">Użycie innej karty</span><span class="sxs-lookup"><span data-stu-id="abac7-299">Using a different card</span></span>

<span data-ttu-id="abac7-300">Odbiorca przychodzący do sklepu po odbiór zamówienia ma możliwość użycia innej karty.</span><span class="sxs-lookup"><span data-stu-id="abac7-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="abac7-301">Jeśli kasjer zobaczy komunikat **Użyj dostępnej metody płatności** w momencie odbierania zamówienia, może zapytać, czy odbiorca chce skorzystać z tej samej karty.</span><span class="sxs-lookup"><span data-stu-id="abac7-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="abac7-302">Jeśli odbiorca stracił kartę, która została użyta do utworzenia zamówienia i chce zapłacić za zamówienie inną kartą, kasjer może wybrać opcję **Użyj innej metody płatności**.</span><span class="sxs-lookup"><span data-stu-id="abac7-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="abac7-303">Jeśli później odbiorca przychodzi ponownie, aby odebrać inne artykuły z tego samego zamówienia i pierwotna autoryzacja karty jest nadal ważna, kasjer może ponownie zapytać, czy odbiorca chce użyć tej karty.</span><span class="sxs-lookup"><span data-stu-id="abac7-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="abac7-304">Nieprawidłowe autoryzacje</span><span class="sxs-lookup"><span data-stu-id="abac7-304">Invalid authorizations</span></span>

<span data-ttu-id="abac7-305">Jeśli karta użyta do utworzenia zamówienia nie jest już ważna w momencie wybierania produktów do odbioru, żądanie przechwycenia płatności nie powiedzie się.</span><span class="sxs-lookup"><span data-stu-id="abac7-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="abac7-306">Łącznik płatności punktu sprzedaży podejmie następnie próbę utworzenia nowej autoryzacji i przechwycenia przy użyciu tych samych danych karty.</span><span class="sxs-lookup"><span data-stu-id="abac7-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="abac7-307">Jeśli nowa autoryzacja lub przechwycenie nie powiedzie się, kasjer zostanie poinformowany, że nie można przetworzyć płatności.</span><span class="sxs-lookup"><span data-stu-id="abac7-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="abac7-308">Kasjer musi wówczas otrzymać nową płatność od odbiorcy.</span><span class="sxs-lookup"><span data-stu-id="abac7-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="abac7-309">Wiele dostępnych płatności</span><span class="sxs-lookup"><span data-stu-id="abac7-309">Multiple available payments</span></span>

<span data-ttu-id="abac7-310">W przypadku odbierania zamówienia z więcej niż jedną metodą płatności i więcej niż jednym wierszem kasjerowi jest najpierw wyświetlany komunikat **Użyj dostępnej metody płatności**.</span><span class="sxs-lookup"><span data-stu-id="abac7-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="abac7-311">Jeśli istnieje więcej niż jedna karta, po wybraniu przez kasjera opcji **Użyj dostępnej metody płatności**, istniejące wiersze metody płatności są przechwytywane do momentu spłacenia salda za towary, które są odbierane.</span><span class="sxs-lookup"><span data-stu-id="abac7-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="abac7-312">Kasjer nie będzie mógł wybrać karty, która ma zostać użyta do płatności za odbierane towary.</span><span class="sxs-lookup"><span data-stu-id="abac7-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="abac7-313">Powiązane tematy</span><span class="sxs-lookup"><span data-stu-id="abac7-313">Related topics</span></span>

- [<span data-ttu-id="abac7-314">Płatności — często zadawane pytania</span><span class="sxs-lookup"><span data-stu-id="abac7-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="abac7-315">Łącznik płatności usługi Dynamics 365 dla Adyen</span><span class="sxs-lookup"><span data-stu-id="abac7-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="abac7-316">Konfigurowanie BOPIS w środowisku oceny Dynamics 365 Commerce</span><span class="sxs-lookup"><span data-stu-id="abac7-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)

