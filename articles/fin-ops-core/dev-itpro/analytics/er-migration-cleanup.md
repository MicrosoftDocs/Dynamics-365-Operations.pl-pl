---
title: Oczyszczanie migracji ER
description: W tym temacie wyjaśniono, jak można za pomocą funkcji oczyszczania migracji ER rozwiązywać problemy z szablonami ER.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: b09afc30c401e2dccfc4114261dc5e713c8c470c
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/09/2021
ms.locfileid: "5565522"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="2ce3d-103">Oczyszczanie migracji ER</span><span class="sxs-lookup"><span data-stu-id="2ce3d-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="2ce3d-104">Podczas zarządzania wystąpieniami aplikacji Finance można zdecydować, czy bieżące wystąpienie ma być migrowane do innej lokalizacji.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="2ce3d-105">Na przykład wystąpienie produkcji można migrować do nowego środowiska piaskownicy.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="2ce3d-106">Jeśli struktura modułu Raportowanie elektroniczne (ER) została skonfigurowana do przechowywania szablonów w usłudze Microsoft Azure Blob Storage tabela **DocuValue** w nowym środowisku piaskownicy odwołuje się do wystąpienia magazynu obiektów blob w środowisku produkcyjnym.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="2ce3d-107">Nie można jednak uzyskać dostępu do tego wystąpienia ze środowiska piaskownicy, ponieważ proces migracji nie obsługuje migracji artefaktów w magazynie obiektów Blob.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="2ce3d-108">Należy raczej oczekiwać, że w nowym środowisku piaskownicy będziesz odwoływać się do wystąpienia magazynu obiektów blob w środowisku piaskownicy, które nie uzyskało jeszcze szablonów ER.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="2ce3d-109">W przypadku próby uruchomienia formatu ER, który używa szablonu do generowania dokumentów biznesowych, wystąpi wyjątek i użytkownik zostanie powiadomiony o brakującym szablonie.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="2ce3d-110">Użytkownik ma również możliwość użycia opcji oczyszczania migracji ER w celu usunięcia, a następnie ponownego zaimportowania konfiguracji formatu ER, która zawiera szablon.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="2ce3d-111">[![Uruchamianie formatu ER](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="2ce3d-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="2ce3d-112">Podobny błąd wystąpi, jeśli przejdziesz do strony **Konfiguracje** (**Administracja organizacją** \> **Raportowanie elektroniczne** \> **Konfiguracje**) i w drzewie konfiguracji spróbujesz usunąć konfigurację formatu ER, w której jest używany szablon.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="2ce3d-113">[![Usuwanie formatu ER](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="2ce3d-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="2ce3d-114">Wykonaj poniższe kroki, aby rozwiązać problemy z szablonami ER, do których nie masz dostępu.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="2ce3d-115">Przejdź na stronę **Administracja organizacją** \> **Okresowe** \> **Oczyszczanie migracji**.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="2ce3d-116">Wybierz konfigurację formatu ER, której nie można wykonać ani usunąć.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-116">Select an ER format configuration that can’t be executed or deleted.</span></span>
3.  <span data-ttu-id="2ce3d-117">Wybierz opcję **Usuń**.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="2ce3d-118">Potwierdź usunięcie wybranej konfiguracji formatu ER.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="2ce3d-119">[Zaimportuj](download-electronic-reporting-configuration-lcs.md) usuniętą konfigurację formatu ER do bieżącego wystąpienia aplikacji Finance.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="2ce3d-120">Możliwość stosowania</span><span class="sxs-lookup"><span data-stu-id="2ce3d-120">Applicability</span></span>

> <span data-ttu-id="2ce3d-121">[Ważne] Opcja **Oczyszczanie migracji** jest stosowana tylko w przypadku konfiguracji formatu ER, które zawierają niedostępne szablony ER.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="2ce3d-122">Usunięcie konfiguracji formatu ER przy użyciu opcji **Oczyszczanie migracji** spowoduje, że moduł ER usunie szablony związane z artefaktami konfiguracji w jedynej bazie danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="2ce3d-123">Istnienie odpowiednich plików fizycznych w magazynie obiektów blob nie jest weryfikowane.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="2ce3d-124">Zamiast tego przyjmuje się, że nie ma takich plików.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="2ce3d-125">Dlatego nie należy używać opcji **Oczyszczanie migracji** jako alternatywy opcji usuwania konfiguracji ER na stronie **Konfiguracje**.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="2ce3d-126">Używaj opcji **Oczyszczanie migracji** tylko wtedy, gdy działanie opcji usuwania konfiguracji ER na stronie **Konfiguracje** zakończyło się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="2ce3d-127">Jeśli użyjesz opcji **Oczyszczanie migracji** w celu usunięcia konfiguracji formatu ER, gdy przywoływany szablony będzie dostępny w magazynie obiektów blob, usuniesz tylko powiązane artefakty konfiguracji w bazie danych aplikacji.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="2ce3d-128">Plik fizyczny szablonu pozostanie w magazynie obiektów blob.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="2ce3d-129">Zastąpienie pliku w magazynie obiektów blob nie jest już dozwolone.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="2ce3d-130">Aby uzyskać więcej informacji, zobacz [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span><span class="sxs-lookup"><span data-stu-id="2ce3d-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="2ce3d-131">Ponadto nie będzie już można ponownie importować konfiguracji usuniętych przy użyciu oczyszczania migracji w tym środowisku.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="2ce3d-132">Aby rozwiązać ten problem, należy znaleźć odpowiedni plik w magazynie obiektów blob i usunąć go ręcznie.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="2ce3d-133">[![Importowanie formatu ER](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="2ce3d-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="2ce3d-134">Podobny problem może wystąpić w przypadku migrowania wystąpienia aplikacji do innej lokalizacji, która została użyta jako lokalizacja docelowa migracji, dla której magazyn obiektów blob już zawiera pliki szablonów ER.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="2ce3d-135">Ponieważ możesz mieć kilka konfiguracji formatu ER, ten proces może być czasochłonny.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="2ce3d-136">Z tego względu preferowane jest użycie funkcji [tworzenia kopii zapasowych szablonów ER](er-backup-storage-templates.md) do automatycznego odzyskiwania szablonów z przerwanymi odwołaniami.</span><span class="sxs-lookup"><span data-stu-id="2ce3d-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]