---
title: Międzyfirmowe źródła danych w module Raportowanie elektroniczne (ER)
description: W tym temacie wyjaśniono, jak można używać źródeł danych wielu firm w Raportowaniu elektronicznym (RE).
author: NickSelin
ms.date: 05/25/2018
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERModelMappingDesigner, ERFormatMappingLegalEntityFilterTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: 220314
ms.assetid: 2685df16-5ec8-4fd7-9495-c0f653e82567
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-04-01
ms.dyn365.ops.version: Release 8.0
ms.openlocfilehash: 7528a84bae388dd8b159405043570b647d6e2cb4
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/31/2021
ms.locfileid: "5753751"
---
# <a name="cross-company-data-sources-in-electronic-reporting-er"></a><span data-ttu-id="d9bd2-103">Międzyfirmowe źródła danych w module Raportowanie elektroniczne (ER)</span><span class="sxs-lookup"><span data-stu-id="d9bd2-103">Cross-company data sources in Electronic reporting (ER)</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="d9bd2-104">Można zaprojektować formaty raportów elektronicznych ER w taki sposób, aby generowały wychodzące dokumenty w różnych formatach.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-104">You can design Electronic reporting (ER) formats to generate outgoing documents in various formats.</span></span> <span data-ttu-id="d9bd2-105">Podczas generowania dokumentu format ER wywołuje źródła danych, które zostały skonfigurowane w odpowiadającym im mapowaniu modelu ER.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-105">When a document is generated, an ER format calls data sources that were configured in a corresponding ER model mapping.</span></span> <span data-ttu-id="d9bd2-106">Aby skonfigurować dostęp do tabel zgłoszeń w celu pobierania zapisów, można skorzystać z Awaryjnych źródeł danych typu **Zapisy tabeli**.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-106">To configure access to application tables for record retrieval, you can use ER data sources of the **Table records** type.</span></span> <span data-ttu-id="d9bd2-107">Podczas uzyskiwania dostępu do tabeli, która jest współużytkowana (czyli miejsca przechowywania danych bez identyfikatora firmy), to źródło danych zwraca wszystkie rekordy.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-107">When the accessing table is a shared table (that is, a table where data is saved without a company identifier), this data source returns all records.</span></span> <span data-ttu-id="d9bd2-108">Podczas uzyskiwania dostępu do tabeli, która jest zależna od firmy (czyli miejsce przechowywania danych dla każdej firmy), to źródło danych zwraca tylko te rekordy, które zostały zapisane dla bieżącej firmy (czyli kontekst firmy pod którym pracuje format ER).</span><span class="sxs-lookup"><span data-stu-id="d9bd2-108">When the accessing table is a company-dependent table (that is, a table where data is saved per company), this data source returns only the records that have been saved for the current company (that is, the company context that the ER format is running under).</span></span>

<span data-ttu-id="d9bd2-109">Każde źródło danych typu **Rekordy tabeli** w mapowaniu modelu może zostać teraz oznaczone jako międzyfirmowe źródło danych.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-109">Every data source of the **Table records** type in a model mapping can be now marked as a cross-company data source.</span></span> <span data-ttu-id="d9bd2-110">Dlatego można użyć źródeł danych typu **Rekordy w tabeli**, aby uzyskać dostęp do danych przedsiębiorstwa w tabelach aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-110">Therefore, you can use data sources of the **Table records** type to access cross-company data in application tables.</span></span>

<span data-ttu-id="d9bd2-111">Jeśli oznaczysz źródło danych jako międzyfirmowe, wystąpi następujące zachowanie:</span><span class="sxs-lookup"><span data-stu-id="d9bd2-111">If you mark a data source as cross-company, the following behavior occurs:</span></span>

- <span data-ttu-id="d9bd2-112">W przypadku źródła danych, które odwołuje się do którejkolwiek współużytkowanej tabeli z wyjątkiem CompanyInfo, są zwracane wszystkie rekordy istniejące w przywoływanej tabeli.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-112">For a data source that refers to any shared table except CompanyInfo, the data source returns all records that exist in the referenced table.</span></span> 
- <span data-ttu-id="d9bd2-113">W przypadku źródła danych, które odwołuje się do tabeli CompanyInfo, nawet jeśli CompanyInfo jest tabelą współużytkowaną, są zwracane rekordy zawierające identyfikator firmy z określonego zakresu.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-113">For a data source that refers to the CompanyInfo table, even though CompanyInfo is a shared table, the data source returns the records that contain the identifier of a company from the defined scope.</span></span>
- <span data-ttu-id="d9bd2-114">Dla każdej tabeli zależnej od firmy źródło danych zwraca rekordy przywoływanej tabeli zawierające identyfikator firmy z podanego zakresu.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-114">For any company-dependent table, the data source returns the records of the referenced table that contain the identifier of a company from the defined scope.</span></span>

<span data-ttu-id="d9bd2-115">W oknie dialogowym zapytania systemowego po włączeniu opcji **Monituj o zapytanie** dla któregokolwiek źródła danych oznaczonego jako międzyfirmowe można na karcie **Zakres firm** ręcznie wybrać jedną lub więcej firm do uwzględnienia.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-115">In the system query dialog box, when the **Ask for query** option is turned on for any data source that is marked as cross-company, you can manually select one or more companies to include on the **Company range** tab.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="d9bd2-116">Podobnie jak inne filtry, filtr firm jest utrwalany jako ostatnio używana wartość w zapytaniach po uruchomieniu formatu raportowania elektronicznego.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-116">Like other filters, the company filter is persisted as a last-used value for queries when you run an ER format.</span></span> <span data-ttu-id="d9bd2-117">Filtr nie jest automatycznie zmieniony, jeśli zmienisz wartość międzyfirmową dla źródła danych.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-117">The filter isn't automatically changed if you change the cross-company value for a data source.</span></span> <span data-ttu-id="d9bd2-118">Aby użyć innej wartości międzyfirmowej innego źródła danych, usuń odpowiednie zaznaczenie typowe dla użytkownika.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-118">To use a different cross-company value for another data source, delete the corresponding user-specific selection.</span></span>

<span data-ttu-id="d9bd2-119">Dla każdego źródła danych oznaczonego jako międzyfirmowe można wybrać żądane rekordy, używając funkcji **FILTER** i **WHERE** w wyrażeniach ER.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-119">For every data source that is marked as cross-company, you can select the records that you want by using the **FILTER** and **WHERE** functions in ER expressions.</span></span> <span data-ttu-id="d9bd2-120">Pole **dataAreaID** może być również używane jako identyfikator firmy.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-120">The **dataAreaID** field can also be used as a company identifier.</span></span> <span data-ttu-id="d9bd2-121">Obecnie pole **dataAreaID** może zawierać wyłącznie następujące typy warunków, gdy jest używana funkcja **FILTR**:</span><span class="sxs-lookup"><span data-stu-id="d9bd2-121">Currently, the **dataAreaID** field is limited to the following types of conditions when the **FILTER** function is used:</span></span>

- <span data-ttu-id="d9bd2-122">Obsługiwane są tylko warunki z jednym porównaniem pola **dataAreaID**.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-122">Only conditions that have a single **dataAreaID** field comparison are supported.</span></span>
- <span data-ttu-id="d9bd2-123">Dozwolone są tylko porównania zawierające wyrażenia, które nie zależą od elementów listy rekordów.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-123">Only comparisons that have expressions that don't depend on records list items are allowed.</span></span>

<span data-ttu-id="d9bd2-124">Dlatego poniższe wyrażenie jest prawidłowe.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-124">Therefore, the following expression is valid.</span></span>

```ER Expression
FILTER (MyTable, MyTable.dataAreaID = $StringUserInputParameter)
While shown below expressions will not pass the validation:
FILTER (MyTable, MyTable.dataAreaID = MyTable2RecordsList.MyField)
FILTER (MyTable, 
    OR(
        MyTable.dataAreaID = $StringUserInputParameter1,
        MyTable.dataAreaID = $StringUserInputParameter2
    )
)
```

<span data-ttu-id="d9bd2-125">Domyślnie zakres obejmuje wszystkie firmy w bieżącej aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-125">By default, the scope includes all companies of the current application.</span></span> <span data-ttu-id="d9bd2-126">Można to jednak ograniczyć.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-126">However, it can be restricted.</span></span> <span data-ttu-id="d9bd2-127">Aby ograniczyć zakres dostęp do danych wielu firm dla jednego formatu ER, należy przypisać określonej hierarchię organizacji do tego formatu.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-127">To restrict the scope of cross-company data access for a single ER format, assign a specific organization hierarchy to the format.</span></span> <span data-ttu-id="d9bd2-128">W przypadku zdefiniowania hierarchii dla formatu ER, tylko zapisy dla podmiotów prawnych, które są prezentowane w przypisanej hierarchii są zwracane, nawet jeśli format wymaga źródła danych wielu firm.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-128">When a hierarchy is defined for an ER format, only records for legal entities that are presented in the assigned hierarchy are returned, even though the format calls cross-company data sources.</span></span> <span data-ttu-id="d9bd2-129">Jeśli dla formatu ER jest zdefiniowane odwołanie do hierarchii, która już nie istnieje, stosowany jest domyślny zakres, a format wywołuje źródła danych wielu firm.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-129">When a reference to a hierarchy that no longer exists is defined for an ER format, the default scope is applied, and the format calls cross-company data sources.</span></span> <span data-ttu-id="d9bd2-130">W tej sytuacji są zwracane rekordy wszystkich firm zdefiniowanych w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-130">In this situation, records for all application companies are returned.</span></span>

<span data-ttu-id="d9bd2-131">Należy zwrócić uwagę, że gdy opcja **Użyj wersji roboczej** jest włączona dla hierarchii organizacyjnej przypisanej do jednego formatu ER, firmy z wersji roboczej tej hierarchii będą używane do identyfikowania zakresu międzyfirmowych źródeł danych.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-131">Note that when the **Use draft** option is turned on for the assigned to a single ER format organization hierarchy, the legal entities from the draft version of this hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="d9bd2-132">Jeśli wersja robocza nie istnieje, zostaną użyte firmy z ostatnio opublikowanej wersji tej hierarchii organizacyjnej.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-132">If the draft version does not exist, the legal entities from the last published version of this organization hierarchy will be used for this.</span></span>

<span data-ttu-id="d9bd2-133">Należy zwrócić uwagę, że gdy opcja **Użyj wersji roboczej** jest wyłączona dla hierarchii organizacyjnej przypisanej do jednego formatu ER, firmy z ostatnio opublikowanej wersji tej hierarchii organizacyjnej będą używane do identyfikowania zakresu międzyfirmowych źródeł danych.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-133">Note that when the **Use draft** option is turned off for the assigned to a single ER format organization hierarchy, the legal entities from the last published version of this organization hierarchy will be used to identify the scope for cross-company data sources.</span></span> <span data-ttu-id="d9bd2-134">Funkcja dat obowiązywania hierarchii organizacyjnych nie jest jeszcze obsługiwane w strukturze raportowania elektronicznego.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-134">Date effectiveness of organization hierarchies is not supported yet in the ER framework.</span></span>

<span data-ttu-id="d9bd2-135">Hierarchię można przypisać do formatu na określonej stronie, na której można uzyskać dostęp z poziomu obszaru roboczego ER lub za pomocą elementu menu **Administrowanie organizacją \> Raportowanie elektroniczne \> Filtr firmy dla formatów**.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-135">The hierarchy can be assigned to a format in a specific page that can be accessed from the ER workspace or by using the **Organization administration \> Electronic reporting \> Legal entity filter for formats** menu item.</span></span> <span data-ttu-id="d9bd2-136">Aby uzyskać dostęp do strony, użytkownik musi mieć przyznane uprawnienie **Obsługa filtrów firmy dla formatu** (ERMaintainFormatMappingLegalEntityFilters).</span><span class="sxs-lookup"><span data-stu-id="d9bd2-136">To access the page, the **Maintain legal entity filters for format** privilege (ERMaintainFormatMappingLegalEntityFilters) must be granted to a user.</span></span> <span data-ttu-id="d9bd2-137">Ograniczenie zakresu wszystkich firm dla formatu opartych na hierarchii jest stosowane oprócz ograniczenia, które użytkownik może ręcznie określić w oknie dialogowym zapytania systemowego.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-137">The scope restriction of hierarchy-based legal entities for the format is applied in addition to the restriction that the user can manually specify in the system query dialog box.</span></span> <span data-ttu-id="d9bd2-138">Przecięcie tych ograniczeń jest używane po uruchomieniu formatu.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-138">The intersection of these restrictions is used when the format is run.</span></span>

<span data-ttu-id="d9bd2-139">Aby dowiedzieć się więcej o tej funkcji, należy odtworzyć przewodnik po zadaniach **Dostęp do danych ER tabel zależnych od firmy w trybie międzyfirmowym**, wchodzący w skład procesu biznesowego 7.5.4.3 Pobierania/opracowywanie składników usług/rozwiązań informatycznych (10677) i można go pobrać z [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span><span class="sxs-lookup"><span data-stu-id="d9bd2-139">To learn more about this feature, play the task guide, **ER Access records of company dependent tables in cross-company mode**, which is part of the 7.5.4.3 Acquire/Develop IT service/solution components (10677) business process, and can be downloaded from the [Microsoft Download Center](https://go.microsoft.com/fwlink/?linkid=874684).</span></span> <span data-ttu-id="d9bd2-140">Ten przewodnik zadania poprowadzi użytkownika przez proces konfigurowania mapowania modelu encja-relacja i formatu ER, aby uzyskać dostęp do tabel aplikacji w trybie międzyfirmowym.</span><span class="sxs-lookup"><span data-stu-id="d9bd2-140">This task guide walks you through the process of configuring an ER model mapping and ER format to access application tables in cross-company mode.</span></span>

<span data-ttu-id="d9bd2-141">Aby ukończyć przewodnik po zadaniach, należy pobrać następujące pliki:</span><span class="sxs-lookup"><span data-stu-id="d9bd2-141">Download the following files to complete the task guide:</span></span>

- [<span data-ttu-id="d9bd2-142">Konfiguracja modelu ER — CrossCompanyDataAccessModel.xml</span><span class="sxs-lookup"><span data-stu-id="d9bd2-142">ER model configuration - CrossCompanyDataAccessModel.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)
- [<span data-ttu-id="d9bd2-143">Konfiguracja formatu ER — CrossCompanyDataAccessFormat.xml</span><span class="sxs-lookup"><span data-stu-id="d9bd2-143">ER format configuration - CrossCompanyDataAccessFormat.xml</span></span>](https://go.microsoft.com/fwlink/?linkid=874111)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]