---
title: Projektant formuł w module Raportowanie elektroniczne (ER)
description: Ten temat zawiera ogólne informacje o używaniu projektanta formuł w module Raportowanie elektroniczne (ER).
author: NickSelin
manager: kfend
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: d96fe041fd0ffb292909c1e724068efebe0184b9
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/05/2020
ms.locfileid: "4682656"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="1ae3f-103">Projektant formuł w module Raportowanie elektroniczne (ER)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="1ae3f-104">W tym temacie wyjaśniono, jak używać projektanta formuł w raportowaniu elektronicznym (ER).</span><span class="sxs-lookup"><span data-stu-id="1ae3f-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="1ae3f-105">Podczas projektowania formatu dla określonego dokumentu elektronicznego w module raportowania elektronicznego można używać formuł w celu przekształcania danych, tak aby spełniały one wymagania dotyczące wypełniania i formatowania tego dokumentu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="1ae3f-106">Te formuły przypominają formuły w programie Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="1ae3f-107">W formułach obsługiwane są różne typy funkcji: tekstu, daty i godziny, matematyczne, logiczne, informacyjne i konwersji typów danych, a także funkcje specyficzne dla domeny biznesowej.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="1ae3f-108">Projektant formuł — omówienie</span><span class="sxs-lookup"><span data-stu-id="1ae3f-108">Formula designer overview</span></span>

<span data-ttu-id="1ae3f-109">Moduł ER obsługuje projektanta formuł.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-109">ER supports the formula designer.</span></span> <span data-ttu-id="1ae3f-110">Z tego względu w czasie projektowania można konfigurować wyrażenia, które mogą być używane do następujących zadań w czasie wykonywania:</span><span class="sxs-lookup"><span data-stu-id="1ae3f-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="1ae3f-111">Przekształć dane odebrane z bazy danych aplikacji, które należy wprowadzić w modelu danych ER zaprojektowanym jako źródło danych dla formatów ER.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="1ae3f-112">(Te przekształcenia mogą na przykład obejmować filtrowanie, grupowanie i konwersję typu danych).</span><span class="sxs-lookup"><span data-stu-id="1ae3f-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="1ae3f-113">Formatowanie danych, które muszą zostać wysłane do generowanego dokumentu elektronicznego zgodnie z układem i warunkami określonego formatu ER.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="1ae3f-114">(Formatowanie może się na przykład odbywać zgodnie z żądanym językiem, kulturą, kodowaniem itd.).</span><span class="sxs-lookup"><span data-stu-id="1ae3f-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="1ae3f-115">Kontrolowanie procesu tworzenia dokumentów elektronicznych.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="1ae3f-116">(Wyrażenia mogą na przykład włączać lub wyłączać tworzenie określonych elementów formatu w zależności od przetwarzania danych.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="1ae3f-117">Mogą również przerywać proces tworzenia dokumentu lub wysyłać komunikaty do użytkowników).</span><span class="sxs-lookup"><span data-stu-id="1ae3f-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="1ae3f-118">Stronę **Projektant formuł** można otworzyć podczas wykonywania następujących czynności:</span><span class="sxs-lookup"><span data-stu-id="1ae3f-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="1ae3f-119">Wiązanie elementów źródła danych ze składnikami modelu danych.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="1ae3f-120">Wiązanie elementów źródła danych ze składnikami formatu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="1ae3f-121">Obsługa pól obliczeniowych w ramach źródeł danych.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="1ae3f-122">Definiowanie warunków widoczności dla parametrów wejściowych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="1ae3f-123">Projektowanie przekształceń formatu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-123">Design a format's transformations.</span></span>
- <span data-ttu-id="1ae3f-124">Definiowanie warunków włączania składników formatu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="1ae3f-125">Definiowanie nazw plików dla plikowych składników formatu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="1ae3f-126">Definiowanie warunków weryfikacji kontroli procesu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="1ae3f-127">Definiowanie treści komunikatów weryfikacji kontroli procesu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="1ae3f-128">Wiązanie danych</span><span class="sxs-lookup"><span data-stu-id="1ae3f-128">Data binding</span></span>

<span data-ttu-id="1ae3f-129">Projektant formuł raportowania elektronicznego może służyć do definiowania wyrażenia przekształcającego dane otrzymywane ze źródeł danych, dzięki czemu dane mogą być wprowadzane do użytkownika danych na następujące sposoby w czasie wykonywania:</span><span class="sxs-lookup"><span data-stu-id="1ae3f-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="1ae3f-130">Ze źródeł danych aplikacji i parametrów czasu wykonywania na model danych ER</span><span class="sxs-lookup"><span data-stu-id="1ae3f-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="1ae3f-131">Z modelu danych ER na format ER</span><span class="sxs-lookup"><span data-stu-id="1ae3f-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="1ae3f-132">Ze źródeł danych aplikacji i parametrów czasu wykonywania na format ER</span><span class="sxs-lookup"><span data-stu-id="1ae3f-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="1ae3f-133">Poniższa ilustracja pokazuje projekt wyrażenia tego typu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="1ae3f-134">W tym przykładzie wyrażenie zaokrągla wartość pola **Intrastat.AmountMST** w tabeli Intrastat do dwóch miejsc dziesiętnych, a następnie zwraca zaokrągloną wartość.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="1ae3f-135">[![Wyrażenie wiązania danych](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="1ae3f-136">Poniższa ilustracja pokazuje sposób użycia wyrażenia tego typu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="1ae3f-137">W tym przykładzie wynik zaprojektowanego wyrażenia jest wprowadzany w składniku **Transaction.InvoicedAmount** modelu danych **Model raportowania podatku**.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="1ae3f-138">[![Używanie wyrażenia wiązania danych](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="1ae3f-139">W czasie wykonywania zaprojektowana formuła `ROUND (Intrastat.AmountMST, 2)` zaokrągla wartość pola **AmountMST** dla każdego rekordu w tabeli Intrastat do dwóch miejsc dziesiętnych.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="1ae3f-140">Następnie wprowadza zaokrągloną wartość w składniku **Transaction.InvoicedAmount** modelu danych **Raportowanie podatku**.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="1ae3f-141">Formatowanie danych</span><span class="sxs-lookup"><span data-stu-id="1ae3f-141">Data formatting</span></span>

<span data-ttu-id="1ae3f-142">Projektant formuł ER może służyć do definiowania wyrażenia formatującego dane otrzymywane ze źródeł danych, dzięki czemu dane mogą być wysyłane w ramach generowania dokumentu elektronicznego.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="1ae3f-143">Być może istnieje formatowanie, które musi być stosowane jako typowa reguła powtarzana dla formatu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="1ae3f-144">W takim przypadku można wprowadzić to formatowanie jeden raz do konfiguracji formatu jako nazwane przekształcenie zawierające wyrażenie formatujące.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="1ae3f-145">Później to nazwane przekształcenie można połączyć z wieloma składnikami formatu, których dane wyjściowe muszą być sformatowane zgodnie z utworzonym wyrażeniem formatującym.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="1ae3f-146">Poniższa ilustracja pokazuje projekt przekształcenia tego typu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="1ae3f-147">W tym przykładzie przekształcenie **TrimmedString** obcina przychodzące dane o typie danych *Ciąg*, usuwając spacje początkowe i końcowe.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="1ae3f-148">Następnie zwraca obciętą wartość ciągu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="1ae3f-149">[![Przekształcenie](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="1ae3f-150">Poniższa ilustracja pokazuje sposób użycia przekształcenia tego typu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="1ae3f-151">W tym przykładzie kilka składników formatu wysyła tekst jako dane wyjściowe do generowania dokumentu elektronicznego w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="1ae3f-152">Wszystkie te składniki formatu odwołują się do przekształcenia **TrimmedString** według nazwy.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="1ae3f-153">[![Używanie przekształcenia](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="1ae3f-154">Jeśli składniki formatu, takie jak **partyName** na poprzedniej ilustracji, odwołują się do przekształcenia **TrimmedString**, przekształcenie wysyła tekst jako dane wyjściowe do generowanego dokumentu elektronicznego.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="1ae3f-155">Tekst nie zawiera spacji wiodących ani końcowych.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="1ae3f-156">Jeśli jest używane formatowanie, które musi być stosowane indywidualnie, można je wprowadzić jako indywidualne wyrażenie wiązania konkretnego składnika formatu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="1ae3f-157">Poniższa ilustracja pokazuje wyrażenie tego typu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="1ae3f-158">W tym przykładzie składnik formatu **partyType** jest powiązany ze źródłem danych poprzez wyrażenie, które konwertuje dane przychodzące z pola **Model.Company.RegistrationType** w źródle danych na tekst pisany wielkimi literami.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="1ae3f-159">Następnie wyrażenie wysyła ten tekst jako dane wyjściowe do dokumentu elektronicznego.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="1ae3f-160">[![Stosowanie formatowania do jednego składnika](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="1ae3f-161">Kontrola przepływu procesu</span><span class="sxs-lookup"><span data-stu-id="1ae3f-161">Process flow control</span></span>

<span data-ttu-id="1ae3f-162">Projektant formuł ER może służyć do definiowania wyrażeń, które kontrolują przebieg procesu generowania dokumentów elektronicznych.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="1ae3f-163">Można wykonać następujące zadania:</span><span class="sxs-lookup"><span data-stu-id="1ae3f-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="1ae3f-164">Zdefiniowanie warunków określających, kiedy proces tworzenia dokumentu musi zostać zatrzymany.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="1ae3f-165">Określenie wyrażeń, które będą tworzyły komunikaty do użytkownika o zatrzymanych procesach lub wyświetlały komunikaty z dziennika wykonywania o kontynuacji procesu generowania raportu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="1ae3f-166">Określanie nazw plików generowanych dokumentów elektronicznych i kontrolowanie warunków ich tworzenia.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="1ae3f-167">Każda reguła kontroli przepływu procesu została zaprojektowana jako indywidualny proces sprawdzania poprawności.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="1ae3f-168">Poniższa ilustracja pokazuje weryfikację tego typu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="1ae3f-169">Poniżej znajduje się objaśnienie konfiguracji użytej w tym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="1ae3f-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="1ae3f-170">Sprawdzanie poprawności jest dokonywane po utworzeniu węzła **INSTAT** podczas generowania pliku XML.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="1ae3f-171">Jeśli lista transakcji jest pusta, mechanizm weryfikacji zatrzymuje proces wykonywania i zwraca wartość **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="1ae3f-172">Funkcja weryfikacji zwraca komunikat o błędzie zawierający treść etykiety SYS70894 w języku preferowanym przez użytkownika.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="1ae3f-173">[![Weryfikacja](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="1ae3f-174">Projektant formuł ER pozwala również ustawić nazwę pliku generowanego dokumentu elektronicznego i kontrolować proces tworzenia pliku.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="1ae3f-175">Poniższa ilustracja pokazuje projekt tego typu kontroli przebiegu procesu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="1ae3f-176">Poniżej znajduje się objaśnienie konfiguracji użytej w tym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="1ae3f-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="1ae3f-177">Lista rekordów ze źródła danych **modelu. Intrastat** jest podzielona na partie.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="1ae3f-178">Każda partia zawiera maksymalnie 1000 rekordów.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="1ae3f-179">Dane wyjściowe mają postać pliku zip zawierającego jeden plik w formacie XML dla każdej utworzonej partii.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="1ae3f-180">Wyrażenie zwraca nazwę pliku dla generowania dokumentów elektronicznych, łącząc nazwę pliku i rozszerzenie nazwy pliku.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="1ae3f-181">Dla partii drugiej i wszystkich kolejnych nazwa pliku zawiera identyfikator partii jako sufiks.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="1ae3f-182">Wyrażenie umożliwia (poprzez zwrócenie wartości **TRUE**) proces tworzenia plików dla partii zawierających co najmniej jeden rekord.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="1ae3f-183">[![Kontrola przepływu procesu](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="1ae3f-184">Kontrola zawartości dokumentu</span><span class="sxs-lookup"><span data-stu-id="1ae3f-184">Document content control</span></span>

<span data-ttu-id="1ae3f-185">Projektanta formuł ER można używać do konfigurowania wyrażeń kontrolujących, jakie dane będą umieszczane w wygenerowanych elektronicznych dokumentach w czasie wykonywania.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="1ae3f-186">Wyrażenia mogą na przykład włączać lub wyłączać tworzenie określonych elementów formatu w zależności od przetwarzania danych.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="1ae3f-187">Te wyrażenia można wprowadzić dla pojedynczego elementu formatu w polu **Włączone** na karcie **Mapowanie** na stronie **projektanta operacji**.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="1ae3f-188">Wyrażenia można wprowadzać jako warunek logiczny, który zwraca *wartość logiczną*:</span><span class="sxs-lookup"><span data-stu-id="1ae3f-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="1ae3f-189">Jeśli warunek zwraca wartość **True**, bieżący element formatu jest uruchamiany.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="1ae3f-190">Jeśli warunek zwraca wartość **False**, bieżący element formatu jest pomijany.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="1ae3f-191">Poniższa ilustracja pokazuje wyrażenia tego typu.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="1ae3f-192">(Wersja 11.12.11 formatu konfiguracji **polecenia przelewu ISO20022 (NO)** dostarczonego przez Microsoft jest używana jako przykład). Składnik formatu **XMLHeader** jest skonfigurowany do opisywania struktury komunikatu dotyczącego polecenia przelewu zgodnie ze standardami ISO 20022 dotyczącymi komunikatów XML.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="1ae3f-193">Składnik formatu **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** jest skonfigurowany do dodania do elementu XML **Ustrd** do wygenerowanego komunikatu i umieszczenia informacji o przekazie w formacie bez struktury jako tekstu następujących elementów XML:</span><span class="sxs-lookup"><span data-stu-id="1ae3f-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="1ae3f-194">Składnik **PaymentNotes** jest używany do generowania tekstu uwag do płatności.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="1ae3f-195">Składnik **DelimitedSequence** umożliwia generowanie faktur rozdzielanych przecinkami, które służą do rozliczenia bieżącego przelewu kredytowego.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="1ae3f-196">[![Składniki PaymentNotes i DelimitedSequence](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="1ae3f-197">Składniki **PaymentNotes** i **DelimitedSequence** są oznaczane przy użyciu znaku zapytania.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="1ae3f-198">Znak zapytania wskazuje, że użycie składnika jest warunkowe.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="1ae3f-199">W takim przypadku użycie składników opiera się na następujących kryteriach:</span><span class="sxs-lookup"><span data-stu-id="1ae3f-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="1ae3f-200">Wyrażenie `@.PaymentsNotes <> ""` zdefiniowane dla składnika **PaymentNotes** włącza (zwracając wartość **TRUE**) wypełnianie elementu XML **Ustrd** przy użyci uwag dotyczących płatności, jeśli ten tekst dla polecenia przelewu nie jest pusty.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="1ae3f-201">[![Wyrażenie dla składnika PaymentNotes](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="1ae3f-202">Wyrażenie `@.PaymentsNotes = ""` zdefiniowane dla składnika **DelimitedSequence** włącza (zwracając wartość **TRUE**) wypełnianie elementu XML **Ustrd** przy użyciu oddzielanej przecinkami listy numerów faktur używanej do rozliczania bieżącego polecenia przelewu, gdy tekst uwag dotyczących płatności dla tego polecenia przelewu jest pusty.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="1ae3f-203">[![Wyrażenie dla składnika DelimitedSequence](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="1ae3f-204">Na podstawie tej konfiguracji wygenerowana wiadomość dla każdej płatności dłużnika, element XML **Ustrd**, będzie zawierać tekst uwag do płatności lub, jeśli taki tekst jest pusty, rozdzielaną przecinkami listę numerów faktur używanych do rozliczenia płatności.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="1ae3f-205">Weryfikacja skonfigurowanych formuł</span><span class="sxs-lookup"><span data-stu-id="1ae3f-205">Validation of configured formulas</span></span>

<span data-ttu-id="1ae3f-206">Na stronie **Projektant formuł** wybierz pozycję **Testuj**, aby sprawdzić, jak działa skonfigurowana formuła.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="1ae3f-207">[![Wybieranie testu w celu zweryfikowania formuły](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="1ae3f-208">Gdy wymagane są wartości argumentów formuły, można otworzyć okno dialogowe **Wyrażenie testowe** na stronie **Projektant formuł**.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="1ae3f-209">W większości przypadków te argumenty muszą być definiowane ręcznie, ponieważ skonfigurowane powiązania nie są uruchamiane w czasie projektowania.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="1ae3f-210">Na karcie **Wynik testu** na stronie **Projektant formuł** jest wyświetlany wynik z wykonania skonfigurowanej formuły.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="1ae3f-211">W poniższym przykładzie pokazano, jak można przetestować formułę skonfigurowaną dla domeny handlu zagranicznego, aby upewnić się, że kod asortymentu Intrastat zawiera tylko cyfry.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="1ae3f-212">Podczas testowania tej formuły można użyć okna dialogowego **Wyrażenie testowe**, aby określić wartość kodu asortymentu Intrastat do testowania.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="1ae3f-213">[![Określanie kodu asortymentu Intrastat do testowania](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="1ae3f-214">Po określeniu kodu asortymentu Intrastat i wybraniu przycisku **OK** na karcie **Wynik testu** na stronie **Projektant formuł** jest wyświetlany wynik wykonania skonfigurowanej formuły.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="1ae3f-215">Następnie możesz ocenić, czy wynik jest dopuszczalny.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="1ae3f-216">Jeśli wynik nie jest dopuszczalny, możesz zaktualizować formułę i przetestować ją ponownie.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="1ae3f-217">[![Wynik testu](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="1ae3f-218">Niektóre formuły nie mogą być testowane w czasie projektowania.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="1ae3f-219">Na przykład formuła może zwracać wynik typu danych, który nie może być wyświetlany na karcie **Wynik testu**. W takim przypadku zostanie wyświetlony komunikat o błędzie informujący, że nie można przetestować formuły.</span><span class="sxs-lookup"><span data-stu-id="1ae3f-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="1ae3f-220">[![Komunikat o błędzie](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="1ae3f-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="1ae3f-221">Dodatkowe zasoby</span><span class="sxs-lookup"><span data-stu-id="1ae3f-221">Additional resources</span></span>

- [<span data-ttu-id="1ae3f-222">Raportowanie elektroniczne — omówienie</span><span class="sxs-lookup"><span data-stu-id="1ae3f-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="1ae3f-223">Język formuł raportowania elektronicznego</span><span class="sxs-lookup"><span data-stu-id="1ae3f-223">Electronic reporting formula language</span></span>](er-formula-language.md)
