---
title: Pojęcie firmy w usługach Dataverse
description: W tym temacie opisano integrację danych firmy między Finance and Operations i Dataverse.
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 2f0e3950f2b35dd8b8dbf50601b7d6b6d624863e
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 12/05/2020
ms.locfileid: "4683682"
---
# <a name="company-concept-in-dataverse"></a><span data-ttu-id="56ecb-103">Pojęcie firmy w usługach Dataverse</span><span class="sxs-lookup"><span data-stu-id="56ecb-103">Company concept in Dataverse</span></span>

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]


<span data-ttu-id="56ecb-104">W Finance and Operations koncepcja *firmy* jest zarówno konstrukcją prawną, jak i konstrukcją biznesową.</span><span class="sxs-lookup"><span data-stu-id="56ecb-104">In Finance and Operations, the concept of a *company* is both a legal construct and a business construct.</span></span> <span data-ttu-id="56ecb-105">Jest to również granicą bezpieczeństwa i widoczności danych.</span><span class="sxs-lookup"><span data-stu-id="56ecb-105">It's also a security and visibility boundary for data.</span></span> <span data-ttu-id="56ecb-106">Użytkownicy zawsze pracują w kontekście pojedynczej firmy, a większość danych jest rozłożona według firmy.</span><span class="sxs-lookup"><span data-stu-id="56ecb-106">Users always work in the context of a single company, and most of the data is striped by company.</span></span>

<span data-ttu-id="56ecb-107">Dataverse nie ma równoważnej koncepcji.</span><span class="sxs-lookup"><span data-stu-id="56ecb-107">Dataverse doesn't have an equivalent concept.</span></span> <span data-ttu-id="56ecb-108">Najbliższa koncepcja jest *jednostką biznesową*, która jest przede wszystkim granicą bezpieczeństwa i widoczności danych użytkownika.</span><span class="sxs-lookup"><span data-stu-id="56ecb-108">The closest concept is *business unit*, which is primarily a security and visibility boundary for user data.</span></span> <span data-ttu-id="56ecb-109">Koncepcja ta nie ma takich samych konsekwencji prawnych lub biznesowych, co koncepcja firmy.</span><span class="sxs-lookup"><span data-stu-id="56ecb-109">This concept doesn't have the same legal or business implications as the company concept.</span></span>

<span data-ttu-id="56ecb-110">Ponieważ jednostka biznesowa i firma nie są równoważnymi pojęciami, nie można wymusić mapowania 1:1 między nimi co celu integracji Dataverse.</span><span class="sxs-lookup"><span data-stu-id="56ecb-110">Because business unit and company aren't equivalent concepts, it isn't possible to force a one-to-one (1:1) mapping between them for the purpose of Dataverse integration.</span></span> <span data-ttu-id="56ecb-111">Jednak ponieważ użytkownicy muszą domyślnie być w stanie widzieć te same wiersze w aplikacji i Dataverse, firma Microsoft wprowadziła nową jednostkę w Dataverse o nazwie cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="56ecb-111">However, because users must, by default, be able to see the same rows in the application and Dataverse, Microsoft has introduced a new entity in Dataverse that is named cdm\_Company.</span></span> <span data-ttu-id="56ecb-112">Ta jednostka jest odpowiednikiem podmiotu firmy w aplikacji.</span><span class="sxs-lookup"><span data-stu-id="56ecb-112">This entity is equivalent to the Company entity in the application.</span></span> <span data-ttu-id="56ecb-113">Aby zagwarantować, że widoczność wierszy jest równoważna między aplikacją i Dataverse od razu po zainstalowaniu, zaleca się następujące ustawienia dla danych Dataverse:</span><span class="sxs-lookup"><span data-stu-id="56ecb-113">To help guarantee that visibility of rows is equivalent between the application and Dataverse out of the box, we recommend the following setup for data in Dataverse:</span></span>

+ <span data-ttu-id="56ecb-114">Dla każdego wiersza firmy w Finance and Operations, który jest włączony dla podwójnego zapisu tworzony jest skojarzony wiersz cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="56ecb-114">For each Finance and Operations Company row that is enabled for dual-write, an associated cdm\_Company row is created.</span></span>
+ <span data-ttu-id="56ecb-115">Gdy wiersz cdm\_Company jest tworzony i włączony dla podwójnego zapisu, tworzona jest domyślna jednostka biznesowa o tej samej nazwie.</span><span class="sxs-lookup"><span data-stu-id="56ecb-115">When a cdm\_Company row is created and enabled for dual-write, a default business unit is created that has the same name.</span></span> <span data-ttu-id="56ecb-116">Mimo że domyślny zespół jest tworzony automatycznie dla tej jednostki biznesowej, jednostka biznesowa nie jest używana.</span><span class="sxs-lookup"><span data-stu-id="56ecb-116">Although a default team is automatically created for that business unit, the business unit isn't used.</span></span>
+ <span data-ttu-id="56ecb-117">Tworzony jest oddzielny zespół właściciela o takiej samej nazwie.</span><span class="sxs-lookup"><span data-stu-id="56ecb-117">A separate owner team is created that has the same name.</span></span> <span data-ttu-id="56ecb-118">Jest również związany z jednostką biznesową.</span><span class="sxs-lookup"><span data-stu-id="56ecb-118">It's also associated with the business unit.</span></span>
+ <span data-ttu-id="56ecb-119">Domyślnie właścicielem dowolnego wiersza utworzonego i zapisywanym podwójnie w Dataverse jest zestaw do zespołu „DW Owner” połączony ze skojarzoną jednostką biznesową.</span><span class="sxs-lookup"><span data-stu-id="56ecb-119">By default, the owner of any row that is created and dual-written to Dataverse is set to the "DW Owner" team that is linked to the associated business unit.</span></span>

<span data-ttu-id="56ecb-120">Ilustracja poniżej zawiera przykład tej konfiguracji danych w Dataverse.</span><span class="sxs-lookup"><span data-stu-id="56ecb-120">The following illustration shows an example of this data setup in Dataverse.</span></span>

![Konfiguracja danych w Dataverse](media/dual-write-company-1.png)

<span data-ttu-id="56ecb-122">Z powodu tej konfiguracji każdy wiersz związany firmą USMF będą własnością zespołu połączonego z jednostką biznesową USMF w Dataverse.</span><span class="sxs-lookup"><span data-stu-id="56ecb-122">Because of this configuration, any row that is related to the USMF company will be owned by a team that is linked to the USMF business unit in Dataverse.</span></span> <span data-ttu-id="56ecb-123">W związku z tym każdy użytkownik, który ma dostęp do tej jednostki biznesowej za pośrednictwem roli zabezpieczeń, która jest ustawiona na poziomie widoczności jednostki biznesowej, może teraz widzieć te wiersze.</span><span class="sxs-lookup"><span data-stu-id="56ecb-123">Therefore, any user who has access to that business unit through a security role that is set to business unit–level visibility can now see those rows.</span></span> <span data-ttu-id="56ecb-124">W poniższym przykładzie pokazano, jak zespoły mogą służyć do zapewnienia prawidłowego dostępu do tych wierszy.</span><span class="sxs-lookup"><span data-stu-id="56ecb-124">The following example shows how teams can be used to provide the correct access to those rows.</span></span>

+ <span data-ttu-id="56ecb-125">Rola „Menedżer sprzedaży” jest przypisana do członków zespołu „USMF Sales”.</span><span class="sxs-lookup"><span data-stu-id="56ecb-125">The "Sales Manager" role is assigned to members of the "USMF Sales" team.</span></span>
+ <span data-ttu-id="56ecb-126">Użytkownicy z rolą „Menedżer sprzedaży” mają dostęp do wszystkich wierszy konta należących do tej samej jednostki biznesowej, do której należą ci użytkownicy.</span><span class="sxs-lookup"><span data-stu-id="56ecb-126">Users who have the "Sales Manager" role can access any account rows that are members of the same business unit that they are members of.</span></span>
+ <span data-ttu-id="56ecb-127">Zespół „USMF Sales” jest powiązany z jednostką biznesową USMF, o której wspomniano wcześniej.</span><span class="sxs-lookup"><span data-stu-id="56ecb-127">The "USMF Sales" team is linked to the USMF business unit that was mentioned earlier.</span></span>
+ <span data-ttu-id="56ecb-128">W związku z tym członkowie zespołu „USMF Sales” mogą zobaczyć dowolne konto, które jest własnością użytkownika „USMF DW”, i które pochodzi z jednostki Firma USMF w Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="56ecb-128">Therefore, members of the "USMF Sales" team can see any account that is owned by the "USMF DW" user, which would have come from the USMF Company entity in Finance and Operations.</span></span>

![Jak mogą być używane zespoły](media/dual-write-company-2.png)

<span data-ttu-id="56ecb-130">Jak pokazano na powyższej ilustracji, to mapowanie 1:1 między jednostką biznesową, firmą i zespołem jest tylko punktem początkowym.</span><span class="sxs-lookup"><span data-stu-id="56ecb-130">As the preceding illustration shows, this 1:1 mapping between business unit, company, and team is just a starting point.</span></span> <span data-ttu-id="56ecb-131">W tym przykładzie nowa jednostka biznesowa „Europa” jest tworzona ręcznie w Dataverse jako element nadrzędny zarówno dla DEMF, jak i ESMF.</span><span class="sxs-lookup"><span data-stu-id="56ecb-131">In this example, a new "Europe" business unit is manually created in Dataverse as the parent for both DEMF and ESMF.</span></span> <span data-ttu-id="56ecb-132">Ta nowa główna jednostka biznesowa nie ma związku z podwójnym zapisem.</span><span class="sxs-lookup"><span data-stu-id="56ecb-132">This new root business unit is unrelated to dual-write.</span></span> <span data-ttu-id="56ecb-133">Jednak może służyć do zapewnienia członkom zespołu „EUR Sales” dostępu do danych konta zarówno w DEMF, jak i ESMF, ustawiając widoczność danych na **Nadrzędna/Podrzędna jednostka biznesowa** w skojarzonej roli zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="56ecb-133">However, it can be used to give members of the "EUR Sales" team access to account data in both DEMF and ESMF by setting the data visibility to **Parent/Child BU** in the associated security role.</span></span>

<span data-ttu-id="56ecb-134">Ostatnim tematem do omówienia jest to, w jaki sposób podwójny zapis określa zespół właściciela, do którego ma przypisać wiersze.</span><span class="sxs-lookup"><span data-stu-id="56ecb-134">A final topic to discuss is how dual-write determines which owner team it should assign rows to.</span></span> <span data-ttu-id="56ecb-135">To zachowanie jest kontrolowane przez pole **Domyślny zespół właściciela** w wierszu cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="56ecb-135">This behavior is controlled by the **Default owning team** field on the cdm\_Company row.</span></span> <span data-ttu-id="56ecb-136">Kiedy w wierszu cdm\_Company jest włączony podwójny zapis, wtyczka automatycznie tworzy skojarzoną jednostkę biznesową i zespół właściciela (jeśli jeszcze nie istnieje) i ustawia pole **Domyślny zespół właściciela**.</span><span class="sxs-lookup"><span data-stu-id="56ecb-136">When a cdm\_Company row is enabled for dual-write, a plug-in automatically creates the associated business unit and owner team (if it doesn't already exist), and sets the **Default owning team** field.</span></span> <span data-ttu-id="56ecb-137">Administrator może zmienić wartość tego pola na inną.</span><span class="sxs-lookup"><span data-stu-id="56ecb-137">The admin can change this field to a different value.</span></span> <span data-ttu-id="56ecb-138">Jednak administrator nie może wyczyścić pola, dopóki w jednostce jest włączony podwójny zapis.</span><span class="sxs-lookup"><span data-stu-id="56ecb-138">However, the admin can't clear the field as long as the entity is enabled for dual-write.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="56ecb-139">![Domyślne pole zespołu będącego właścicielem](media/dual-write-default-owning-team.jpg)</span><span class="sxs-lookup"><span data-stu-id="56ecb-139">![Default owning team field](media/dual-write-default-owning-team.jpg)</span></span>

## <a name="company-striping-and-bootstrapping"></a><span data-ttu-id="56ecb-140">Powielanie danych i inicjowanie firmy</span><span class="sxs-lookup"><span data-stu-id="56ecb-140">Company striping and bootstrapping</span></span>

<span data-ttu-id="56ecb-141">Integracja Dataverse powoduje wywołuje parzystość firmy za pomocą identyfikatora firmy w celu powielenia danych.</span><span class="sxs-lookup"><span data-stu-id="56ecb-141">Dataverse integration brings company parity by using a company identifier to stripe data.</span></span> <span data-ttu-id="56ecb-142">Na poniższej ilustracji pokazano, że wszystkie tabele właściwe dla firmy są rozszerzane w taki sposób, że mają relacje wiele do jednego (N:1) z jednostką cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="56ecb-142">As the following illustration shows, all company-specific tables are extended so that they have a many-to-one (N:1) relationship with the cdm\_Company entity.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="56ecb-143">![Relacja N:1 między jednostką specyficzną dla firmy a jednostką cdm_Company](media/dual-write-bootstrapping.png)</span><span class="sxs-lookup"><span data-stu-id="56ecb-143">![N:1 relationship between a company-specific entity and the cdm_Company entity](media/dual-write-bootstrapping.png)</span></span>

+ <span data-ttu-id="56ecb-144">W przypadku wierszy po dodaniu i zapisaniu firmy jest ona tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="56ecb-144">For rows, after a company is added and saved, the value becomes read-only.</span></span> <span data-ttu-id="56ecb-145">Dlatego użytkownicy powinni upewnić się, że została wybrana prawidłowa firma.</span><span class="sxs-lookup"><span data-stu-id="56ecb-145">Therefore, users should make sure that they select the correct company.</span></span>
+ <span data-ttu-id="56ecb-146">Tylko wiersze, które mają dane firmy, są uprawnione do podwójnego zapisywania między aplikacją a Dataverse.</span><span class="sxs-lookup"><span data-stu-id="56ecb-146">Only rows that have company data are eligible for dual-write between the application and Dataverse.</span></span>
+ <span data-ttu-id="56ecb-147">W przypadku istniejących danych Dataverse inicjowanie prowadzone przez administratora będzie wkrótce dostępne.</span><span class="sxs-lookup"><span data-stu-id="56ecb-147">For existing Dataverse data, an admin-led bootstrapping experience will soon be available.</span></span>


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a><span data-ttu-id="56ecb-148">Autowypełniaj nazwę firmy w aplikacjach do zakontraktowania odbiorcy</span><span class="sxs-lookup"><span data-stu-id="56ecb-148">Autopopulate company name in customer engagement apps</span></span>

<span data-ttu-id="56ecb-149">Istnieje kilka sposobów automatycznego wypełniania nazwy firmy w aplikacjach do zakontraktowania odbiorców.</span><span class="sxs-lookup"><span data-stu-id="56ecb-149">There are several ways to auto-populate the company name in customer engagement apps.</span></span>

+ <span data-ttu-id="56ecb-150">Administrator systemu może określić domyślnie ustawioną firmę, przechodząc kolejno do sekcji **Ustawienia zaawansowane > System > Zabezpieczenia > Użytkownicy**.</span><span class="sxs-lookup"><span data-stu-id="56ecb-150">If you are a system administrator, you can set the default company by navigating to **Advanced Settings > System > Security > Users**.</span></span> <span data-ttu-id="56ecb-151">Otwórz formularz **Użytkownik**, a następnie w sekcji **Informacje o organizacji** określ wartość **Domyślna firma w formularzach**.</span><span class="sxs-lookup"><span data-stu-id="56ecb-151">Open the **User** form, and in the **Organization Information** section, set the **Company to default on Forms** value.</span></span>

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="Ustawienie firmy jako domyślnej w sekcji Informacje o organizacji.":::

+ <span data-ttu-id="56ecb-153">Jeśli użytkownik ma dostęp do **Zapisu** w encji **SystemUser** na poziomie **Jednostki biznesowej**, może zmienić domyślną firmę w dowolnym formularzu, wybierając firmę z rozwijanego menu **Firma**.</span><span class="sxs-lookup"><span data-stu-id="56ecb-153">If you have **Write** access to the **SystemUser** entity for the **Business Unit** level, then you can change the default company on any form by selecting a company from the **Company** drop-down menu.</span></span>

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="Zmiana nazwy firmy na nowym koncie":::

+ <span data-ttu-id="56ecb-155">Jeśli masz dostęp do **Zapisu** danych w więcej niż jednej firmie, możesz zmienić domyślną firmę, wybierając wiersz należący do innej firmy.</span><span class="sxs-lookup"><span data-stu-id="56ecb-155">If you have **Write** access to data in more than one company, then you can change the default company by choosing a row that belongs to different company.</span></span>

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="Wybór wiersza powoduje zmianę firmy domyślnej":::

+ <span data-ttu-id="56ecb-157">Jeśli użytkownik jest konfiguratorem systemów lub administratorem i chce automatycznie wypełniać dane firmy w formularzu niestandardowym, może używać [zdarzeń formularzy](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span><span class="sxs-lookup"><span data-stu-id="56ecb-157">If you are a system configurator or administrator, and you want to auto-populate company data on a custom form, then you can use [form events](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span></span> <span data-ttu-id="56ecb-158">Dodaj odwołanie JavaScript do **msdyn_/DefaultCompany.js** i korzystaj z następujących zdarzeń.</span><span class="sxs-lookup"><span data-stu-id="56ecb-158">Add a JavaScript reference to **msdyn_/DefaultCompany.js** and use the following events.</span></span> <span data-ttu-id="56ecb-159">Można skorzystać z dowolnego formularza, na przykład formularza **Konto**.</span><span class="sxs-lookup"><span data-stu-id="56ecb-159">You can use any out-of-the-box form, for example, the **Account** form.</span></span>

    + <span data-ttu-id="56ecb-160">Zdarzenie **OnLoad** dla formularza: należy określić pole **defaultCompany**.</span><span class="sxs-lookup"><span data-stu-id="56ecb-160">**OnLoad** event for the form: Set the **defaultCompany** field.</span></span>
    + <span data-ttu-id="56ecb-161">Zdarzenie **OnChange** dla pola **Firma**: należy określić pole **updateDefaultCompany**.</span><span class="sxs-lookup"><span data-stu-id="56ecb-161">**OnChange** event for the **Company** field: Set the **updateDefaultCompany** field.</span></span>

## <a name="apply-filtering-based-on-the-company-context"></a><span data-ttu-id="56ecb-162">Zastosuj filtrowanie na podstawie kontekstu firmy</span><span class="sxs-lookup"><span data-stu-id="56ecb-162">Apply filtering based on the company context</span></span>

<span data-ttu-id="56ecb-163">Aby zastosować filtrowanie na podstawie kontekstu firmy w formularzach niestandardowych lub w niestandardowych polach wyszukiwania dodanych do standardowych formularzy, należy otworzyć formularz i użyć sekcji **Filtrowanie rekordów pokrewnych** w celu zastosowania filtru firmy.</span><span class="sxs-lookup"><span data-stu-id="56ecb-163">To apply filtering based on the company context on your custom forms or on custom lookup fields added to the standard forms, open the form and use the **Related Records Filtering** section to apply the company filter.</span></span> <span data-ttu-id="56ecb-164">Należy to ustawić dla każdego pola wyszukiwania, które wymaga filtrowania na podstawie firmy w danym wierszu.</span><span class="sxs-lookup"><span data-stu-id="56ecb-164">You must set this for each lookup field that requires filtering based on the underlying company on a given row.</span></span> <span data-ttu-id="56ecb-165">Ustawienie jest wyświetlane dla **Konta** na poniższej ilustracji.</span><span class="sxs-lookup"><span data-stu-id="56ecb-165">The setting is shown for **Account** in the following illustration.</span></span>

:::image type="content" source="media/apply-company-context.png" alt-text="Zastosuj kontekst firmy":::

