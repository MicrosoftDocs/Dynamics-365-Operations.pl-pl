---
title: Utwórz konto magazynu Azure i Magazyn kluczy
description: W tym temacie opisano sposób tworzenia konta magazynu Azure i magazynu kluczy.
author: gionoder
manager: AnnBe
ms.date: 09/22/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.custom: 97423
ms.assetid: ''
ms.search.region: Global
ms.author: janeaug
ms.search.validFrom: 2020-07-08
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: 5a883011bbff6d82504497d739c07f1ada9e5f69
ms.sourcegitcommit: f860ac2b18f6bbbfc4a46b497baec2477105b116
ms.translationtype: HT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/19/2020
ms.locfileid: "4446976"
---
# <a name="create-an-azure-storage-account-and-a-key-vault"></a><span data-ttu-id="3c4c4-103">Utwórz konto magazynu Azure i Magazyn kluczy</span><span class="sxs-lookup"><span data-stu-id="3c4c4-103">Create an Azure storage account and a key vault</span></span>

[!include [banner](../includes/banner.md)]



<span data-ttu-id="3c4c4-104">Usługa dodatku Faktur elektronicznych ma obowiązek przechowywać wszystkie dane biznesowe w zasobach Microsoft Azure będących własnością firmy użytkownika.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-104">The Electronic invoicing add-on service takes responsibility for storing all your business data in the Microsoft Azure resources that are owned by your company.</span></span> <span data-ttu-id="3c4c4-105">Aby upewnić się, że usługa działa poprawnie i że wszystkie dane biznesowe, które są potrzebne i generowane przez dodatek Faktury elektroniczne, są dostępne tylko dla tego dodatku, musisz utworzyć dwa główne zasoby platformy Azure:</span><span class="sxs-lookup"><span data-stu-id="3c4c4-105">To ensure that the service works correctly, and that all the business data that is needed for and generated by the Electronic invoicing add-on is accessed only by the add-on, you must create two main Azure resources:</span></span>

- <span data-ttu-id="3c4c4-106">Konto magazynu systemu Azure (magazyn obiektów BLOB) do przechowywania faktur elektronicznych</span><span class="sxs-lookup"><span data-stu-id="3c4c4-106">An Azure storage account (Blob storage) to store electronic invoices</span></span>
- <span data-ttu-id="3c4c4-107">Magazyn kluczy systemu Azure do przechowywania certyfikatów i identyfikatora URI (Uniform Resource Identifier) konta magazynu</span><span class="sxs-lookup"><span data-stu-id="3c4c4-107">An Azure key vault to store certificates and the Uniform Resource Identifier (URI) of the storage account</span></span>

> [!NOTE]
> <span data-ttu-id="3c4c4-108">Dedykowany zasób magazynu kluczy i magazyn obiektów blob klienta muszą być przydzielone specjalnie do użytku z dodatkiem Fakturowanie elektroniczne.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-108">A dedicated key vault resource and customer Blob storage must be allocated specifically for use with the Electronic invoicing add-on.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="3c4c4-109">Wymagania wstępne</span><span class="sxs-lookup"><span data-stu-id="3c4c4-109">Prerequisites</span></span>

<span data-ttu-id="3c4c4-110">Zanim będzie można wykonać czynności opisane w tym temacie, należy upewnić się, że wykonano następujące zadania:</span><span class="sxs-lookup"><span data-stu-id="3c4c4-110">Before you can complete the steps in this topic, you must make sure that the following tasks have been completed:</span></span>

- <span data-ttu-id="3c4c4-111">Tworzenie zasobu magazynu kluczy w Azure.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-111">Create a key vault resource in Azure.</span></span> <span data-ttu-id="3c4c4-112">Aby uzyskać więcej informacji o tej funkcji, zobacz: [Informacje o usłudze Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span><span class="sxs-lookup"><span data-stu-id="3c4c4-112">For more information, see [About Azure Key Vault](https://docs.microsoft.com/azure/key-vault/general/overview).</span></span>
- <span data-ttu-id="3c4c4-113">Utwórz konto magazynu Azure (magazyn obiektów BLOB).</span><span class="sxs-lookup"><span data-stu-id="3c4c4-113">Create an Azure storage account (Blob storage).</span></span> <span data-ttu-id="3c4c4-114">Aby uzyskać więcej informacji, przejrzyj temat [Obsługa konta magazynu Azure](https://docs.microsoft.com/azure/storage/blobs/).</span><span class="sxs-lookup"><span data-stu-id="3c4c4-114">For more information, see [Maintaining Azure Storage Account](https://docs.microsoft.com/azure/storage/blobs/).</span></span>

## <a name="overview"></a><span data-ttu-id="3c4c4-115">Omówienie</span><span class="sxs-lookup"><span data-stu-id="3c4c4-115">Overview</span></span>

<span data-ttu-id="3c4c4-116">W tym temacie przedstawiono dwa główne kroki:</span><span class="sxs-lookup"><span data-stu-id="3c4c4-116">In this topic, you will complete two main steps:</span></span>

- <span data-ttu-id="3c4c4-117">Skonfiguruj konto magazynu Azure, aby uzyskać identyfikator URI konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-117">Set up the Azure storage account to get the storage account URI.</span></span>
- <span data-ttu-id="3c4c4-118">Skonfiguruj Magazyn kluczy do przechowywania identyfikatora URI konta magazynu.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-118">Set up the key vault to store the storage account URI.</span></span>

## <a name="set-up-the-azure-storage-account-to-get-the-storage-account-uri"></a><span data-ttu-id="3c4c4-119">Skonfiguruj konto magazynu Azure, aby uzyskać identyfikator URI konta magazynu</span><span class="sxs-lookup"><span data-stu-id="3c4c4-119">Set up the Azure storage account to get the storage account URI</span></span>

1. <span data-ttu-id="3c4c4-120">Umożliwia otwarcie konta magazynu, które ma być używane z dodatkiem Faktury elektroniczne.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-120">Open the storage account that you plan to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="3c4c4-121">Przejdź do **Usługa Blob** \> **Kontenery** i utwórz nowy kontener.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-121">Go to **Blob service** \> **Containers**, and create a new container.</span></span>
3. <span data-ttu-id="3c4c4-122">Wprowadź nazwę kontenera i ustaw dla pola **Poziom dostępu publicznego** wartość **Prywatne (brak dostępu anonimowego)**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-122">Enter a name for the container, and set the **Public access level** field to **Private (no anonymous access)**.</span></span>
4. <span data-ttu-id="3c4c4-123">Otwórz kontener i przejdź do **Ustawienia \> Polityka dostępu**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-123">Open the container, and go to **Settings \> Access policy**.</span></span>
5. <span data-ttu-id="3c4c4-124">Wybierz opcję **Dodaj zasady**, aby dodać zapisane zasady dostępu.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-124">Select **Add policy** to add a stored access policy.</span></span>
6. <span data-ttu-id="3c4c4-125">Odpowiednio określ **Identyfikator** i pola **Uprawnień**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-125">Set the **Identifier** and **Permissions** fields as appropriate.</span></span> <span data-ttu-id="3c4c4-126">W polu **uprawnienia** zaznacz opcję wszystkie uprawnienia.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-126">In the **Permissions** field, you should select all permissions.</span></span>

    ![Przyznawanie uprawnień do magazynu obiektów Blob](media/e-Invoicing-services-create-azure-resources-grant-blob-permissions.png)

7. <span data-ttu-id="3c4c4-128">Wprowadź daty rozpoczęcia i ważności.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-128">Enter the start and expiry dates.</span></span> <span data-ttu-id="3c4c4-129">Data ważności powinna być w przyszłości.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-129">The expiry date should be in future.</span></span>
8. <span data-ttu-id="3c4c4-130">Wybierz przycisk **OK**, aby zapisać zasady, a następnie zapisz zmiany w kontenerze.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-130">Select **OK** to save the policy, and then save your changes to the container.</span></span>
9. <span data-ttu-id="3c4c4-131">Wróć do konta magazynu i otwórz **Eksplorator magazynu (wersja zapoznawcza)**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-131">Return to the storage account, and open **Storage Explorer (preview)**.</span></span>
10. <span data-ttu-id="3c4c4-132">Kliknij prawym przyciskiem myszy kontener, a następnie wybierz polecenie **Pobierz podpis dostępu współdzielonego**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-132">Right-click the container, and then select **Get Shared Access Signature**.</span></span>
11. <span data-ttu-id="3c4c4-133">W oknie dialogowym **Podpis dostępu współdzielonego** skopiuj i zapisz wartość w polu **Identyfikator URI**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-133">In the **Shared Access Signature** dialog box, copy and store the value in the **URI** field.</span></span> <span data-ttu-id="3c4c4-134">Ta wartość będzie używana w następnej procedurze i jest określana jako *Identyfikator URI podpisu dostępu współdzielonego*.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-134">This value will be used in the next procedure and will be referred to as the *shared access signature URI*.</span></span>

    ![Wybieranie i kopiowanie wartości identyfikatora URI](media/e-Invoicing-services-create-azure-resources-select-and-copy-uri.png)

## <a name="set-up-the-key-vault-to-store-the-storage-account-uri"></a><span data-ttu-id="3c4c4-136">Skonfiguruj Magazyn kluczy do przechowywania identyfikatora URI konta magazynu</span><span class="sxs-lookup"><span data-stu-id="3c4c4-136">Set up the key vault to store the storage account URI</span></span>

1. <span data-ttu-id="3c4c4-137">Otwórz magazyn kluczy, którego zamierzasz używać z dodatkiem Faktury elektroniczne.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-137">Open the key vault that you intend to use with the Electronic invoicing add-on.</span></span>
2. <span data-ttu-id="3c4c4-138">Przejdź do **Ustawienia** \> **Wpis tajny**, a następnie wybierz opcję **Generuj/Importuj**, aby utworzyć nowy wpis tajny.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-138">Go to **Settings** \> **Secrets**, and then select **Generate/Import** to create a new secret.</span></span>
3. <span data-ttu-id="3c4c4-139">Na stronie **Tworzenie wpisu tajnego** w polu **Opcje przekazywania** wybierz opcję **Ręcznie**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-139">On the **Create a secret** page, in the **Upload options** field, select **Manual**.</span></span>
4. <span data-ttu-id="3c4c4-140">Pozwala wprowadzić nazwę wpisu tajnego.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-140">Enter the name of the secret.</span></span> <span data-ttu-id="3c4c4-141">Ta nazwa będzie używana podczas instalacji usługi w usłudze Regulatory Configuration Service (RCS) i będzie nazywana *nazwą klucza tajnego magazynu kluczy*.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-141">This name will be used during setup of the service in Regulatory Configuration Service (RCS) and will be referred to as the *key vault secret name*.</span></span>
5. <span data-ttu-id="3c4c4-142">W polu **Wartość** wybierz opcję **Identyfikator URI podpisu dostępu udostępnionego**, a następnie wybierz opcję **Utwórz**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-142">In the **Value** field, select **Shared Access Signature URI**, and then select **Create**.</span></span>
6. <span data-ttu-id="3c4c4-143">Skonfiguruj zasady dostępu, aby nadać dodatkowi Faktury elektroniczne odpowiedni poziom bezpiecznego dostępu do utworzonego klucza tajnego.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-143">Set up the access policy to grant the Electronic invoicing add-on the correct level of secure access to the secret you created.</span></span> <span data-ttu-id="3c4c4-144">Przejdź do **Ustawienia \> Zasad dostępu** i wybierz pozycję **Dodaj zasady dostępu**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-144">Go to **Settings \> Access policy**, and select **Add Access Policy**.</span></span>
7. <span data-ttu-id="3c4c4-145">Umożliwia ustawienie tajnych uprawnień dla operacji **Rozpocznij** i **Lista**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-145">Set the secret permissions for the **Get** and **List** operations.</span></span>

    ![Udzielanie dostępu do usługi](media/e-Invoicing-services-create-azure-resources-grant-service-access.png)

8. <span data-ttu-id="3c4c4-147">Umożliwia ustawienie certyfikatu uprawnień dla operacji **Rozpocznij** i **Lista**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-147">Set the certificate permissions for **Get** and **List** operations.</span></span>

    ![Nadanie certyfikatu uprawnień](media/e-Invoicing-services-create-azure-resources-grant-certificate-permission.png)

9. <span data-ttu-id="3c4c4-149">W oknie dialogowym **Główne** wybierz podmiot zabezpieczeń, dodając **Dodatek Faktury elektroniczne**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-149">In the **Principal** dialog box, select the principal by adding **Electronic invoicing add-on**.</span></span>
10. <span data-ttu-id="3c4c4-150">Wybierz opcję **Dodaj**, a następnie wybierz opcję **Zapisz zmiany magazynu kluczy**.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-150">Select **Add**, and then select **Save Key Vault changes**.</span></span>
11. <span data-ttu-id="3c4c4-151">Na stronie **Przegląd** skopiuj wartość **Nazwa DNS** dla magazynu kluczy.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-151">On the **Overview** page, copy the **DNS name** value for the key vault.</span></span> <span data-ttu-id="3c4c4-152">Ta wartość będzie używana podczas instalacji usługi w RCS i będzie określana jako *Identyfikator URI magazynu kluczy*.</span><span class="sxs-lookup"><span data-stu-id="3c4c4-152">This value will be used during setup of the service in RCS and will be referred as the *key vault URI*.</span></span>
